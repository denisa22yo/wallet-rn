(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,820041,e=>{"use strict";var i=e.i(720796),s=e.i(982942);e.s(["listUserOrganizationInvitationsQuery",0,(e,t,{getToken:n},a={})=>(0,s.queryOptions)({queryFn:()=>{let s=new URLSearchParams;return a.limit&&s.append("limit",a.limit.toString()),a.page&&s.append("offset",((a.page-1)*(a.limit||10)).toString()),(0,i.request)({method:"GET",path:`/v1/instances/${e}/users/${t}/organization_invitations?${s.toString()}`,getToken:n})},queryKey:["organizationInvitations",e,t,a]}),"setPasswordAsCompromised",0,(e,s,t,{getToken:n})=>(0,i.request)({method:"POST",path:`/v1/instances/${e}/users/${s}/password/set_compromised`,getToken:n,data:t}),"unsetPasswordAsCompromised",0,(e,s,{getToken:t})=>(0,i.request)({method:"POST",path:`/v1/instances/${e}/users/${s}/password/unset_compromised`,getToken:t})])},250653,e=>{"use strict";var i=e.i(73677),s=e.i(521322),t=e.i(820041),n=e.i(721376),a=e.i(412939),r=e.i(247854),o=e.i(70038),l=e.i(109821),c=e.i(965055),u=e.i(275630),d=e.i(758040),m=e.i(438439),h=e.i(237206);function p(e){let t,n,a,r,o=(0,s.c)(8);return o[0]!==e?({userId:n,...t}=e,o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]),o[3]!==n?(a=(0,i.jsx)(b,{userId:n}),o[3]=n,o[4]=a):a=o[4],o[5]!==t||o[6]!==a?(r=(0,i.jsx)(l.Dialog,{...t,isDismissible:!1,size:"md",children:a}),o[5]=t,o[6]=a,o[7]=r):r=o[7],r}function b(e){let r,c,p,b,y,f,x,g,S,j,w=(0,s.c)(25),{userId:v}=e,{instanceId:T}=(0,a.useTypedParams)(),k=(0,h.useQueryClient)(),{getToken:I}=(0,d.useAuth)();w[0]!==I||w[1]!==T||w[2]!==v?(r=async e=>{await (0,t.setPasswordAsCompromised)(T,v,e,{getToken:I})},w[0]=I,w[1]=T,w[2]=v,w[3]=r):r=w[3],w[4]!==T||w[5]!==k?(c=async()=>{await Promise.all([k.invalidateQueries({queryKey:["userSpecificSettings"]}),k.invalidateQueries({queryKey:["users",T]}),k.invalidateQueries({queryKey:["usersWithoutCount",T]}),k.invalidateQueries({queryKey:["memberships",T]}),k.invalidateQueries({queryKey:["userCohort"]})]),u.toast.success("The user's password has been set as compromised.")},w[4]=T,w[5]=k,w[6]=c):c=w[6],w[7]!==r||w[8]!==c?(p={mutationFn:r,onSuccess:c},w[7]=r,w[8]=c,w[9]=p):p=w[9];let{mutateAsync:C}=(0,m.useMutation)(p);w[10]===Symbol.for("react.memo_cache_sentinel")?(b={revoke_all_sessions:!0},w[10]=b):b=w[10],w[11]!==C?(y={defaultValues:b,onSubmit:async e=>{let{value:i}=e;await C({revoke_all_sessions:i.revoke_all_sessions})}},w[11]=C,w[12]=y):y=w[12];let P=(0,n.useDialogForm)(y);return w[13]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsx)(l.DialogHeader,{title:"Set password as compromised",description:"You're about to set the user's password as compromised. This action will require the user to create a new password on their next sign-in."}),w[13]=f):f=w[13],w[14]!==P.Field?(x=(0,i.jsx)(l.DialogBody,{children:(0,i.jsx)(l.DialogSection,{children:(0,i.jsx)(P.Field,{name:"revoke_all_sessions",children:_})})}),w[14]=P.Field,w[15]=x):x=w[15],w[16]!==P.notices||w[17]!==x?(g=(0,i.jsxs)(l.DialogContent,{children:[f,x,P.notices]}),w[16]=P.notices,w[17]=x,w[18]=g):g=w[18],w[19]!==P.submitButtonProps?(S=(0,i.jsx)(l.DialogFooter,{button:(0,i.jsx)(o.Button,{variant:"negative",...P.submitButtonProps,children:"Set compromised"})}),w[19]=P.submitButtonProps,w[20]=S):S=w[20],w[21]!==P.formProps||w[22]!==g||w[23]!==S?(j=(0,i.jsxs)("form",{...P.formProps,children:[g,S]}),w[21]=P.formProps,w[22]=g,w[23]=S,w[24]=j):j=w[24],j}function _(e){return(0,i.jsx)(c.SwitchField,{name:e.name,label:(0,i.jsxs)(i.Fragment,{children:["Revoke all active sessions for this user",(0,i.jsx)(r.Badge,{variant:"info",children:"Recommended"})]}),description:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("p",{children:"This action will revoke all active sessions for this user immediately and sign them out."})}),isSelected:e.state.value,onChange:e.handleChange,errors:e.state.meta.errors})}function y(e){let t,n,a,r,o=(0,s.c)(8);return o[0]!==e?({userId:n,...t}=e,o[0]=e,o[1]=t,o[2]=n):(t=o[1],n=o[2]),o[3]!==n?(a=(0,i.jsx)(f,{userId:n}),o[3]=n,o[4]=a):a=o[4],o[5]!==t||o[6]!==a?(r=(0,i.jsx)(l.Dialog,{...t,isDismissible:!1,size:"md",children:a}),o[5]=t,o[6]=a,o[7]=r):r=o[7],r}function f(e){let r,c,p,b,_,y,f,x,g,S,j,w=(0,s.c)(24),{userId:v}=e,{instanceId:T}=(0,a.useTypedParams)(),k=(0,h.useQueryClient)(),{getToken:I}=(0,d.useAuth)();w[0]!==I||w[1]!==T||w[2]!==v?(r=async()=>{await (0,t.unsetPasswordAsCompromised)(T,v,{getToken:I})},w[0]=I,w[1]=T,w[2]=v,w[3]=r):r=w[3],w[4]!==T||w[5]!==k?(c=async()=>{await Promise.all([k.invalidateQueries({queryKey:["userSpecificSettings"]}),k.invalidateQueries({queryKey:["users",T]}),k.invalidateQueries({queryKey:["usersWithoutCount",T]}),k.invalidateQueries({queryKey:["memberships",T]}),k.invalidateQueries({queryKey:["userCohort"]})]),u.toast.success("The user's password is no longer marked as compromised.")},w[4]=T,w[5]=k,w[6]=c):c=w[6],w[7]!==r||w[8]!==c?(p={mutationFn:r,onSuccess:c},w[7]=r,w[8]=c,w[9]=p):p=w[9];let{mutateAsync:C}=(0,m.useMutation)(p);w[10]===Symbol.for("react.memo_cache_sentinel")?(b={},w[10]=b):b=w[10],w[11]!==C?(_={defaultValues:b,onSubmit:async()=>{await C()}},w[11]=C,w[12]=_):_=w[12];let P=(0,n.useDialogForm)(_);return w[13]===Symbol.for("react.memo_cache_sentinel")?(y=(0,i.jsx)(l.DialogHeader,{title:"Unset password compromised"}),w[13]=y):y=w[13],w[14]===Symbol.for("react.memo_cache_sentinel")?(f=(0,i.jsx)(l.DialogBody,{children:(0,i.jsx)(l.DialogSection,{children:(0,i.jsxs)("div",{className:"text-ceramic-body-2",children:["You're about to unset the compromised status from the user's password. The user will no longer be required to reset their password on their next sign-in. ",(0,i.jsx)("br",{})]})})}),x=(0,i.jsx)(l.DialogNotice,{variant:"warning",children:"If the user has already initiated a sign-in flow before this action is performed, they will still be required to reset their password."}),w[14]=f,w[15]=x):(f=w[14],x=w[15]),w[16]!==P.notices?(g=(0,i.jsxs)(l.DialogContent,{children:[y,f,x,P.notices]}),w[16]=P.notices,w[17]=g):g=w[17],w[18]!==P.submitButtonProps?(S=(0,i.jsx)(l.DialogFooter,{button:(0,i.jsx)(o.Button,{variant:"primary",...P.submitButtonProps,children:"Unset compromised"})}),w[18]=P.submitButtonProps,w[19]=S):S=w[19],w[20]!==P.formProps||w[21]!==S||w[22]!==g?(j=(0,i.jsxs)("form",{...P.formProps,children:[g,S]}),w[20]=P.formProps,w[21]=S,w[22]=g,w[23]=j):j=w[23],j}e.s(["SetPasswordAsCompromised",()=>p,"UnsetPasswordAsCompromised",()=>y])},846709,e=>{"use strict";var i=e.i(433623),s=e.i(486996),t=e.i(214717),n=e.i(134490),a=e.i(384911),r=e.i(101508),o=e.i(830692),l=e.i(829325),c=e.i(66786),u=e.i(70996);let d={username:{name:"Username",url:"/user-authentication/user-and-authentication?user_auth_tab=username",icon:i.AtSymbolIcon,action:"Enable usernames"},email_address:{name:"Email address",url:"/user-authentication/user-and-authentication?user_auth_tab=email",icon:s.EnvelopeIcon,action:"Enable email addresses"},phone_number:{name:"Phone number",url:"/user-authentication/user-and-authentication?user_auth_tab=phone",icon:r.PhoneZoomedIcon,action:"Enable phone numbers"},password:{name:"Password",url:"/user-authentication/user-and-authentication?user_auth_tab=password",icon:n.LockIcon,action:"Enable passwords"},web3_wallet:{name:"Web3 wallet",url:"/user-authentication/web3",icon:u.Web3Icon,action:"Enable web3 wallets"},name:{name:"Name",url:"/user-authentication/user-and-authentication?user_auth_tab=user-profile",icon:c.UserCircleIcon,action:"Enable names"},external_accounts:{name:"Social account",url:"/user-authentication/sso-connections",icon:o.SocialConnectionsIcon,action:"Enable social accounts"},enterprise_sso:{name:"Enterprise accounts",url:"/user-authentication/enterprise-connections?filter=enterprise",icon:l.SsoIcon,action:"Enable enterprise accounts"},multi_factor_auth:{name:"Two-step verification",url:"/user-authentication/multi-factor",icon:a.MultiFactorIcon,action:"Enable two-step verification"},passkey:{name:"Passkey",url:"/user-authentication/user-and-authentication?user_auth_tab=passkeys",icon:t.KeyIcon,action:"Enable passkeys"}};function m(e,i){return e.find(e=>e.id===i)||e[0]}function h(e){let i,s;return e?"identifier"in e?e.identifier:`${e.first_name||""} ${e.last_name||""}`.trim()||(i=e.email_addresses,s=e.primary_email_address_id,i.find(e=>e.id===s)||i[0])?.email_address||""||e.username||m(e.phone_numbers,e.primary_phone_number_id||"")?.phone_number||""||m(e.web3_wallets,e.primary_web3_wallet_id||"")?.web3_wallet||""||e.id||"":""}function p(e){let i=[],s=(e,s)=>{s||i.push({key:e,displayName:d[e].name,url:d[e].url,icon:d[e].icon,action:d[e].action})};Object.entries(e.attributes).forEach(([e,i])=>{["authenticator_app","backup_code","first_name","last_name"].includes(e)||s(e,i.enabled)}),e.attributes.first_name.enabled||e.attributes.last_name.enabled||s("name",!1),s("external_accounts",Object.values(e.social).some(e=>e?.enabled)),s("enterprise_sso",e.enterprise_sso.enabled);let t=[e.attributes.authenticator_app.enabled,e.attributes.backup_code?.enabled,e.attributes.phone_number.used_for_second_factor];return e.attributes.password.enabled||s("password",!1),t.some(e=>e)||s("multi_factor_auth",!1),i}function b(e,i){let s=[];return Object.entries(e.attributes).forEach(([e,t])=>{if(t.required)switch(e){case"email_address":0===i.email_addresses.length&&s.push("Email address");break;case"phone_number":0===i.phone_numbers.length&&s.push("Phone number");break;case"username":i.username||s.push("Username");break;case"first_name":i.first_name||s.push("First name");break;case"last_name":i.last_name||s.push("Last name")}}),s}e.s(["formatIdentifier",()=>h,"getInactiveSettings",()=>p,"getMissingRequiredFields",()=>b],846709)},697823,e=>{"use strict";var i=e.i(521322),s=e.i(411048),t=e.i(475609),n=e.i(996047),a=e.i(706102),r=e.i(454685),o=e.i(412939),l=e.i(758040),c=e.i(223597);e.s(["useImpersonationState",0,()=>{let e,u,d,m,h=(0,i.c)(14),{instanceId:p}=(0,o.useTypedParams)(),{getToken:b}=(0,l.useAuth)(),{isEnabled:_}=(0,t.useNewPricing)(),y=(0,r.useIsFeatureSupported)(n.SUPPORTED_FEATURES.impersonation),f=(0,r.useIsFeatureSupported)(n.SUPPORTED_FEATURES.unlimited_impersonation),x=(0,a.useHasPermission)("users:imp");h[0]!==b||h[1]!==p?(e=(0,s.extendedInstanceQuery)(p,{getToken:b}),h[0]=b,h[1]=p,h[2]=e):e=h[2],h[3]!==e?(u={queries:[e]},h[3]=e,h[4]=u):u=h[4];let[g]=(0,c.useSuspenseQueries)(u),{data:S}=g,j=S.impersonation_quota,w=!!j&&j.used<j.included,v=f||w?x?void 0:n.RESTRICTION_REASONS.MISSING_PERMISSION:n.RESTRICTION_REASONS.MISSING_PLAN_FEATURE,T=!f&&!w||!x,k=j?void 0:n.SUPPORTED_FEATURES.unlimited_impersonation;h[5]!==T||h[6]!==j||h[7]!==w||h[8]!==v||h[9]!==k?(d={restrictionImpersonationReason:v,impersonationFeature:k,isImpersonationDisabled:T,shouldShowImpersonationQuota:w,impersonationQuota:j},h[5]=T,h[6]=j,h[7]=w,h[8]=v,h[9]=k,h[10]=d):d=h[10];let I=d,C=y?x?void 0:n.RESTRICTION_REASONS.MISSING_PERMISSION:n.RESTRICTION_REASONS.MISSING_PLAN_FEATURE,P=!y||!x;h[11]!==C||h[12]!==P?(m={restrictionImpersonationReason:C,impersonationFeature:n.SUPPORTED_FEATURES.impersonation,isImpersonationDisabled:P,shouldShowImpersonationQuota:!1,impersonationQuota:void 0},h[11]=C,h[12]=P,h[13]=m):m=h[13];let U=m;return _?I:U}])},248825,963599,163311,e=>{"use strict";var i=e.i(73677),s=e.i(521322),t=e.i(411048),n=e.i(163178),a=e.i(412939),r=e.i(70038),o=e.i(109821),l=e.i(758040),c=e.i(237206);function u(e){let u,d,m,h,p,b,_,y,f,x=(0,s.c)(28);x[0]!==e?({userId:m,isBanned:d,...u}=e,x[0]=e,x[1]=u,x[2]=d,x[3]=m):(u=x[1],d=x[2],m=x[3]);let{instanceId:g}=(0,a.useTypedParams)(),{getToken:S}=(0,l.useAuth)(),j=(0,c.useQueryClient)(),w=`${d?"Unban":"Ban"} user`,v=`Are you sure you want to ${d?"unban":"ban"} this user?`,T=d?"Unban":"Ban";x[4]!==T?(h=(0,i.jsx)(r.Button,{children:T}),x[4]=T,x[5]=h):h=x[5];let k=d?"Failed to unban user":"Failed to ban user";return x[6]!==S||x[7]!==g||x[8]!==d||x[9]!==m?(p=()=>d?(0,t.unbanSpecificUser)(g,m,{getToken:S}):(0,t.banSpecificUser)(g,m,{getToken:S}),x[6]=S,x[7]=g,x[8]=d,x[9]=m,x[10]=p):p=x[10],x[11]!==g||x[12]!==j||x[13]!==m?(b=async()=>{await Promise.all([j.invalidateQueries({queryKey:["userSpecificSettings",g,m]}),j.invalidateQueries({queryKey:["users",g]}),j.invalidateQueries({queryKey:["usersWithoutCount",g]}),j.invalidateQueries({queryKey:["memberships",g]}),j.invalidateQueries({queryKey:["userCohort"]})])},x[11]=g,x[12]=j,x[13]=m,x[14]=b):b=x[14],x[15]!==d?(_=d?"This action will allow the user to sign in to your application again. This action can be undone.":(0,i.jsxs)(i.Fragment,{children:["This will prevent the user from signing in to your application for an ",(0,i.jsx)("strong",{children:"indefinite"})," period of time. This action can be undone."]}),x[15]=d,x[16]=_):_=x[16],x[17]!==_?(y=(0,i.jsx)(o.DialogNotice,{variant:"info",children:_}),x[17]=_,x[18]=y):y=x[18],x[19]!==u||x[20]!==w||x[21]!==v||x[22]!==h||x[23]!==k||x[24]!==p||x[25]!==b||x[26]!==y?(f=(0,i.jsx)(n.ConfirmActionDialog,{...u,title:w,description:v,button:h,fallbackErrorMessage:k,mutationFn:p,invalidate:b,notices:y}),x[19]=u,x[20]=w,x[21]=v,x[22]=h,x[23]=k,x[24]=p,x[25]=b,x[26]=y,x[27]=f):f=x[27],f}e.s(["BanUserDialog",()=>u],248825);var d=e.i(843752),m=e.i(734990),h=e.i(298457),p=e.i(104477),b=e.i(364890),_=e.i(964335);let y=(0,_.createServerReference)("60714e239a7800d4764f7274eabd1e025f71a24481",_.callServer,void 0,_.findSourceMapURL,"getUserActiveApiKeysCount");function f(e){let n,r,c,u,d,m,_,f=(0,s.c)(16),{userId:x}=e,{instanceId:g}=(0,a.useTypedParams)(),{getToken:S}=(0,l.useAuth)();f[0]!==S||f[1]!==g?(n=(0,t.apiKeysSettingsQuery)(g,{getToken:S}),f[0]=S,f[1]=g,f[2]=n):n=f[2];let{data:j}=(0,b.useSuspenseQuery)(n);f[3]!==g||f[4]!==x?(r=["userActiveApiKeys",g,x],c=()=>y(g,x),f[3]=g,f[4]=x,f[5]=r,f[6]=c):(r=f[5],c=f[6]);let w=j?.user_api_keys_enabled===!0;f[7]!==r||f[8]!==c||f[9]!==w?(u={queryKey:r,queryFn:c,staleTime:3e5,enabled:w,placeholderData:0},f[7]=r,f[8]=c,f[9]=w,f[10]=u):u=f[10];let{data:v}=(0,p.useQuery)(u);return f[11]===Symbol.for("react.memo_cache_sentinel")?(d=(0,i.jsx)("p",{children:"This action is permanent and cannot be undone."}),f[11]=d):d=f[11],f[12]!==v?(m=void 0!==v&&v>0&&(0,i.jsxs)("p",{children:["Deleting this user will invalidate"," ",(0,h.pluralize)(v,"active API key")," and may disrupt integrations."]}),f[12]=v,f[13]=m):m=f[13],f[14]!==m?(_=(0,i.jsxs)(o.DialogNotice,{variant:"warning",children:[d,m]}),f[14]=m,f[15]=_):_=f[15],_}function x(e){let n,o,u,h,p,b,_,y=(0,s.c)(20);y[0]!==e?({userId:o,...n}=e,y[0]=e,y[1]=n,y[2]=o):(n=y[1],o=y[2]);let{instanceId:x}=(0,a.useTypedParams)(),{getToken:g}=(0,l.useAuth)(),S=(0,c.useQueryClient)(),j=(0,d.useCurrentInstance)(),w=`Delete ${j.environment_type} user`;return y[3]!==o?(u=(0,i.jsx)(f,{userId:o}),y[3]=o,y[4]=u):u=y[4],y[5]===Symbol.for("react.memo_cache_sentinel")?(h=(0,i.jsx)(r.Button,{children:"Delete user"}),y[5]=h):h=y[5],y[6]!==g||y[7]!==x||y[8]!==o?(p=()=>(0,t.deleteSpecificUser)(x,o,{getToken:g}),y[6]=g,y[7]=x,y[8]=o,y[9]=p):p=y[9],y[10]!==x||y[11]!==S||y[12]!==o?(b=async()=>{await Promise.all([S.invalidateQueries({queryKey:["userSpecificSettings",x,o]}),S.invalidateQueries({queryKey:["users",x]}),S.invalidateQueries({queryKey:["usersWithoutCount",x]}),S.invalidateQueries({queryKey:["usersCount",x]}),S.invalidateQueries({queryKey:["instance",x]}),S.invalidateQueries({queryKey:["memberships",x]}),S.invalidateQueries({queryKey:["userSpecificOrganizationMemberships",x]}),S.invalidateQueries({queryKey:["organization",x]}),S.invalidateQueries({queryKey:["organizations",x]}),S.invalidateQueries({queryKey:["userCohort"]})])},y[10]=x,y[11]=S,y[12]=o,y[13]=b):b=y[13],y[14]!==n||y[15]!==w||y[16]!==u||y[17]!==p||y[18]!==b?(_=(0,i.jsx)(m.ConfirmPermanentActionDialog,{...n,title:w,description:"Are you sure you want to delete this user?",notices:u,button:h,fallbackErrorMessage:"Failed to delete user",mutationFn:p,invalidate:b}),y[14]=n,y[15]=w,y[16]=u,y[17]=p,y[18]=b,y[19]=_):_=y[19],_}e.s(["DeleteUserDialog",()=>x],963599);var g=e.i(685262),S=e.i(942976),j=e.i(683471);function w(e){let u,d,m,h,p,b,_,y,f,x=(0,s.c)(28);x[0]!==e?({action:u,userId:m,...d}=e,x[0]=e,x[1]=u,x[2]=d,x[3]=m):(u=x[1],d=x[2],m=x[3]);let w=(0,c.useQueryClient)(),{getToken:v}=(0,l.useAuth)(),{instanceId:T}=(0,a.useTypedParams)(),k=(0,j.usePathname)();if(!u)return null;let I="lock"===u?"Lock User":"Unlock User",C=`Are you sure you want to ${u} this user?`,P="lock"===u?"Lock":"Unlock";x[4]!==P?(h=(0,i.jsx)(r.Button,{children:P}),x[4]=P,x[5]=h):h=x[5];let U="lock"===u?"Failed to lock user":"Failed to unlock user";return x[6]!==u||x[7]!==v||x[8]!==T||x[9]!==m?(p=()=>"lock"===u?(0,t.lockSpecificUser)(T,m,{getToken:v}):(0,t.unlockSpecificUser)(T,m,{getToken:v}),x[6]=u,x[7]=v,x[8]=T,x[9]=m,x[10]=p):p=x[10],x[11]!==T||x[12]!==w?(b=async()=>{await Promise.all([w.invalidateQueries({queryKey:["userSpecificSettings"]}),w.invalidateQueries({queryKey:["users",T]}),w.invalidateQueries({queryKey:["usersWithoutCount",T]}),w.invalidateQueries({queryKey:["memberships",T]}),w.invalidateQueries({queryKey:["userCohort"]})])},x[11]=T,x[12]=w,x[13]=b):b=x[13],x[14]!==u||x[15]!==k?(_="lock"===u?(0,i.jsxs)(i.Fragment,{children:["This will prevent the user from signing in to your application. The lockout duration can be modified in your"," ",(0,i.jsx)(S.default,{href:(0,g.to)(k,{page:"/user-authentication/attack-protection"}),children:"configuration"}),". This action can be undone."]}):"This will allow the user to sign in to your application again. This action can be undone.",x[14]=u,x[15]=k,x[16]=_):_=x[16],x[17]!==_?(y=(0,i.jsx)(o.DialogNotice,{variant:"info",children:_}),x[17]=_,x[18]=y):y=x[18],x[19]!==d||x[20]!==I||x[21]!==C||x[22]!==h||x[23]!==U||x[24]!==p||x[25]!==b||x[26]!==y?(f=(0,i.jsx)(n.ConfirmActionDialog,{...d,title:I,description:C,button:h,fallbackErrorMessage:U,mutationFn:p,invalidate:b,notices:y}),x[19]=d,x[20]=I,x[21]=C,x[22]=h,x[23]=U,x[24]=p,x[25]=b,x[26]=y,x[27]=f):f=x[27],f}e.s(["LockUnlockUserDialog",()=>w],163311)},609799,e=>{"use strict";var i=e.i(73677),s=e.i(521322),t=e.i(250653),n=e.i(846709),a=e.i(411048),r=e.i(146522),o=e.i(499494),l=e.i(996047),c=e.i(15743),u=e.i(935466),d=e.i(697823),m=e.i(412939),h=e.i(685262),p=e.i(247854),b=e.i(503666),_=e.i(275630),y=e.i(169842);e.i(953300);var f=e.i(624198),x=e.i(106268),g=e.i(933604),S=e.i(596464),j=e.i(134490),w=e.i(752368),v=e.i(66786),T=e.i(758040),k=e.i(104477),I=e.i(262850),C=e.i(683471),P=e.i(248825),U=e.i(963599),A=e.i(163311);function E(){let e,E,F,N,q,R,Q,B=(0,s.c)(28),{getToken:K}=(0,T.useAuth)(),O=(0,C.usePathname)(),{instanceId:M}=(0,m.useTypedParams)(),{showModalIfFeatureUnavailable:L}=(0,o.usePaymentRequired)(),$=(0,u.useFeatureFlag)("reset_password_session_task_enabled");B[0]!==K||B[1]!==M?(e=(0,a.userSettingsQuery)(M,{getToken:K}),B[0]=K,B[1]=M,B[2]=e):e=B[2];let z=!!M&&!!K;B[3]!==e||B[4]!==z?(E={...e,enabled:z},B[3]=e,B[4]=z,B[5]=E):E=B[5];let{data:W}=(0,k.useQuery)(E);B[6]!==W?(F=W?(0,n.getInactiveSettings)(W):[],B[6]=W,B[7]=F):F=B[7];let H=F;B[8]!==H?(N=e=>H.some(i=>i.key===e),B[8]=H,B[9]=N):N=B[9];let G=N,{isImpersonationDisabled:V,shouldShowImpersonationQuota:Y,impersonationFeature:J,restrictionImpersonationReason:Z,impersonationQuota:X}=(0,d.useImpersonationState)(),{openDialog:ee,dialogs:ei}=(0,y.useDialogs)();B[10]!==K||B[11]!==M?(q=async e=>{let i=window.open("","_blank");try{let s=await (0,a.impersonateSpecificUser)(M,e,{getToken:K});i?i.location.href=s.location:window.open(s.location,"_blank")}catch(e){return i?.close(),_.toast.error("Invalid impersonation redirection. Please try again.")}},B[10]=K,B[11]=M,B[12]=q):q=B[12];let es=q;B[13]!==es||B[14]!==$||B[15]!==J||B[16]!==X||B[17]!==V||B[18]!==G||B[19]!==ee||B[20]!==O||B[21]!==Z||B[22]!==Y||B[23]!==L?(R=e=>{let{userId:s,isBanned:n,isLocked:a,passwordEnabled:o,requiresPasswordReset:u}=e;return(0,i.jsx)(r.ActionDropdown,{neutral:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b.MenuItem,{icon:g.ClipboardIcon,label:"Copy user ID",onAction:()=>{(0,I.default)(s).catch(D)}}),(0,i.jsx)(b.MenuItem,{icon:v.UserCircleIcon,label:"View profile",href:(0,h.to)(O,{page:`/users/${s}`})}),(0,i.jsx)(b.MenuItem,{isDisabled:V,description:Z,icon:S.UserDottedCircleIcon,label:"Impersonate user",badge:(0,i.jsx)(i.Fragment,{children:Y&&X?(0,i.jsxs)(p.Badge,{variant:"secondary",children:[X.used," / ",X.included]}):(0,i.jsx)(c.PremiumBadge,{feature:J??l.SUPPORTED_FEATURES.impersonation})}),onAction:()=>{L({features:[J].filter(Boolean),callbackAfterClose:()=>es(s)})}})]}),negative:(0,i.jsxs)(i.Fragment,{children:[$&&o&&!G("password")&&(u?(0,i.jsx)(b.MenuItem,{icon:f.UserLockIcon,label:"Unset password compromised",className:"overflow-hidden text-ellipsis",onAction:()=>{ee((0,i.jsx)(t.UnsetPasswordAsCompromised,{userId:s}))}}):(0,i.jsx)(b.MenuItem,{icon:f.UserLockIcon,label:"Set password as compromised",className:"overflow-hidden text-ellipsis",onAction:()=>{ee((0,i.jsx)(t.SetPasswordAsCompromised,{userId:s}))}})),(0,i.jsx)(b.MenuItem,{icon:j.LockIcon,label:a?"Unlock":"Lock",onAction:()=>{ee((0,i.jsx)(A.LockUnlockUserDialog,{userId:s,action:a?"unlock":"lock"}))}}),(0,i.jsx)(b.MenuItem,{icon:x.BlockIcon,label:n?"Unban":"Ban",badge:(0,i.jsx)(c.PremiumBadge,{feature:l.SUPPORTED_FEATURES.ban_user}),onAction:()=>{L({features:[l.SUPPORTED_FEATURES.ban_user],callbackAfterClose:()=>{ee((0,i.jsx)(P.BanUserDialog,{userId:s,isBanned:n}))}})}}),(0,i.jsx)(b.MenuItem,{icon:w.TrashIcon,label:"Delete user",onAction:()=>{ee((0,i.jsx)(U.DeleteUserDialog,{userId:s}))}})]})})},B[13]=es,B[14]=$,B[15]=J,B[16]=X,B[17]=V,B[18]=G,B[19]=ee,B[20]=O,B[21]=Z,B[22]=Y,B[23]=L,B[24]=R):R=B[24];let et=R;return B[25]!==et||B[26]!==ei?(Q={UserActionsMenu:et,userActionsDialogs:ei},B[25]=et,B[26]=ei,B[27]=Q):Q=B[27],Q}function D(){}e.s(["useUserActionsMenu",()=>E])},299902,55077,e=>{"use strict";var i=e.i(73677),s=e.i(521322),t=e.i(912847),n=e.i(70038),a=e.i(228069),r=e.i(988456),o=e.i(822380),l=e.i(706537),c=e.i(536977),u=e.i(184260);let d=[{id:"email_address",label:"User",isRowHeader:!0,allowsSorting:!0,isOrderable:!1,isActive:!0,className:"w-[40%]"},{id:"username",label:"Username",isOrderable:!0,isActive:!0},{id:"phone_number",label:"Phone number",allowsSorting:!0,isOrderable:!0,isActive:!0},{id:"last_sign_in_at",label:"Last signed in",allowsSorting:!0,isOrderable:!0,isActive:!0},{id:"created_at",label:"Joined",allowsSorting:!0,isOrderable:!0,isActive:!0}];function m(e){let a,r,c,u,m,p=(0,s.c)(6),{headers:b}=e,_=void 0===b?d:b;return p[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,i.jsx)(l.InputSkeleton,{}),r=(0,i.jsx)(n.ButtonSkeleton,{icon:!0}),c=(0,i.jsx)(n.ButtonSkeleton,{icon:!0,children:"Create user"}),p[0]=a,p[1]=r,p[2]=c):(a=p[0],r=p[1],c=p[2]),p[3]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.jsx)(t.TablePaginatedFooterSkeleton,{}),p[3]=u):u=p[3],p[4]!==_?(m=(0,i.jsx)(o.TableFilters,{search:a,filter:r,action:c,children:(0,i.jsx)(o.TableCardSkeleton,{footer:u,children:(0,i.jsxs)(o.Table,{hasActions:!0,children:[(0,i.jsx)(o.TableHeader,{columns:_}),(0,i.jsx)(h,{headers:_,items:null})]})})}),p[4]=_,p[5]=m):m=p[5],m}function h(e){let t,n,l,m,h=(0,s.c)(9),{headers:b,items:_}=e,y=void 0===b?d:b;h[0]!==_?(t=()=>_&&_.length?_:Array.from({length:5},p),h[0]=_,h[1]=t):t=h[1];let[f]=(0,u.useState)(t);return h[2]!==y?(n=[y],l=e=>(0,i.jsx)(o.TableRow,{columns:y,actionsCell:(0,i.jsx)(o.TableActionCellSkeleton,{}),children:s=>{switch(s.id){case"email_address":return(0,i.jsx)(o.TableCell,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(r.Skeleton,{className:"size-10 shrink-0 rounded-full"}),(0,i.jsxs)("div",{className:"flex w-full min-w-0 max-w-64 flex-col gap-1 lg:max-w-72 xl:max-w-96",children:[(0,i.jsx)(r.Skeleton,{className:"w-fit max-w-full text-ceramic-label-2",children:"name"in e&&"identifier"in e?e.name||e.identifier:"User"}),(0,i.jsx)(r.Skeleton,{className:"w-fit max-w-full text-ceramic-body-2",children:"primary_email_address"in e?e.primary_email_address:"user@example.com"})]})]})});case"username":return(0,i.jsx)(o.TableCell,{className:"text-ceramic-body-2",children:(0,i.jsx)(r.Skeleton,{children:"username"in e&&null!=e.username?e.username:"username"})});case"phone_number":return(0,i.jsx)(o.TableCell,{children:(0,i.jsx)(r.Skeleton,{className:"text-ceramic-body-2",children:"primary_phone_number"in e&&null!=e.primary_phone_number?e.primary_phone_number:"555-555555"})});case"last_sign_in_at":return(0,i.jsx)(o.TableCell,{children:(0,i.jsx)(r.Skeleton,{className:"text-ceramic-body-2",children:"last_sign_in_at"in e&&null!=e.last_sign_in_at?(0,i.jsx)(a.Date,{date:e.last_sign_in_at,format:{month:"long"}}):(0,i.jsx)(a.Date,{date:0x197d4f303b0,format:{month:"long"}})})});case"created_at":return(0,i.jsx)(o.TableCell,{children:(0,i.jsx)(r.Skeleton,{className:"text-ceramic-body-2",children:(0,c.formatDate)("created_at"in e&&null!=e.created_at?e.created_at:Date.now(),{month:"long"})})});default:return(0,i.jsx)(o.TableCell,{children:(0,i.jsx)(r.Skeleton,{className:"text-ceramic-body-2",children:"-"})})}}}),h[2]=y,h[3]=n,h[4]=l):(n=h[3],l=h[4]),h[5]!==f||h[6]!==n||h[7]!==l?(m=(0,i.jsx)(o.TableBody,{items:f,dependencies:n,children:l}),h[5]=f,h[6]=n,h[7]=l,h[8]=m):m=h[8],m}function p(e,i){return{id:`user-${i}`}}e.s(["USERS_TABLE_COLUMNS",0,d],55077),e.s(["UsersTableSkeleton",()=>m,"UsersTableSkeletonBody",()=>h],299902)},198770,e=>{"use strict";var i=e.i(73677),s=e.i(521322),t=e.i(238750),n=e.i(912847),a=e.i(609799),r=e.i(685262),o=e.i(662714),l=e.i(70038),c=e.i(228069),u=e.i(363143),d=e.i(822380),m=e.i(431560),h=e.i(106268),p=e.i(603203),b=e.i(134490),_=e.i(764069),y=e.i(942976),f=e.i(683471),x=e.i(788884),g=e.i(55077),S=e.i(299902);function j(e){let t,n,l,u,m,p,_,y,x,j,T,C,P,U,A=(0,s.c)(34);A[0]!==e?({usernameEnabled:y,phoneEnabled:l,query:m,isFiltered:t,showFallback:p,sortDescriptor:_,onSortChange:n,...u}=e,A[0]=e,A[1]=t,A[2]=n,A[3]=l,A[4]=u,A[5]=m,A[6]=p,A[7]=_,A[8]=y):(t=A[1],n=A[2],l=A[3],u=A[4],m=A[5],p=A[6],_=A[7],y=A[8]);let E=(0,f.usePathname)(),{UserActionsMenu:D,userActionsDialogs:F}=(0,a.useUserActionsMenu)(),N="children"in u&&!("error"in u),q="children"in u?u.children:void 0;e:{let e;A[9]!==l||A[10]!==y?(e=g.USERS_TABLE_COLUMNS.filter(e=>("username"!==e.id||!!y)&&("phone_number"!==e.id||!!l)),A[9]=l,A[10]=y,A[11]=e):e=A[11];let i=e;if(0===i.length){let e;A[12]===Symbol.for("react.memo_cache_sentinel")?(e=g.USERS_TABLE_COLUMNS.filter(v),A[12]=e):e=A[12],x=e;break e}x=i}let R=x,Q=N&&q;return A[13]!==R?(j=(0,i.jsx)(d.TableHeader,{columns:R}),A[13]=R,A[14]=j):j=A[14],A[15]!==D||A[16]!==R||A[17]!==t||A[18]!==E||A[19]!==u||A[20]!==m||A[21]!==p?(T="error"in u?(0,i.jsx)(d.TableBody,{items:[],dependencies:[R],renderEmptyState:()=>(0,i.jsx)(I,{resetErrorBoundary:u.resetErrorBoundary})}):p?(0,i.jsx)(S.UsersTableSkeletonBody,{headers:R,items:u.data}):(0,i.jsx)(d.TableBody,{items:u.data,dependencies:[R],renderEmptyState:()=>(0,i.jsx)(k,{isSearching:!!m,isFiltered:t}),children:e=>(0,i.jsx)(d.TableRow,{href:E?(0,r.to)(E,{page:`/users/${e.id}`,back_page:"users"}):void 0,columns:R,actionsCell:(0,i.jsx)(d.ActionsCell,{children:(0,i.jsx)(D,{userId:e.id,passwordEnabled:e.password_enabled,requiresPasswordReset:e.requires_password_reset,isLocked:e.locked,isBanned:e.banned})}),children:s=>{switch(s.id){case"email_address":return(0,i.jsx)(d.TableCell,{children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(o.Avatar,{fallback:"user",unoptimized:!0,alt:"Profile picture of "+(e.name||e.identifier),src:e.image_url,width:40,height:40,className:"size-10"}),(0,i.jsxs)("div",{className:"flex w-full min-w-0 max-w-64 flex-col gap-1 lg:max-w-72 xl:max-w-96",children:[(0,i.jsx)("span",{className:"truncate text-ceramic-label-2",children:e.name||e.identifier}),(0,i.jsx)("span",{className:"truncate text-ceramic-body-2 text-ceramic-secondary",children:e.primary_email_address})]}),(e.banned||e.locked)&&(0,i.jsx)("span",{className:"flex min-w-0 items-center gap-1",children:[e.banned&&{icon:h.BlockIcon,label:"Banned"},e.locked&&{icon:b.LockIcon,label:"Locked"}].filter(function(e){return!!e}).map(w)})]})});case"username":return(0,i.jsx)(d.TableCell,{className:"text-ceramic-secondary",children:e.username??"-"});case"phone_number":return(0,i.jsx)(d.TableCell,{className:"text-ceramic-secondary",children:e.primary_phone_number??"-"});case"last_sign_in_at":return(0,i.jsx)(d.TableCell,{className:"text-ceramic-secondary",children:e.last_sign_in_at?(0,i.jsx)(c.Date,{date:e.last_sign_in_at,format:{month:"long"}}):"-"});case"created_at":return(0,i.jsx)(d.TableCell,{className:"text-ceramic-secondary",children:(0,i.jsx)(c.Date,{date:e.created_at,format:{month:"long"}})});default:return(0,i.jsx)(d.TableCell,{children:"-"})}}})}),A[15]=D,A[16]=R,A[17]=t,A[18]=E,A[19]=u,A[20]=m,A[21]=p,A[22]=T):T=A[22],A[23]!==n||A[24]!==_||A[25]!==j||A[26]!==T?(C=(0,i.jsxs)(d.Table,{hasActions:!0,sortDescriptor:_,onSortChange:n,children:[j,T]}),A[23]=n,A[24]=_,A[25]=j,A[26]=T,A[27]=C):C=A[27],A[28]!==Q||A[29]!==C?(P=(0,i.jsx)(d.TableCard,{footer:Q,children:C}),A[28]=Q,A[29]=C,A[30]=P):P=A[30],A[31]!==P||A[32]!==F?(U=(0,i.jsxs)(i.Fragment,{children:[P,F]}),A[31]=P,A[32]=F,A[33]=U):U=A[33],U}function w(e){let{icon:s,label:t}=e;return(0,i.jsxs)(m.TooltipTrigger,{children:[(0,i.jsx)(m.Tooltip,{children:t}),(0,i.jsx)(l.Button,{icon:s,"aria-label":t,emphasis:"none",variant:"negative"})]},t)}function v(e){return"username"!==e.id&&"phone_number"!==e.id}function T(e){let t,a=(0,s.c)(6),{params:r,totalCount:o,setPage:l,setLimit:c}=e,u=r.limit,d=r.page;return a[0]!==u||a[1]!==d||a[2]!==c||a[3]!==l||a[4]!==o?(t=(0,i.jsx)(n.TablePaginatedFooter,{count:o,limit:u,onLimitChange:c,page:d,onPageChange:l}),a[0]=u,a[1]=d,a[2]=c,a[3]=l,a[4]=o,a[5]=t):t=a[5],t}function k(e){let n,a=(0,s.c)(4),{isSearching:r,isFiltered:o}=e,{track:l}=(0,t.useAnalytics)();return a[0]!==o||a[1]!==r||a[2]!==l?(n=r||o?(0,i.jsx)(u.Empty,{icon:_.UserDottedCircleIcon,title:"No users found",description:"Try changing your search term or filters"}):(0,i.jsx)(u.Empty,{icon:_.UserDottedCircleIcon,title:"No users yet",description:(0,i.jsxs)(i.Fragment,{children:["Create a new user or learn how to"," ",(0,i.jsx)(y.default,{href:"https://clerk.com/docs/guides/development/migrating/overview",target:"_blank",rel:"noopener",onClick:()=>{l("Dashboard_Users-Migration_Docs_Link_Clicked",{surface:"Dashboard",location:"Users Table"}),x.default.capture("Dashboard_Users-Migration_Docs_Link_Clicked",{surface:"Dashboard",location:"Users Table"})},children:"migrate existing users"})]})}),a[0]=o,a[1]=r,a[2]=l,a[3]=n):n=a[3],n}function I(e){let t,n=(0,s.c)(2),{resetErrorBoundary:a}=e;return n[0]!==a?(t=(0,i.jsx)(u.Empty,{icon:p.ExclamationTriangleIcon,title:"Something went wrong",description:"Could not fetch users",button:(0,i.jsx)(l.Button,{onPress:()=>{a?a():window.location.reload()},children:"Try again"})}),n[0]=a,n[1]=t):t=n[1],t}e.s(["UsersTable",()=>j,"UsersTableFooter",()=>T])}]);