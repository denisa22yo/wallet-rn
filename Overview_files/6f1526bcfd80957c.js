(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,238750,283589,t=>{"use strict";var e,n,r=t.i(829768),i=t.i(73677),o=t.i(521322);let a=["/sign-in(.*)","/sign-up(.*)","/vercel/install","/proxy/api/event","/api/incidents/webhook","/assets/manifest.json","/apps/claim/sign-in(.*)","/relay-H7rw(.*)"];function s(t){return a.some(e=>e.endsWith("(.*)")?t.startsWith(e.replace("(.*)","")):t===e)}t.s(["isUnauthenticatedRoute",()=>s],283589);var u=t.i(997210);function c(){let t=[];return function(e,n){if("object"!=typeof n||null===n)return n;for(;t.length>0&&t.at(-1)!==this;)t.pop();return t.includes(n)?"[Circular]":(t.push(n),n)}}var l=t.i(788884),d=t.i(685262),h=t.i(758040),p=t.i(419551),f=t.i(824627);function g(){return void 0!==r.default&&r.default.env?r.default.env:{}}var v=t.i(713353),_=t.i(382591);function y(t,e,n,r){var i,o=[t,e,n,r],a=(0,_.isPlainObject)(t)?t.event:t;if(!a||!(0,_.isString)(a))throw Error("Event missing");var s=(0,_.isPlainObject)(t)?null!=(i=t.properties)?i:{}:(0,_.isPlainObject)(e)?e:{},u={};return(0,_.isFunction)(n)||(u=null!=n?n:{}),(0,_.isPlainObject)(t)&&!(0,_.isFunction)(e)&&(u=null!=e?e:{}),[a,s,u,o.find(_.isFunction)]}function m(t,e,n,r,i){var o,a,s=null,u=null,c=[t,e,n,r,i],l=c.filter(_.isString);1===l.length?(u=(0,_.isString)(c[1])?c[1]:l[0],s=null):2===l.length&&("string"==typeof c[0]&&(s=c[0]),"string"==typeof c[1]&&(u=c[1]));var d=c.find(_.isFunction),h=c.filter(_.isPlainObject);return 1===h.length?(0,_.isPlainObject)(c[2])?(a={},o=c[2]):(0,_.isPlainObject)(c[3])?(o={},a=c[3]):(o=h[0],a={}):2===h.length&&(o=h[0],a=h[1]),[s,u,null!=o?o:o={},null!=a?a:a={},d]}var b=function(t){return function(){for(var e,n,r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var a={},s=["callback","options","traits","id"],u=0;u<i.length;u++){var c=i[u],l=s.pop();if("id"===l){if((0,_.isString)(c)||(0,_.isNumber)(c)){a.id=c.toString();continue}if(null==c)continue;l=s.pop()}if(("traits"===l||"options"===l)&&(null==c||(0,_.isPlainObject)(c))&&(a[l]=c),(0,_.isFunction)(c)){a.callback=c;break}}return[null!=(e=a.id)?e:t.id(),null!=(n=a.traits)?n:{},null!=(r=a.options)?r:{},a.callback]}};function w(t,e,n,r){(0,_.isNumber)(t)&&(t=t.toString()),(0,_.isNumber)(e)&&(e=e.toString());var i=[t,e,n,r],o=i.filter(_.isString),a=o[0],s=void 0===a?t:a,u=o[1],c=i.filter(_.isPlainObject)[0];return[s,void 0===u?null:u,void 0===c?{}:c,i.find(_.isFunction)]}var S=t.i(491426),I=t.i(67365),k=t.i(135238),A=t.i(329888),E=t.i(808982),C=function(t,e,n,r,i,o){return{__t:"bpc",c:e,p:r,u:t,s:n,t:i,r:o}},x=Object.keys(C("","","","","","")),O=function(t){var e=t.indexOf("#");return -1===e?t:t.slice(0,e)},M=function(t){try{return new URL(t).pathname}catch(e){return"/"===t[0]?t:"/"+t}},j=function(t){var e=t.c,n=t.p,r=t.s,i=t.u,o=t.r,a=t.t,s=e?M(e):n,u=e?e.indexOf("?")>-1?e:e+r:O(i);return{path:s,referrer:o,search:r,title:a,url:u}},P=function(){var t=document.querySelector("link[rel='canonical']");return C(location.href,t&&t.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},N=function(t,e){void 0===e&&(e=j(P()));var n,r,i,o=t.context;"page"===t.type&&(i=t.properties&&(n=t.properties,r=Object.keys(e),Object.assign.apply(Object,(0,f.__spreadArray)([{}],r.map(function(t){var e;if(n&&Object.prototype.hasOwnProperty.call(n,t))return(e={})[t]=n[t],e}),!1))),t.properties=(0,f.__assign)((0,f.__assign)((0,f.__assign)({},e),t.properties),t.name?{name:t.name}:{})),o.page=(0,f.__assign)((0,f.__assign)((0,f.__assign)({},e),i),o.page)},R=t.i(163007),D=function(t){function e(e,n){var r=t.call(this,"".concat(e," ").concat(n))||this;return r.field=e,r}return(0,f.__extends)(e,t),e}(Error),U="is not a string",L="is not an object",F=function(t){var e,n;this.settings=t,this.createMessageId=t.createMessageId,this.onEventMethodCall=null!=(e=t.onEventMethodCall)?e:function(){},this.onFinishedEvent=null!=(n=t.onFinishedEvent)?n:function(){}},T=function(t){function e(e){var n=t.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat((0,E.v4)())},onEventMethodCall:function(t){var e=t.options;n.maybeUpdateAnonId(e)},onFinishedEvent:function(t){return n.addIdentity(t),t}})||this;return n.user=e,n}return(0,f.__extends)(e,t),e.prototype.maybeUpdateAnonId=function(t){(null==t?void 0:t.anonymousId)&&this.user.anonymousId(t.anonymousId)},e.prototype.addIdentity=function(t){this.user.id()&&(t.userId=this.user.id()),this.user.anonymousId()&&(t.anonymousId=this.user.anonymousId())},e.prototype.track=function(e,n,r,i,o){var a=t.prototype.track.call(this,e,n,r,i);return N(a,o),a},e.prototype.page=function(e,n,r,i,o,a){var s=t.prototype.page.call(this,e,n,r,i,o);return N(s,a),s},e.prototype.screen=function(e,n,r,i,o,a){var s=t.prototype.screen.call(this,e,n,r,i,o);return N(s,a),s},e.prototype.identify=function(e,n,r,i,o){var a=t.prototype.identify.call(this,e,n,r,i);return N(a,o),a},e.prototype.group=function(e,n,r,i,o){var a=t.prototype.group.call(this,e,n,r,i);return N(a,o),a},e.prototype.alias=function(e,n,r,i,o){var a=t.prototype.alias.call(this,e,n,r,i);return N(a,o),a},e}(function(){function t(t){this.settings=new F(t)}return t.prototype.track=function(t,e,n,r){return this.settings.onEventMethodCall({type:"track",options:n}),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),{event:t,type:"track",properties:null!=e?e:{},options:(0,f.__assign)({},n),integrations:(0,f.__assign)({},r)}))},t.prototype.page=function(t,e,n,r,i){this.settings.onEventMethodCall({type:"page",options:r});var o,a={type:"page",properties:(0,f.__assign)({},n),options:(0,f.__assign)({},r),integrations:(0,f.__assign)({},i)};return null!==t&&(a.category=t,a.properties=null!=(o=a.properties)?o:{},a.properties.category=t),null!==e&&(a.name=e),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),a))},t.prototype.screen=function(t,e,n,r,i){this.settings.onEventMethodCall({type:"screen",options:r});var o={type:"screen",properties:(0,f.__assign)({},n),options:(0,f.__assign)({},r),integrations:(0,f.__assign)({},i)};return null!==t&&(o.category=t),null!==e&&(o.name=e),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),o))},t.prototype.identify=function(t,e,n,r){return this.settings.onEventMethodCall({type:"identify",options:n}),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),{type:"identify",userId:t,traits:null!=e?e:{},options:(0,f.__assign)({},n),integrations:r}))},t.prototype.group=function(t,e,n,r){return this.settings.onEventMethodCall({type:"group",options:n}),this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),{type:"group",traits:null!=e?e:{},options:(0,f.__assign)({},n),integrations:(0,f.__assign)({},r),groupId:t}))},t.prototype.alias=function(t,e,n,r){this.settings.onEventMethodCall({type:"alias",options:n});var i={userId:t,type:"alias",options:(0,f.__assign)({},n),integrations:(0,f.__assign)({},r)};return(null!==e&&(i.previousId=e),void 0===t)?this.normalize((0,f.__assign)((0,f.__assign)({},i),this.baseEvent())):this.normalize((0,f.__assign)((0,f.__assign)({},this.baseEvent()),i))},t.prototype.baseEvent=function(){return{integrations:{},options:{}}},t.prototype.context=function(t){var e,n=["userId","anonymousId","timestamp","messageId"];delete t.integrations;var r=Object.keys(t),i=null!=(e=t.context)?e:{},o={};return r.forEach(function(e){"context"!==e&&(n.includes(e)?(0,R.dset)(o,e,t[e]):(0,R.dset)(i,e,t[e]))}),[i,o]},t.prototype.normalize=function(t){var e,n,r,i=Object.keys(null!=(n=t.integrations)?n:{}).reduce(function(e,n){var r,i;return(0,f.__assign)((0,f.__assign)({},e),((r={})[n]=!!(null==(i=t.integrations)?void 0:i[n]),r))},{});e=t.options||{},t.options=Object.keys(e).filter(function(t){return function(t,e){return void 0!==e}(t,e[t])}).reduce(function(t,n){return t[n]=e[n],t},{});var o=(0,f.__assign)((0,f.__assign)({},i),null==(r=t.options)?void 0:r.integrations),a=t.options?this.context(t.options):[],s=a[0],u=a[1],c=t.options,l=(0,f.__rest)(t,["options"]),d=(0,f.__assign)((0,f.__assign)((0,f.__assign)((0,f.__assign)({timestamp:new Date},l),{context:s,integrations:o}),u),{messageId:c.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(d),!function(t){if(!(0,_.exists)(t))throw new D("Event","is nil");if("object"!=typeof t)throw new D("Event",L);if(!(0,_.isString)(t.type))throw new D(".type",U);if(!(0,_.isString)(t.messageId))throw new D(".messageId",U);if("track"===t.type){if(!(0,_.isString)(t.event))throw new D(".event",U);if(!(0,_.isPlainObject)(t.properties))throw new D(".properties",L)}["group","identify"].includes(t.type)&&function(t){if(!(0,_.isPlainObject)(t.traits))throw new D(".traits",L)}(t)}(d),d},t}()),K=function(t){return"addMiddleware"in t&&"destination"===t.type},q=t.i(141289),z=t.i(40557),B=t.i(475583),W=function(){var t,e,n=0;return{done:function(){return t},run:function(r){var i=r();return"object"==typeof i&&null!==i&&"then"in i&&"function"==typeof i.then&&(1==++n&&(t=new Promise(function(t){return e=t})),i.finally(function(){return 0==--n&&e()})),i}}},J=t.i(536223),Q=function(t){function e(e){return t.call(this,"string"==typeof e?new q.PersistedPriorityQueue(4,e):e)||this}return(0,f.__extends)(e,t),e.prototype.flush=function(){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(e){return(0,S.isOffline)()?[2,[]]:[2,t.prototype.flush.call(this)]})})},e}(function(t){function e(e){var n=t.call(this)||this;return n.criticalTasks=W(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=e,n.queue.on(z.ON_REMOVE_FROM_FUTURE,function(){n.scheduleFlush(0)}),n}return(0,f.__extends)(e,t),e.prototype.register=function(t,e,n){return(0,f.__awaiter)(this,void 0,void 0,function(){var r,i,o=this;return(0,f.__generator)(this,function(a){switch(a.label){case 0:if(this.plugins.push(e),r=function(n){o.failedInitializations.push(e.name),o.emit("initialization_failure",e),console.warn(e.name,n),t.log("warn","Failed to load destination",{plugin:e.name,error:n}),o.plugins=o.plugins.filter(function(t){return t!==e})},"destination"!==e.type||"Segment.io"===e.name)return[3,1];return e.load(t,n).catch(r),[3,4];case 1:return a.trys.push([1,3,,4]),[4,e.load(t,n)];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),r(i),[3,4];case 4:return[2]}})})},e.prototype.deregister=function(t,e,n){return(0,f.__awaiter)(this,void 0,void 0,function(){var r;return(0,f.__generator)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,3,,4]),!e.unload)return[3,2];return[4,Promise.resolve(e.unload(t,n))];case 1:i.sent(),i.label=2;case 2:return this.plugins=this.plugins.filter(function(t){return t.name!==e.name}),[3,4];case 3:return r=i.sent(),t.log("warn","Failed to unload destination",{plugin:e.name,error:r}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var e;return(0,f.__generator)(this,function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),e=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,e]})})},e.prototype.subscribeToDelivery=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var e=this;return(0,f.__generator)(this,function(n){return[2,new Promise(function(n){var r=function(i,o){i.isSame(t)&&(e.off("flush",r),n(i))};e.on("flush",r)})]})})},e.prototype.dispatchSingle=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var e=this;return(0,f.__generator)(this,function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch(function(n){return e.enqueuRetry(n,t)?e.subscribeToDelivery(t):(t.setFailedDelivery({reason:n}),t)})]})})},e.prototype.isEmpty=function(){return 0===this.queue.length},e.prototype.scheduleFlush=function(t){var e=this;void 0===t&&(t=500),this.flushing||(this.flushing=!0,setTimeout(function(){e.flush().then(function(){setTimeout(function(){e.flushing=!1,e.queue.length&&e.scheduleFlush(0)},0)})},t))},e.prototype.deliver=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i;return(0,f.__generator)(this,function(o){switch(o.label){case 0:return[4,this.criticalTasks.done()];case 1:o.sent(),e=Date.now(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=o.sent(),n=Date.now()-e,this.emit("delivery_success",t),t.stats.gauge("delivered",n),t.log("debug","Delivered",t.event),[2,t];case 4:throw i=r=o.sent(),t.log("error","Failed to deliver",i),this.emit("delivery_failure",t,i),t.stats.increment("delivery_failed"),r;case 5:return[2]}})})},e.prototype.enqueuRetry=function(t,e){return!!(!(t instanceof B.ContextCancelation)||t.retry)&&this.queue.pushWithBackoff(e)},e.prototype.flush=function(){return(0,f.__awaiter)(this,void 0,void 0,function(){var t,e;return(0,f.__generator)(this,function(n){switch(n.label){case 0:if(0===this.queue.length||!(t=this.queue.pop()))return[2,[]];t.attempts=this.queue.getAttempts(t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=n.sent(),this.emit("flush",t,!0),[3,4];case 3:return e=n.sent(),this.enqueuRetry(e,t)||(t.setFailedDelivery({reason:e}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var e,n,r=(e="type",n={},this.plugins.filter(function(e){if("destination"!==e.type&&"Segment.io"!==e.name)return!0;var n,r,i,o=void 0;return null==(n=e.alternativeNames)||n.forEach(function(e){void 0!==t[e]&&(o=t[e])}),null!=(i=null!=(r=t[e.name])?r:o)?i:!1!==("Segment.io"===e.name||t.All)}).forEach(function(t){var r,i=void 0;if("string"==typeof e){var o=t[e];i="string"!=typeof o?JSON.stringify(o):o}else e instanceof Function&&(i=e(t));void 0!==i&&(n[i]=(0,f.__spreadArray)((0,f.__spreadArray)([],null!=(r=n[i])?r:[],!0),[t],!1))}),n),i=r.before,o=r.enrichment,a=r.destination,s=r.after;return{before:void 0===i?[]:i,enrichment:void 0===o?[]:o,destinations:void 0===a?[]:a,after:void 0===s?[]:s}},e.prototype.flushOne=function(t){var e,n;return(0,f.__awaiter)(this,void 0,void 0,function(){var r,i,o,a,s,u,c,l,d,h,p,g,v;return(0,f.__generator)(this,function(f){switch(f.label){case 0:if(!this.isReady())throw Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),i=(r=this.availableExtensions(null!=(e=t.event.integrations)?e:{})).before,o=r.enrichment,a=0,s=i,f.label=1;case 1:if(!(a<s.length))return[3,4];return u=s[a],[4,(0,J.ensure)(t,u)];case 2:(c=f.sent())instanceof B.CoreContext&&(t=c),this.emit("message_enriched",t,u),f.label=3;case 3:return a++,[3,1];case 4:l=0,d=o,f.label=5;case 5:if(!(l<d.length))return[3,8];return h=d[l],[4,(0,J.attempt)(t,h)];case 6:(c=f.sent())instanceof B.CoreContext&&(t=c),this.emit("message_enriched",t,h),f.label=7;case 7:return l++,[3,5];case 8:return g=(p=this.availableExtensions(null!=(n=t.event.integrations)?n:{})).destinations,v=p.after,[4,new Promise(function(e,n){setTimeout(function(){Promise.all(g.map(function(e){return(0,J.attempt)(t,e)})).then(e).catch(n)},0)})];case 9:return f.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),[4,Promise.all(v.map(function(e){return(0,J.attempt)(t,e)}))];case 10:return f.sent(),[2,t]}})})},e}(A.Emitter));function V(t){for(var e=t.constructor.prototype,n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++){var i=r[n];if("constructor"!==i){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);o&&"function"==typeof o.value&&(t[i]=t[i].bind(t))}}return t}var G=function(t,e,n,r){console.warn("".concat(t.constructor.name,": Can't ").concat(e,' key "').concat(n,'" | Err: ').concat(r))},H=function(){function t(t){this.stores=t}return t.prototype.get=function(t){for(var e=null,n=0,r=this.stores;n<r.length;n++){var i=r[n];try{if(null!=(e=i.get(t)))return e}catch(e){G(i,"get",t,e)}}return null},t.prototype.set=function(t,e){this.stores.forEach(function(n){try{n.set(t,e)}catch(e){G(n,"set",t,e)}})},t.prototype.clear=function(t){this.stores.forEach(function(e){try{e.remove(t)}catch(n){G(e,"remove",t,n)}})},t.prototype.getAndSync=function(t){var e=this.get(t),n="number"==typeof e?e.toString():e;return this.set(t,n),n},t}(),$=function(){function t(){this.cache={}}return t.prototype.get=function(t){var e;return null!=(e=this.cache[t])?e:null},t.prototype.set=function(t,e){this.cache[t]=e},t.prototype.remove=function(t){delete this.cache[t]},t}(),Y={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function Z(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var X=function t(e,n){function r(t,r,i){if("u">typeof document){"number"==typeof(i=Z({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+o}}return Object.create({set:r,get:function(t){if("u">typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=e.read(a,s),t===s)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){r(t,"",Z({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,Z({},this.attributes,e))},withConverter:function(e){return t(Z({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function tt(t){var e=function(t){try{return new URL(t)}catch(t){return}}(t);if(e)for(var n=function(t){var e=t.hostname.split("."),n=e[e.length-1],r=[];if(4===e.length&&parseInt(n,10)>0||e.length<=1)return r;for(var i=e.length-2;i>=0;--i)r.push(e.slice(i).join("."));return r}(e),r=0;r<n.length;++r){var i="__tld__",o=n[r],a={domain:"."+o};try{if(X.set(i,"1",a),X.get(i))return X.remove(i,a),o}catch(t){return}}}var te=function(){function t(e){void 0===e&&(e=t.defaults),this.options=(0,f.__assign)((0,f.__assign)({},t.defaults),e)}return Object.defineProperty(t,"defaults",{get:function(){return{maxage:365,domain:tt(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),t.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},t.prototype.get=function(t){var e;try{var n=X.get(t);if(null==n)return null;try{return null!=(e=JSON.parse(n))?e:null}catch(t){return null!=n?n:null}}catch(t){return null}},t.prototype.set=function(t,e){"string"==typeof e?X.set(t,e,this.opts()):null===e?X.remove(t,this.opts()):X.set(t,JSON.stringify(e),this.opts())},t.prototype.remove=function(t){return X.remove(t,this.opts())},t}(),tn=function(){function t(){}return t.prototype.localStorageWarning=function(t,e){console.warn("Unable to access ".concat(t,", localStorage may be ").concat(e))},t.prototype.get=function(t){var e;try{var n=localStorage.getItem(t);if(null===n)return null;try{return null!=(e=JSON.parse(n))?e:null}catch(t){return null!=n?n:null}}catch(e){return this.localStorageWarning(t,"unavailable"),null}},t.prototype.set=function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){this.localStorageWarning(t,"full")}},t.prototype.remove=function(t){try{return localStorage.removeItem(t)}catch(e){this.localStorageWarning(t,"unavailable")}},t}();function tr(t){return t&&t.stores&&Array.isArray(t.stores)&&t.stores.every(function(t){return Object.values(Y).includes(t)})}function ti(t){return t.map(function(t){var e,n;switch("object"==typeof t&&void 0!==t.name?(e=t.name,n=t.settings):e=t,e){case Y.Cookie:return new te(n);case Y.LocalStorage:return new tn;case Y.Memory:return new $;default:throw Error("Unknown Store Type: ".concat(t))}})}function to(t,e){return t.map(function(t){return e&&t===Y.Cookie?{name:t,settings:e}:t})}var ta={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},ts=function(){function t(t,e){void 0===t&&(t=ta);var n,r,i,o,a=this;this.options={},this.id=function(t){if(a.options.disable)return null;var e=a.identityStore.getAndSync(a.idKey);void 0!==t&&(a.identityStore.set(a.idKey,t),t!==e&&null!==e&&null!==t&&a.anonymousId(null));var n=a.identityStore.getAndSync(a.idKey);if(n)return n;var r=a.legacyUserStore.get(ta.cookie.oldKey);return r?"object"==typeof r?r.id:r:null},this.anonymousId=function(t){var e,n;if(a.options.disable)return null;if(void 0===t){var r=null!=(e=a.identityStore.getAndSync(a.anonKey))?e:null==(n=a.legacySIO())?void 0:n[0];if(r)return r}return null===t?a.identityStore.set(a.anonKey,null):a.identityStore.set(a.anonKey,null!=t?t:(0,E.v4)()),a.identityStore.getAndSync(a.anonKey)},this.traits=function(t){var e;if(!a.options.disable)return null===t&&(t={}),t&&a.traitsStore.set(a.traitsKey,null!=t?t:{}),null!=(e=a.traitsStore.get(a.traitsKey))?e:{}},this.options=(0,f.__assign)((0,f.__assign)({},ta),t),this.cookieOptions=e,this.idKey=null!=(r=null==(n=t.cookie)?void 0:n.key)?r:ta.cookie.key,this.traitsKey=null!=(o=null==(i=t.localStorage)?void 0:i.key)?o:ta.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,e),this.legacyUserStore=this.createStorage(this.options,e,function(t){return t===Y.Cookie}),this.traitsStore=this.createStorage(this.options,e,function(t){return t!==Y.Cookie});var s=this.legacyUserStore.get(ta.cookie.oldKey);s&&"object"==typeof s&&(s.id&&this.id(s.id),s.traits&&this.traits(s.traits)),V(this)}return t.prototype.legacySIO=function(){var t=this.legacyUserStore.get("_sio");if(!t)return null;var e=t.split("----");return[e[0],e[1]]},t.prototype.identify=function(t,e){if(!this.options.disable){e=null!=e?e:{};var n=this.id();(null===n||n===t)&&(e=(0,f.__assign)((0,f.__assign)({},this.traits()),e)),t&&this.id(t),this.traits(e)}},t.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},t.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},t.prototype.load=function(){return new t(this.options,this.cookieOptions)},t.prototype.save=function(){return!0},t.prototype.createStorage=function(t,e,n){var r=[Y.LocalStorage,Y.Cookie,Y.Memory];return t.disable?new H([]):t.persist?(void 0!==t.storage&&null!==t.storage&&tr(t.storage)&&(r=t.storage.stores),t.localStorageFallbackDisabled&&(r=r.filter(function(t){return t!==Y.LocalStorage})),n&&(r=r.filter(n)),new H(ti(to(r,e)))):new H([new $])},t.defaults=ta,t}(),tu={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},tc=function(t){function e(e,n){void 0===e&&(e=tu);var r=t.call(this,(0,f.__assign)((0,f.__assign)({},tu),e),n)||this;return r.anonymousId=function(t){},V(r),r}return(0,f.__extends)(e,t),e}(ts),tl=t.i(574945),td=t.i(786875),th=t.i(110037),tp=t.i(46112),tf=function(t,e,n){n.getAndRemove(t).forEach(function(t){tS(e,t).catch(console.error)})},tg=tf.bind(void 0,"on"),tv=tf.bind(void 0,"setAnonymousId"),t_=function(t,e){Object.keys(e.calls).forEach(function(n){e.getAndRemove(n).forEach(function(e){setTimeout(function(){tS(t,e).catch(console.error)},0)})})},ty=function(t){if(tm(t))return j(t.pop())},tm=function(t){var e=t[t.length-1];if("object"!==Object.prototype.toString.call(e).slice(8,-1).toLowerCase()||"bpc"!==e.__t)return!1;for(var n in e)if(!x.includes(n))return!1;return!0},tb=function(t,e,n,r){void 0===n&&(n=function(){}),void 0===r&&(r=console.error),this.method=t,this.resolve=n,this.reject=r,this.called=!1,this.args=e},tw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._callMap={},this.add.apply(this,t)}return Object.defineProperty(t.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(t){this._callMap=t},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e;return null!=(e=this.calls[t])?e:[]},t.prototype.getAndRemove=function(t){var e=this.get(t);return this.calls[t]=[],e},t.prototype.add=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){["track","screen","alias","group","page","identify"].includes(e.method)&&!tm(e.args)&&(e.args=(0,f.__spreadArray)((0,f.__spreadArray)([],e.args,!0),[P()],!1)),t.calls[e.method]?t.calls[e.method].push(e):t.calls[e.method]=[e]})},t.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},t.prototype.toArray=function(){var t;return(t=[]).concat.apply(t,Object.values(this.calls))},t.prototype._pushSnippetWindowBuffer=function(){if("npm"!==(0,tp.getVersionType)()){var t=(0,th.getGlobalAnalytics)();if(Array.isArray(t)){var e=t.splice(0,t.length).map(function(t){return new tb(t[0],t.slice(1))});this.add.apply(this,e)}}},t}();function tS(t,e){return(0,f.__awaiter)(this,void 0,void 0,function(){var n,r;return(0,f.__generator)(this,function(i){switch(i.label){case 0:var o;if(i.trys.push([0,3,,4]),e.called)return[2,void 0];if(e.called=!0,!("object"==typeof(o=n=t[e.method].apply(t,e.args))&&null!==o&&"then"in o&&"function"==typeof o.then))return[3,2];return[4,n];case 1:i.sent(),i.label=2;case 2:return e.resolve(n),[3,4];case 3:return r=i.sent(),e.reject(r),[3,4];case 4:return[2]}})})}var tI=function(){function t(t){var e=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=tl.version,this._preInitBuffer=new tw,this._promise=t(this._preInitBuffer),this._promise.then(function(t){var n=t[0],r=t[1];e.instance=n,e.ctx=r}).catch(function(){})}return t.prototype.then=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).then.apply(t,e)},t.prototype.catch=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).catch.apply(t,e)},t.prototype.finally=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).finally.apply(t,e)},t.prototype._createMethod=function(t){var e=this;return function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.instance?Promise.resolve((n=e.instance)[t].apply(n,r)):new Promise(function(n,i){e._preInitBuffer.add(new tb(t,r,n,i))})}},t.prototype._createChainableMethod=function(t){var e=this;return function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.instance?(n=e.instance)[t].apply(n,r):e._preInitBuffer.add(new tb(t,r)),e}},t}(),tk=t.i(936176),tA=t.i(609152),tE=function(t){var e=!1;window.addEventListener("pagehide",function(){e||t(e=!0)}),document.addEventListener("visibilitychange",function(){if("hidden"==document.visibilityState){if(e)return;e=!0}else e=!1;t(e)})},tC=function(t){function e(e,n){var r=t.call(this,e)||this;return r.retryTimeout=n,r.name="RateLimitError",r}return(0,f.__extends)(e,t),e}(Error),tx=function(t){return(0,f.__assign)({"Content-Type":"text/plain"},"function"==typeof t?t():t)};function tO(t){return(encodeURI(JSON.stringify(t)).split(/%..|./).length-1)/1024}var tM=t.i(276533);function tj(t,e,n,r){var i=this;t||setTimeout(function(){return(0,f.__awaiter)(i,void 0,void 0,function(){var t,i;return(0,f.__generator)(this,function(o){switch(o.label){case 0:return t=!0,[4,function(t,e){return(0,f.__awaiter)(this,void 0,void 0,function(){var n,r=this;return(0,f.__generator)(this,function(i){switch(i.label){case 0:if(n=[],(0,S.isOffline)())return[2,e];return[4,(0,tM.pWhile)(function(){return e.length>0&&!(0,S.isOffline)()},function(){return(0,f.__awaiter)(r,void 0,void 0,function(){var r;return(0,f.__generator)(this,function(i){switch(i.label){case 0:if(!(r=e.pop()))return[2];return[4,(0,J.attempt)(r,t)];case 1:return i.sent()instanceof I.Context||n.push(r),[2]}})})})];case 1:return i.sent(),n.map(function(t){return e.pushWithBackoff(t)}),[2,e]}})})}(n,e)];case 1:return i=o.sent(),t=!1,e.todo>0&&r(t,i,n,r),[2]}})})},5e3*Math.random())}var tP=t.i(290997),tN=function(t){return"Segment.io"===t.name},tR="This is being deprecated and will be not be available in future releases of Analytics JS",tD=(0,td.getGlobal)(),tU=null==tD?void 0:tD.analytics,tL=function(){function t(t,e){var n;this.timeout=300,this._getSegmentPluginMetadata=function(){var t;return null==(t=e.plugins.find(tN))?void 0:t.metadata},this.writeKey=t.writeKey,this.cdnSettings=null!=(n=t.cdnSettings)?n:{integrations:{"Segment.io":{apiKey:""}}},this.cdnURL=t.cdnURL}return Object.defineProperty(t.prototype,"apiHost",{get:function(){var t,e;return null==(e=null==(t=this._getSegmentPluginMetadata)?void 0:t.call(this))?void 0:e.apiHost},enumerable:!1,configurable:!0}),t}();function tF(){console.warn(tR)}var tT=function(e){function n(t,n,r,i,o){var a,s,u,c,l,d,h=this;(h=e.call(this)||this)._debug=!1,h.initialized=!1,h.user=function(){return h._user},h.init=h.initialize.bind(h),h.log=tF,h.addIntegrationMiddleware=tF,h.listeners=tF,h.addEventListener=tF,h.removeAllListeners=tF,h.removeListener=tF,h.removeEventListener=tF,h.hasListeners=tF,h.add=tF,h.addIntegration=tF;var p=null==n?void 0:n.cookie,g=null!=(l=null==n?void 0:n.disableClientPersistence)&&l;h.queue=null!=r?r:(a="".concat(t.writeKey,":event-queue"),void 0===(s=null==n?void 0:n.retryQueue)&&(s=!1),void 0===(u=g)&&(u=!1),c=s?10:1,new Q(u?new z.PriorityQueue(c,[]):new q.PersistedPriorityQueue(c,a))),h.settings=new tL(t,h.queue);var v=null==n?void 0:n.storage;return h._universalStorage=h.createStore(g,v,p),h._user=null!=i?i:new ts((0,f.__assign)({persist:!g,storage:null==n?void 0:n.storage},null==n?void 0:n.user),p).load(),h._group=null!=o?o:new tc((0,f.__assign)({persist:!g,storage:null==n?void 0:n.storage},null==n?void 0:n.group),p).load(),h.eventFactory=new T(h._user),h.integrations=null!=(d=null==n?void 0:n.integrations)?d:{},h.options=null!=n?n:{},V(h),h}return(0,f.__extends)(n,e),n.prototype.createStore=function(t,e,n){return new H(t?[new $]:e&&tr(e)?ti(to(e.stores,n)):ti([Y.LocalStorage,{name:Y.Cookie,settings:n},Y.Memory]))},Object.defineProperty(n.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),n.prototype.track=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u=this;return(0,f.__generator)(this,function(c){return e=ty(t),r=(n=y.apply(void 0,t))[0],i=n[1],o=n[2],a=n[3],s=this.eventFactory.track(r,i,o,this.integrations,e),[2,this._dispatch(s,a).then(function(t){return u.emit("track",r,t.event.properties,t.event.options),t})]})})},n.prototype.page=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c=this;return(0,f.__generator)(this,function(l){return e=ty(t),r=(n=m.apply(void 0,t))[0],i=n[1],o=n[2],a=n[3],s=n[4],u=this.eventFactory.page(r,i,o,a,this.integrations,e),[2,this._dispatch(u,s).then(function(t){return c.emit("page",r,i,t.event.properties,t.event.options),t})]})})},n.prototype.identify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u=this;return(0,f.__generator)(this,function(c){return e=ty(t),r=(n=b(this._user).apply(void 0,t))[0],i=n[1],o=n[2],a=n[3],this._user.identify(r,i),s=this.eventFactory.identify(this._user.id(),this._user.traits(),o,this.integrations,e),[2,this._dispatch(s,a).then(function(t){return u.emit("identify",t.event.userId,t.event.traits,t.event.options),t})]})})},n.prototype.group=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ty(e);if(0===e.length)return this._group;var i=b(this._group).apply(void 0,e),o=i[0],a=i[1],s=i[2],u=i[3];this._group.identify(o,a);var c=this._group.id(),l=this._group.traits(),d=this.eventFactory.group(c,l,s,this.integrations,r);return this._dispatch(d,u).then(function(e){return t.emit("group",e.event.groupId,e.event.traits,e.event.options),e})},n.prototype.alias=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u=this;return(0,f.__generator)(this,function(c){return e=ty(t),r=(n=w.apply(void 0,t))[0],i=n[1],o=n[2],a=n[3],s=this.eventFactory.alias(r,i,o,this.integrations,e),[2,this._dispatch(s,a).then(function(t){return u.emit("alias",r,i,t.event.options),t})]})})},n.prototype.screen=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.__awaiter)(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c=this;return(0,f.__generator)(this,function(l){return e=ty(t),r=(n=m.apply(void 0,t))[0],i=n[1],o=n[2],a=n[3],s=n[4],u=this.eventFactory.screen(r,i,o,a,this.integrations,e),[2,this._dispatch(u,s).then(function(t){return c.emit("screen",r,i,t.event.properties,t.event.options),t})]})})},n.prototype.trackClick=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,f.__awaiter)(this,void 0,void 0,function(){var n;return(0,f.__generator)(this,function(r){switch(r.label){case 0:return[4,t.A(248075)];case 1:return[2,(n=r.sent().link).call.apply(n,(0,f.__spreadArray)([this],e,!1))]}})})},n.prototype.trackLink=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,f.__awaiter)(this,void 0,void 0,function(){var n;return(0,f.__generator)(this,function(r){switch(r.label){case 0:return[4,t.A(248075)];case 1:return[2,(n=r.sent().link).call.apply(n,(0,f.__spreadArray)([this],e,!1))]}})})},n.prototype.trackSubmit=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,f.__awaiter)(this,void 0,void 0,function(){var n;return(0,f.__generator)(this,function(r){switch(r.label){case 0:return[4,t.A(248075)];case 1:return[2,(n=r.sent().form).call.apply(n,(0,f.__spreadArray)([this],e,!1))]}})})},n.prototype.trackForm=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,f.__awaiter)(this,void 0,void 0,function(){var n;return(0,f.__generator)(this,function(r){switch(r.label){case 0:return[4,t.A(248075)];case 1:return[2,(n=r.sent().form).call.apply(n,(0,f.__spreadArray)([this],e,!1))]}})})},n.prototype.register=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,f.__generator)(this,function(r){switch(r.label){case 0:return e=I.Context.system(),[4,Promise.all(t.map(function(t){return n.queue.register(e,t,n)}))];case 1:return r.sent(),[2,e]}})})},n.prototype.deregister=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.__awaiter)(this,void 0,void 0,function(){var e,n=this;return(0,f.__generator)(this,function(r){switch(r.label){case 0:return e=I.Context.system(),[4,Promise.all(t.map(function(t){var r=n.queue.plugins.find(function(e){return e.name===t});if(r)return n.queue.deregister(e,r,n);e.log("warn","plugin ".concat(t," not found"))}))];case 1:return r.sent(),[2,e]}})})},n.prototype.debug=function(t){return!1===t&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},n.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},n.prototype.timeout=function(t){this.settings.timeout=t},n.prototype._dispatch=function(t,e){return(0,f.__awaiter)(this,void 0,void 0,function(){var n;return(0,f.__generator)(this,function(r){return((n=new I.Context(t)).stats.increment("analytics_js.invoke",1,[t.type]),(0,S.isOffline)()&&!this.options.retryQueue)?[2,n]:[2,function(t,e,n,r){return(0,f.__awaiter)(this,void 0,void 0,function(){var i,o;return(0,f.__generator)(this,function(a){switch(a.label){case 0:if(n.emit("dispatch_start",t),i=Date.now(),!e.isEmpty())return[3,2];return[4,e.dispatchSingle(t)];case 1:return o=a.sent(),[3,4];case 2:return[4,e.dispatch(t)];case 3:o=a.sent(),a.label=4;case 4:var s,u;if(!(null==r?void 0:r.callback))return[3,6];return[4,(0,k.invokeCallback)(o,r.callback,(s=i,Math.max((null!=(u=r.timeout)?u:300)-(Date.now()-s),0)))];case 5:o=a.sent(),a.label=6;case 6:return(null==r?void 0:r.debug)&&o.flush(),[2,o]}})})}(n,this.queue,this,{callback:e,debug:this._debug,timeout:this.settings.timeout})]})})},n.prototype.addSourceMiddleware=function(e){return(0,f.__awaiter)(this,void 0,void 0,function(){var n=this;return(0,f.__generator)(this,function(r){switch(r.label){case 0:return[4,this.queue.criticalTasks.run(function(){return(0,f.__awaiter)(n,void 0,void 0,function(){var n,r,i;return(0,f.__generator)(this,function(o){switch(o.label){case 0:return[4,t.A(900047)];case 1:return n=o.sent().sourceMiddlewarePlugin,r={},this.queue.plugins.forEach(function(t){if("destination"===t.type)return r[t.name]=!0}),i=n(e,r),[4,this.register(i)];case 2:return o.sent(),[2]}})})})];case 1:return r.sent(),[2,this]}})})},n.prototype.addDestinationMiddleware=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.queue.plugins.filter(K).forEach(function(n){("*"===t||n.name.toLowerCase()===t.toLowerCase())&&n.addMiddleware.apply(n,e)}),Promise.resolve(this)},n.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},n.prototype.queryString=function(e){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(n){switch(n.label){case 0:if(!1===this.options.useQueryString)return[2,[]];return[4,t.A(691718)];case 1:return[2,(0,n.sent().queryString)(this,e)]}})})},n.prototype.use=function(t){return t(this),this},n.prototype.ready=function(t){return void 0===t&&(t=function(t){return t}),(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(e){return[2,Promise.all(this.queue.plugins.map(function(t){return t.ready?t.ready():Promise.resolve()})).then(function(e){return t(e),e})]})})},n.prototype.noConflict=function(){return console.warn(tR),(0,th.setGlobalAnalytics)(null!=tU?tU:this),this},n.prototype.normalize=function(t){return console.warn(tR),this.eventFactory.normalize(t)},Object.defineProperty(n.prototype,"failedInitializations",{get:function(){return console.warn(tR),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"VERSION",{get:function(){return tl.version},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,e){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(t){return console.warn(tR),[2,Promise.resolve(this)]})})},n.prototype.pageview=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(e){switch(e.label){case 0:return console.warn(tR),[4,this.page({path:t})];case 1:return e.sent(),[2,this]}})})},Object.defineProperty(n.prototype,"plugins",{get:function(){var t;return console.warn(tR),null!=(t=this._plugins)?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"Integrations",{get:function(){return console.warn(tR),this.queue.plugins.filter(function(t){return"destination"===t.type}).reduce(function(t,e){var n="".concat(e.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),r=window[n];if(!r)return t;var i=r.Integration;return i?t[e.name]=i:t[e.name]=r,t},{})},enumerable:!1,configurable:!0}),n.prototype.push=function(t){var e=t.shift();(!e||this[e])&&this[e].apply(this,t)},n}(A.Emitter),tK=function(t){function e(){var e=t.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return e.initialized=!0,e}return(0,f.__extends)(e,t),e}(tT),tq=t.i(802402),tz=t.i(522927),tB=t.i(957192),tW=function(t){try{var e=new URLSearchParams;return Object.entries(t).forEach(function(t){var n=t[0],r=t[1];Array.isArray(r)?r.forEach(function(t){return e.append(n,t)}):e.append(n,r)}),e.toString()}catch(t){return""}},tJ=new function(){var t=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(e,n){return(0,f.__awaiter)(t,void 0,void 0,function(){var t;return(0,f.__generator)(this,function(e){switch(e.label){case 0:this.instance=n,e.label=1;case 1:return e.trys.push([1,3,,4]),t=this,[4,function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var e;return(0,f.__generator)(this,function(n){return(e=navigator.userAgentData)?t?[2,e.getHighEntropyValues(t).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}(this.instance.options.highEntropyValuesClientHints)];case 2:return t.userAgentData=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(n){var r,i,o,a,s,u,c=n.event.context,l=c.page.search||"",d="object"==typeof l?tW(l):l;c.userAgent=navigator.userAgent,c.userAgentData=t.userAgentData;var h=navigator.userLanguage||navigator.language;void 0===c.locale&&void 0!==h&&(c.locale=h),null!=c.library||(c.library={name:"analytics.js",version:"".concat("web"===(0,tp.getVersionType)()?"next":"npm:next","-").concat(tl.version)}),d&&!c.campaign&&((r=d).startsWith("?")&&(r=r.substring(1)),c.campaign=(r=r.replace(/\?/g,"&")).split("&").reduce(function(t,e){var n=e.split("="),r=n[0],i=n[1];if(r.includes("utm_")&&r.length>4){var o=r.slice(4);"campaign"===o&&(o="name"),t[o]=(0,tB.gracefulDecodeURIComponent)(void 0===i?"":i)}return t},{}));var p=function(){var t=X.get("_ga");if(t&&t.startsWith("amp"))return t}();p&&(c.amp={id:p}),a=(o=new H(null!=(u=t.instance.options.disableClientPersistence)&&u?[]:[new te(function(){if(e)return e;var t=tt(window.location.href);return e={expires:31536e6,secure:!1,path:"/"},t&&(e.domain=t),e}())])).get("s:context.referrer"),(s=null!=(i=function(t){var e={btid:"dataxu",urid:"millennial-media"};t.startsWith("?")&&(t=t.substring(1));for(var n=(t=t.replace(/\?/g,"&")).split("&"),r=0;r<n.length;r++){var i=n[r].split("="),o=i[0],a=i[1];if(e[o])return{id:a,type:e[o]}}}(d))?i:a)&&(c&&(c.referrer=(0,f.__assign)((0,f.__assign)({},c.referrer),s)),o.set("s:context.referrer",s));try{c.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(t){}return n},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich},tQ=t.i(774230),tV=t.i(77923),tG=t.i(768222),tH=function(){function t(t,e){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=(0,tz.createDeferred)(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=e,this.name=t,this.type=e.type,this.alternativeNames.push(e.name)}return t.prototype.addMiddleware=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];"destination"===this.type&&(t=this.middleware).push.apply(t,e)},t.prototype.transform=function(t){return(0,f.__awaiter)(this,void 0,void 0,function(){var e;return(0,f.__generator)(this,function(n){switch(n.label){case 0:return[4,(0,tV.applyDestinationMiddleware)(this.name,t.event,this.middleware)];case 1:return null===(e=n.sent())&&t.cancel(new B.ContextCancelation({retry:!1,reason:"dropped by destination middleware"})),[2,new I.Context(e)]}})})},t.prototype._createMethod=function(t){var e=this;return function(n){return(0,f.__awaiter)(e,void 0,void 0,function(){var e,r;return(0,f.__generator)(this,function(i){switch(i.label){case 0:if(!this.action[t])return[2,n];if(e=n,"destination"!==this.type)return[3,2];return[4,this.transform(n)];case 1:e=i.sent(),i.label=2;case 2:return i.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!i.sent())throw Error("Something prevented the destination from getting ready");return(0,tG.recordIntegrationMetric)(n,{integrationName:this.action.name,methodName:t,type:"action"}),[4,this.action[t](e)];case 4:return i.sent(),[3,6];case 5:throw r=i.sent(),(0,tG.recordIntegrationMetric)(n,{integrationName:this.action.name,methodName:t,type:"action",didError:!0}),r;case 6:return[2,n]}})})}},t.prototype.isLoaded=function(){return this.action.isLoaded()},t.prototype.ready=function(){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}})})},t.prototype.load=function(t,e){return(0,f.__awaiter)(this,void 0,void 0,function(){var n,r,i,o;return(0,f.__generator)(this,function(a){switch(a.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];a.label=1;case 1:return a.trys.push([1,3,,4]),(0,tG.recordIntegrationMetric)(t,{integrationName:this.action.name,methodName:"load",type:"action"}),n=this.action.load(t,e),i=(r=this.loadPromise).resolve,[4,n];case 2:return i.apply(r,[a.sent()]),[2,n];case 3:throw o=a.sent(),(0,tG.recordIntegrationMetric)(t,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(o),o;case 4:return[2]}})})},t.prototype.unload=function(t,e){var n,r;return null==(r=(n=this.action).unload)?void 0:r.call(n,t,e)},t}(),t$=(0,td.getGlobal)(),tY=null!=(n=t$.__SEGMENT_INSPECTOR__)?n:t$.__SEGMENT_INSPECTOR__={},tZ=function(t){var e;return null==(e=tY.attach)?void 0:e.call(tY,t)},tX=t.i(259365),t0=function(){var t,e,n=null!=(t=window.location.hash)?t:"",r=null!=(e=window.location.search)?e:"";return r.length?r:n.replace(/(?=#).*(?=\?)/,"")},t1=function(e){function n(){var n=this,r=(0,tz.createDeferred)(),i=r.promise,o=r.resolve;return(n=e.call(this,function(e){return i.then(function(n){return function(e,n,r){var i,o,a,s,u,c,l,d,h;return void 0===n&&(n={}),(0,f.__awaiter)(this,void 0,void 0,function(){var p,_,y,m,b,w,k,A,E,C;return(0,f.__generator)(this,function(x){switch(x.label){case 0:if(!0===n.disable)return[2,[new tK,I.Context.system()]];if(n.globalAnalyticsKey&&(0,th.setGlobalAnalyticsKey)(n.globalAnalyticsKey),e.cdnURL&&(0,v.setGlobalCDNUrl)(e.cdnURL),n.initialPageview&&r.add(new tb("page",[])),p=t0(),_=null!=(i=e.cdnURL)?i:(0,v.getCDN)(),null==(o=e.cdnSettings))return[3,1];return m=o,[3,3];case 1:var O,M;return[4,(O=e.writeKey,M=_,(0,tA.fetch)("".concat(M,"/v1/projects/").concat(O,"/settings")).then(function(t){return t.ok?t.json():t.text().then(function(t){throw Error(t)})}).catch(function(t){throw console.error(t.message),t}))];case 2:m=x.sent(),x.label=3;case 3:if(y=m,n.updateCDNSettings&&(y=n.updateCDNSettings(y)),"function"!=typeof n.disable)return[3,5];return[4,n.disable(y)];case 4:if(x.sent())return[2,[new tK,I.Context.system()]];x.label=5;case 5:return b=null==(s=null==(a=y.integrations["Segment.io"])?void 0:a.retryQueue)||s,n=(0,f.__assign)({retryQueue:b},n),tZ(w=new tT((0,f.__assign)((0,f.__assign)({},e),{cdnSettings:y,cdnURL:_}),n)),k=null!=(u=e.plugins)?u:[],A=null!=(c=e.classicIntegrations)?c:[],E=null==(l=n.integrations)?void 0:l["Segment.io"],tX.Stats.initRemoteMetrics((0,f.__assign)((0,f.__assign)({},y.metrics),{host:null!=(d=null==E?void 0:E.apiHost)?d:null==(h=y.metrics)?void 0:h.host,protocol:null==E?void 0:E.protocol})),[4,function(e,n,r,i,o,a,s){var u,c,l;return void 0===o&&(o=[]),(0,f.__awaiter)(this,void 0,void 0,function(){var d,h,p,_,y,m,b,w,k,A,E,C,x,O,M=this;return(0,f.__generator)(this,function(j){var P,N,R;switch(j.label){case 0:if(tv(r,s),tg(r,s),d=null==o?void 0:o.filter(function(t){return"object"==typeof t}),h=null==o?void 0:o.filter(function(t){return"function"==typeof t&&"string"==typeof t.pluginName}),"test"===g().NODE_ENV||!((null!=(R=null==(N=null==(P=n.middlewareSettings)?void 0:P.routingRules)?void 0:N.length)?R:0)>0))return[3,2];return[4,t.A(991073).then(function(t){return t.tsubMiddleware(n.middlewareSettings.routingRules)})];case 1:return _=j.sent(),[3,3];case 2:_=void 0,j.label=3;case 3:if(p=_,("test"===g().NODE_ENV||!(Object.keys(n.integrations).length>1))&&!(a.length>0))return[3,5];return[4,t.A(878408).then(function(t){return t.ajsDestinations(e,n,r.integrations,i,p,a)})];case 4:return m=j.sent(),[3,6];case 5:m=[],j.label=6;case 6:if(y=m,!n.legacyVideoPluginsEnabled)return[3,8];return[4,t.A(406289).then(function(t){return t.loadLegacyVideoPlugins(r)})];case 7:j.sent(),j.label=8;case 8:if(!(null==(u=i.plan)?void 0:u.track))return[3,10];return[4,t.A(905141).then(function(t){var e;return t.schemaFilter(null==(e=i.plan)?void 0:e.track,n)})];case 9:return w=j.sent(),[3,11];case 10:w=void 0,j.label=11;case 11:return b=w,k=(0,tq.mergedOptions)(n,i),[4,(function(t,e,n,r,i,o){var a,s,u;return(0,f.__awaiter)(this,void 0,void 0,function(){var c,l,d=this;return(0,f.__generator)(this,function(h){switch(h.label){case 0:return c=[],l=null!=(s=null==(a=t.middlewareSettings)?void 0:a.routingRules)?s:[],[4,Promise.all((null!=(u=t.remotePlugins)?u:[]).map(function(t){return(0,f.__awaiter)(d,void 0,void 0,function(){var a,s,u,d,h,p;return(0,f.__generator)(this,function(g){switch(g.label){case 0:var _,y;if(_=e[t.creationName],y=e[t.name],!1===e.All&&!_&&!y||!1===_||!1===y||0)return[2];g.label=1;case 1:if(g.trys.push([1,6,,7]),s=null==o?void 0:o.find(function(e){return e.pluginName===t.name}))return[3,3];return[4,function(t,e){return(0,f.__awaiter)(this,void 0,void 0,function(){var n,r,i,o,a,s;return(0,f.__generator)(this,function(u){switch(u.label){case 0:if(u.trys.push([0,9,,10]),n=RegExp("https://cdn.segment.(com|build)"),r=(0,v.getCDN)(),!e)return[3,6];o=(i=t.url.split("/"))[i.length-2],a=t.url.replace(o,btoa(o).replace(/=/g,"")),u.label=1;case 1:return u.trys.push([1,3,,5]),[4,(0,tQ.loadScript)(a.replace(n,r))];case 2:case 4:return u.sent(),[3,5];case 3:return u.sent(),[4,(0,tQ.loadScript)(t.url.replace(n,r))];case 5:return[3,8];case 6:return[4,(0,tQ.loadScript)(t.url.replace(n,r))];case 7:u.sent(),u.label=8;case 8:if("function"==typeof window[t.libraryName])return[2,window[t.libraryName]];return[3,10];case 9:throw s=u.sent(),console.error("Failed to create PluginFactory",t),s;case 10:return[2]}})})}(t,null==r?void 0:r.obfuscate)];case 2:s=g.sent(),g.label=3;case 3:if(!(a=s))return[3,5];return u=n[t.name],[4,a((0,f.__assign)((0,f.__assign)({},t.settings),u))];case 4:!function(t){if(!Array.isArray(t))throw Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];t.forEach(function(t){e.forEach(function(e){var n;if(void 0===t[e])throw Error("Plugin: ".concat(null!=(n=t.name)?n:"unknown"," missing required function ").concat(e))})})}(h=Array.isArray(d=g.sent())?d:[d]),p=l.filter(function(e){return e.destinationName===t.creationName}),h.forEach(function(e){var n=new tH(t.creationName,e);p.length&&i&&n.addMiddleware(i),c.push(n)}),g.label=5;case 5:return[3,7];case 6:return console.warn("Failed to load Remote Plugin",g.sent()),[3,7];case 7:return[2]}})})}))];case 1:return h.sent(),[2,c.filter(Boolean)]}})})})(n,r.integrations,k,i,p,h).catch(function(){return[]})];case 12:if(A=j.sent(),E=(0,f.__spreadArray)((0,f.__spreadArray)([tJ],y,!0),A,!0),b&&E.push(b),(null==(c=i.integrations)?void 0:c.All)===!1&&!i.integrations["Segment.io"]||i.integrations&&!1===i.integrations["Segment.io"])return[3,14];return x=(C=E).push,[4,function(t,e,n){window.addEventListener("pagehide",function(){u.push.apply(u,Array.from(c)),c.clear()});var r,i,o,a,s=null!=(i=null==e?void 0:e.apiKey)?i:"",u=t.options.disableClientPersistence?new z.PriorityQueue(t.queue.queue.maxAttempts,[]):new q.PersistedPriorityQueue(t.queue.queue.maxAttempts,"".concat(s,":dest-Segment.io")),c=new Set,l=null!=(o=null==e?void 0:e.apiHost)?o:tP.SEGMENT_API_HOST,d=null!=(a=null==e?void 0:e.protocol)?a:"https",h="".concat(d,"://").concat(l),p=null==e?void 0:e.deliveryStrategy,g=p&&"strategy"in p&&"batching"===p.strategy?function(t,e){var n,r,i,o=[],a=!1,s=null!=(n=null==e?void 0:e.size)?n:10,u=null!=(r=null==e?void 0:e.timeout)?r:5e3,c=0;function l(n){if(0!==n.length){var r,i=null==(r=n[0])?void 0:r.writeKey,o=n.map(function(t){return t.sentAt,(0,f.__rest)(t,["sentAt"])});return(0,tA.fetch)("https://".concat(t,"/b"),{credentials:null==e?void 0:e.credentials,keepalive:(null==e?void 0:e.keepalive)||a,headers:tx(null==e?void 0:e.headers),method:"post",body:JSON.stringify({writeKey:i,batch:o,sentAt:new Date().toISOString()}),priority:null==e?void 0:e.priority}).then(function(t){var e;if(t.status>=500)throw Error("Bad response from server: ".concat(t.status));if(429===t.status){var n=null==(e=t.headers)?void 0:e.get("x-ratelimit-reset"),r="string"==typeof n?1e3*parseInt(n):u;throw new tC("Rate limit exceeded: ".concat(t.status),r)}})}}function d(t){var n;return void 0===t&&(t=1),(0,f.__awaiter)(this,void 0,void 0,function(){var r;return(0,f.__generator)(this,function(i){return o.length?(r=o,o=[],[2,null==(n=l(r))?void 0:n.catch(function(n){var i;I.Context.system().log("error","Error sending batch",n),t<=(null!=(i=null==e?void 0:e.maxRetries)?i:10)&&("RateLimitError"===n.name&&(c=n.retryTimeout),o.push.apply(o,r),o.map(function(e){"_metadata"in e&&(e._metadata=(0,f.__assign)((0,f.__assign)({},e._metadata),{retryCount:t}))}),h(t+1))})]):[2]})})}function h(t){void 0===t&&(t=1),i||(i=setTimeout(function(){i=void 0,d(t).catch(console.error)},c||u),c=0)}return tE(function(t){if((a=t)&&o.length){var e,n;Promise.all((e=[],n=0,o.forEach(function(t){tO(e[n])>=64&&n++,e[n]?e[n].push(t):e[n]=[t]}),e).map(l)).catch(console.error)}}),{dispatch:function(t,n){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(t){return o.push(n),[2,o.length>=s||tO(o)>=450||(null==e?void 0:e.keepalive)&&tO(o)>=54||a?d():h()]})})}}}(l,p.config):(r=null==p?void 0:p.config,{dispatch:function(t,e){return(0,tA.fetch)(t,{credentials:null==r?void 0:r.credentials,keepalive:null==r?void 0:r.keepalive,headers:tx(null==r?void 0:r.headers),method:"post",body:JSON.stringify(e),priority:null==r?void 0:r.priority}).then(function(t){var e;if(t.status>=500)throw Error("Bad response from server: ".concat(t.status));if(429===t.status){var n=null==(e=t.headers)?void 0:e.get("x-ratelimit-reset"),r=n?1e3*parseInt(n):5e3;throw new tC("Rate limit exceeded: ".concat(t.status),r)}})}});function v(r){return(0,f.__awaiter)(this,void 0,void 0,function(){var i,o;return(0,f.__generator)(this,function(a){var s,l,d,p,v,y;return(0,S.isOffline)()?(u.push(r),tj(!1,u,_,tj),[2,r]):(c.add(r),i=r.event.type.charAt(0),o=(0,tk.toFacade)(r.event).json(),"track"===r.event.type&&delete o.traits,"alias"===r.event.type&&(s=o,y=t.user(),s.previousId=null!=(p=null!=(d=null!=(l=s.previousId)?l:s.from)?d:y.id())?p:y.anonymousId(),s.userId=null!=(v=s.userId)?v:s.to,delete s.from,delete s.to,o=s),u.getAttempts(r)>=u.maxAttempts)?(c.delete(r),[2,r]):[2,g.dispatch("".concat(h,"/").concat(i),function(t,e,n,r,i){var o,a=t.user();delete e.options,e.writeKey=null==n?void 0:n.apiKey,e.userId=e.userId||a.id(),e.anonymousId=e.anonymousId||a.anonymousId(),e.sentAt=new Date;var s=t.queue.failedInitializations||[];s.length>0&&(e._metadata={failedInitializations:s}),null!=i&&(i.attempts>1&&(e._metadata=(0,f.__assign)((0,f.__assign)({},e._metadata),{retryCount:i.attempts})),i.attempts++);var u=[],c=[];for(var l in r){var d=r[l];"Segment.io"===l&&u.push(l),"bundled"===d.bundlingStatus&&u.push(l),"unbundled"===d.bundlingStatus&&c.push(l)}for(var h=0,p=(null==n?void 0:n.unbundledIntegrations)||[];h<p.length;h++){var g=p[h];c.includes(g)||c.push(g)}var v=null!=(o=null==n?void 0:n.maybeBundledConfigIds)?o:{},_=[];return u.sort().forEach(function(t){var e;(null!=(e=v[t])?e:[]).forEach(function(t){_.push(t)})}),(null==n?void 0:n.addBundledMetadata)!==!1&&(e._metadata=(0,f.__assign)((0,f.__assign)({},e._metadata),{bundled:u.sort(),unbundled:c.sort(),bundledIds:_})),e}(t,o,e,n,r)).then(function(){return r}).catch(function(t){if(r.log("error","Error sending event",t),"RateLimitError"===t.name){var e=t.retryTimeout;u.pushWithBackoff(r,e)}else u.pushWithBackoff(r);return tj(!1,u,_,tj),r}).finally(function(){c.delete(r)})]})})}var _={metadata:{writeKey:s,apiHost:l,protocol:d},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:v,identify:v,page:v,alias:v,group:v,screen:v};return u.todo&&tj(!1,u,_,tj),_}(r,k["Segment.io"],n.integrations)];case 13:x.apply(C,[j.sent()]),j.label=14;case 14:return[4,r.register.apply(r,(0,f.__spreadArray)((0,f.__spreadArray)([],E,!1),d,!1))];case 15:return O=j.sent(),[4,(0,f.__awaiter)(void 0,void 0,void 0,function(){var t,e;return(0,f.__generator)(this,function(n){switch(n.label){case 0:t=0,e=s.getAndRemove("register"),n.label=1;case 1:if(!(t<e.length))return[3,4];return[4,tS(r,e[t]).catch(console.error)];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}})})];case 16:if(j.sent(),!Object.entries(null!=(l=n.enabledMiddleware)?l:{}).some(function(t){return t[1]}))return[3,18];return[4,t.A(144136).then(function(t){var e=t.remoteMiddlewares;return(0,f.__awaiter)(M,void 0,void 0,function(){return(0,f.__generator)(this,function(t){switch(t.label){case 0:return[4,e(O,n,i.obfuscate)];case 1:return[2,Promise.all(t.sent().map(function(t){return r.addSourceMiddleware(t)}))]}})})})];case 17:j.sent(),j.label=18;case 18:return[4,(0,f.__awaiter)(void 0,void 0,void 0,function(){var t,e;return(0,f.__generator)(this,function(n){switch(n.label){case 0:t=0,e=s.getAndRemove("addSourceMiddleware"),n.label=1;case 1:if(!(t<e.length))return[3,4];return[4,tS(r,e[t]).catch(console.error)];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}})})];case 19:return j.sent(),[2,O]}})})}(e.writeKey,y,w,n,k,A,r)];case 6:return C=x.sent(),w.initialized=!0,w.emit("initialize",e,n),[4,function(t,e,n){return(0,f.__awaiter)(this,void 0,void 0,function(){return(0,f.__generator)(this,function(r){switch(r.label){case 0:var i,o;return[4,(i=t,o=e,(0,f.__awaiter)(void 0,void 0,void 0,function(){return(0,f.__generator)(this,function(t){switch(t.label){case 0:if(!o.includes("ajs_"))return[3,2];return[4,i.queryString(o).catch(console.error)];case 1:t.sent(),t.label=2;case 2:return[2]}})}))];case 1:return r.sent(),t_(t,n),[2]}})})}(w,p,r)];case 7:return x.sent(),[2,[w,C]]}})})}(n[0],n[1],e)})})||this)._resolveLoadStart=function(t,e){return o([t,e])},n}return(0,f.__extends)(n,e),n.prototype.load=function(t,e){return void 0===e&&(e={}),this._resolveLoadStart(t,e),this},n.load=function(t,e){return void 0===e&&(e={}),new n().load(t,e)},n.standalone=function(t,e){return n.load({writeKey:t},e).then(function(t){return t[0]})},n}(tI),t2=t.i(731086),t4=t.i(104477),t3=t.i(683471),t5=t.i(184260),t7=t.i(964335);let t6=(0,t7.createServerReference)("4020c5570aa733b6427123619b1b38dbad985b91b8",t7.callServer,void 0,t7.findSourceMapURL,"trackSignUpConversion"),t8="clerk-last-user-sign-up",t9="clerk-last-session-sign-in",et=({identify:t,track:e,reset:n})=>{let{isLoaded:r,isSignedIn:i,user:o}=(0,p.useUser)(),{isLoaded:a,session:s}=(0,p.useSession)(),{hasSignedUp:u,updateSignUp:c,hasSignedIn:d,updateSignIn:h,clearTracking:f}={hasSignedIn:t=>t===localStorage.getItem(t9),updateSignIn:t=>{localStorage.setItem(t9,t)},hasSignedUp:t=>t===localStorage.getItem(t8),updateSignUp:t=>{localStorage.setItem(t8,t)},clearTracking:()=>{localStorage.removeItem(t9)}},g=t5.default.useRef(void 0);return t5.default.useEffect(()=>{let p=g.current,v=r&&!i&&null==o;if(!0===p&&v){try{n()}catch(t){}l.default.reset(!0),f()}if(r&&(g.current=i),!r||!i||!a||null==s)return;try{l.default.get_distinct_id()!==o.id&&o.id&&l.default.identify(o.id,{id:o.id,firstName:o.firstName,lastName:o.lastName,email:o.primaryEmailAddress?.emailAddress,avatar:o.imageUrl,createdAt:o.createdAt?.toISOString()})}catch(t){console.warn("PostHog identify failed:",t)}if(Math.abs(Date.now()-s.createdAt.getTime())>=6e4)return;let _=u(o.id),y=d(s.id),m=Math.abs(s.createdAt.getTime()-(s.user.createdAt?.getTime()??0));if(y||t(o.id,{id:o.id,firstName:o.firstName,lastName:o.lastName,email:o.primaryEmailAddress?.emailAddress,avatar:o.imageUrl,createdAt:o.createdAt?.toISOString()}),m<=2e3){if(_)return;c(o.id);let t=s.user.externalAccounts,n=0===t.length?"Email":t[0].provider;e("Dashboard_Authentication_Customer Created",{surface:"Dashboard",location:"Authentication",signedUpWith:n}),l.default.capture("Dashboard Sign Up",{signedUpWith:n}),t6({id:o.id}).catch(console.error)}else{if(y)return;h(s.id),e("Dashboard_Authentication_Customer Signed In",{surface:"Dashboard",location:"Authentication"}),l.default.capture("Dashboard Sign In")}},[r,i,a,o,s,t,e,u,d,c,h,f,n]),null};function ee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var en=function t(e,n){function r(t,r,i){if("u">typeof document){"number"==typeof(i=ee({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in i)i[a]&&(o+="; "+a,!0!==i[a]&&(o+="="+i[a].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+o}}return Object.create({set:r,get:function(t){if("u">typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),a=o.slice(1).join("=");try{var s=decodeURIComponent(o[0]);if(r[s]=e.read(a,s),t===s)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){r(t,"",ee({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,ee({},this.attributes,e))},withConverter:function(e){return t(ee({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function er(t){let e,n,r=(0,o.c)(5),{page:i}=t,a=(0,t3.usePathname)(),s=(0,t3.useSearchParams)(),u=(0,t5.useRef)(null);return r[0]!==i||r[1]!==a||r[2]!==s?(e=()=>{let t=s?.get("gclid");t&&en.set("gclid",t,{path:"/",sameSite:"Lax",domain:function(t){let e=function(t){try{return new URL(t)}catch{return}}(t);if(!e)return;let n=function(t){let e=t.hostname.split("."),n=e[e.length-1],r=[];if(4===e.length&&parseInt(n,10)>0||e.length<=1)return r;for(let t=e.length-2;t>=0;--t)r.push(e.slice(t).join("."));return r}(e);for(let t=0;t<n.length;++t){let e="__tld__",r=n[t],i={domain:"."+r};try{if(en.set(e,"1",i),en.get(e))return en.remove(e,i),r}catch(t){return}}}(window.location.href),expires:30});let e=a.replace(/\/app_\w+/,"").replace(/\/ins_\w+/,"");u.current!==e&&(i(e),u.current=e)},n=[a,s,i],r[0]=i,r[1]=a,r[2]=s,r[3]=e,r[4]=n):(e=r[3],n=r[4]),(0,t5.useEffect)(e,n),null}let ei=()=>{},eo=t5.default.createContext({page:ei,track:ei,identify:ei,reset:ei}),ea=()=>t5.default.useContext(eo);function es(){let t,e,n,r=(0,o.c)(9),{page:a,identify:s,track:u,reset:c}=ea();return r[0]!==a?(t=(0,i.jsx)(er,{page:a}),r[0]=a,r[1]=t):t=r[1],r[2]!==s||r[3]!==c||r[4]!==u?(e=(0,i.jsx)(et,{identify:s,track:u,reset:c}),r[2]=s,r[3]=c,r[4]=u,r[5]=e):e=r[5],r[6]!==t||r[7]!==e?(n=(0,i.jsxs)(i.Fragment,{children:[t,e]}),r[6]=t,r[7]=e,r[8]=n):n=r[8],n}t.s(["AnalyticsProvider",0,({children:t})=>{let e=(0,t3.useParams)(),{sessionId:n,orgId:r,getToken:o}=(0,h.useAuth)(),{data:a}=(0,t4.useQuery)({enabled:!!(n&&e.applicationId&&e.instanceId),...(0,u.applicationsQuery)(n,r,{getToken:o}),select:t=>{if(!e.applicationId||!e.instanceId)return;let n=(0,d.findApplication)(t,e.applicationId),r=n?(0,d.findInstance)(n,e.instanceId):void 0;return{application:n,instance:r}}}),f=a?.application,g=a?.instance,{organization:v,isLoaded:_}=(0,p.useOrganization)(),y=v?.id,[m,b]=t5.default.useState(void 0),w=(0,t3.usePathname)(),S=t5.default.useRef(null),I=!!(e?.applicationId&&e?.instanceId);t5.default.useEffect(()=>{let t=t1.load({writeKey:"MRFgn99EJ1xDOpGThyszNFjaYi5vd3pj",cdnURL:"https://scdn.clerk.com"},{integrations:{"Segment.io":{apiHost:"segapi.clerk.com/v1",protocol:"https"}}});t.addSourceMiddleware(({payload:t,next:e})=>{let n=document.cookie.match("(^|;)\\s*gclid\\s*=\\s*([^;]+)")?.pop()||"";n&&(t.obj.properties={gclid:n,...t.obj.properties}),e(t)}),b(t)},[]);let k=t5.default.useMemo(()=>{if(!m)return{page:ei,track:ei,identify:ei,reset:ei};let t={...e?.applicationId?{applicationId:e.applicationId}:{},...e?.instanceId?{instanceId:e.instanceId}:{},...g?.environment_type?{environmentType:g?.environment_type}:{},...y?{$groups:{org:y}}:{}};return{page:(t,e,n)=>m.page(t,e,{...n,...y?{$groups:{org:y}}:{}}),track:async(e,n)=>{try{return await m.track(e,{...t,...n})}catch(r){t2.captureException(r,{tags:{manualSource:"analytics:track"},extra:{eventName:e,defaultTrackProperties:JSON.stringify(t,c()),properties:JSON.stringify(n,c())}})}},identify:async(t,e)=>{try{return await m.identify(t,{...e,...y?{$groups:{org:y}}:{}})}catch(t){t2.captureException(t,{tags:{manualSource:"analytics:identify"},extra:{traits:JSON.stringify(e,c()),groups:y?{org:JSON.stringify(y,c())}:void 0}})}},reset:()=>{m.reset?.()}}},[m,g?.environment_type,e,y]);return t5.default.useEffect(()=>{try{!function(t){let{organization:e,application:n,instance:r}=t;l.default.resetGroups(),e?.id&&l.default.group("org",e.id,{name:e.name??"Workspace",createdAt:e.createdAt?.toUTCString(),slug:e.slug}),n?.id&&l.default.group("application",n.id,{name:n.name??"Application",createdAt:n.created_at?new Date(n.created_at).toUTCString():void 0,organizationId:e?.id}),r?.id&&l.default.group("instance",r.id,{name:r.environment_type??"Instance",createdAt:r.created_at?new Date(r.created_at).toUTCString():void 0,environmentType:r.environment_type,applicationId:r.application_id,organizationId:e?.id})}({organization:v??null,application:f??null,instance:g??null})}catch(t){t2.captureException(t,{tags:{section:"analytics-provider",function:"posthog-register"}})}},[v?.id,f?.id,g?.id]),t5.default.useEffect(()=>{try{if(I&&(!f?.id||!g?.id)||!w||!_&&!s(w)||S.current?.pathname===w&&S.current?.orgId===v?.id)return;S.current?.pathname===w&&S.current?.orgId!==void 0&&S.current?.orgId!==v?.id&&S.current&&l.default.capture("organization_switched",{from_org_id:S.current.orgId,to_org_id:v?.id,pathname:w}),l.default.capture("$pageview"),S.current={pathname:w,orgId:v?.id}}catch(t){t2.captureException(t,{tags:{section:"analytics-provider",function:"posthog-pageview"},extra:{pathname:w,orgId:v?.id,applicationId:f?.id,instanceId:g?.id}})}},[w,I,_,v?.id,f?.id,g?.id]),(0,i.jsxs)(eo.Provider,{value:k,children:[t,m&&(0,i.jsx)(es,{})]})},"useAnalytics",0,ea],238750)}]);