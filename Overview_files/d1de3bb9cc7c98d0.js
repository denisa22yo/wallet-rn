(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,497288,60229,893018,580539,943908,976952,e=>{"use strict";var t=e.i(73677),a=e.i(589992),n=e.i(50102),r=e.i(550190),i=e.i(271444),l=e.i(826648),s=e.i(56829),c=e.i(819970);let o={src:e.i(697266).default,width:160,height:160,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAxElEQVR42k2NOwrCQBRFZy02YiMmE80k0WRG0fiNKKLgD4v4KVyB2AmCpHEL2eV017yx0OLAffdceKxSqeaeL7UfKPzj+UqTY64IdcMN0e4MMRovDJSpI8coRDJG3E8wmy8NlCPZNyNWb7TQ7U1gcxdpei64gHNhOnLMqTeh2gNwR+DxeCLL3lhvUkyS5XfAnQBBs2P+brYHHE9X3O4v7PYXCE+CWbanC4pDIYxiSDVAMl3BsgWhWalUzmuWMKMfAtSR+wDbVXB1LQ548QAAAABJRU5ErkJggg=="},d={src:e.i(979541).default,width:168,height:168,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAuklEQVR42k2PywqCUBRF/VSHRUgfVCONptKgqZEQCA5KVAwzH5FQIubzFjbYdZSkwYbN2ovLudxkMuVt+2gEwSX8j2U5xngs8ByVtn2DsRfKsu5CnZhpOgZHNmNPFEWFJEm7UCdGWycQaBoGZaNCUbZdJzYIeV4iyx4QxSVmcwmmdUIc3+H7US/UNfuCG1R1B1leQ1qsoGl7uO45HI4kKU0zRNEVun5AVdX9kaORwJP0+x4963lhSCNtH5Dm3DkxoVUNAAAAAElFTkSuQmCC"},u={src:e.i(350860).default,width:160,height:160,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA4ElEQVR42iWOS46CUBBF32K6Jx0nnfaH7aMBQURpf8SBaDSSPDQqfmKiMdGZa9CJE7bgxK292ZXCwUlu6txUFctkvmNNr0m71oRluXD/PXS7fXieL3+yxZiVeUWaibDtJgbDANfbHaOxgG44UBRNMq5acJw2qBSGSzweTwixgFLSUCj+gTZApVK9g0kwhwgjNFwPpV8D5Bi1iOlsh2h1TJkv9qiYDXBugmVzZVTtFtabEw6HS8pme06e7SFfUMFyeS59XyAIouTEG8r+QIAc+/j8iq1qSxpGHZrupFCmGbkXOtB691cbaO4AAAAASUVORK5CYII="},m={src:e.i(702663).default,width:168,height:168,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAzElEQVR42k2OP6vCQBDE76PaCPLggeX7UE8bbW0MRKJX3BIS47+7NRBFwcKYeGoz3p2NxcDu/IbZFd3uTyeOJRHlrFTOWbbmNC04ihLyTCwWiuq6we3WIk2XGA7HqKpj2IkyErsdc9ta3O8WUir0+39IEglrHzCmZKF1yc/nC01jUR3OWK00TqcLfOtmY9g17EPA8AHTSAZpXYVAUWw/DXXdIl8axDMV5OerC3gm3GO0L49I5uRuq4/c7D3PRK/325lMIvofjPhb3vPsDWAo1fgAVNTdAAAAAElFTkSuQmCC"};var h=e.i(91381);let p="hobby_2025_08",f="pro_2025_08",x="business_2025_08",y="b2b_saas_2025_08",g="administration_2025_08",b={[p]:{id:p,name:"Hobby",icon:i.DotOneIcon,features:{title:"Includes:",items:["50,000 monthly retained users free","100 monthly retained organizations free",a.FREE_SOCIAL_CONNECTION,"5 user impersonations per month","Prebuilt UI components"]},downgradeFeatures:[],highlighted:!1,isFree:!0},[f]:{id:f,name:"Pro",icon:l.DotThreeIcon,features:{title:"Everything in Hobby, plus:",items:["Multi-factor authentication (MFA)","Unlimited SSO and enterprise connections","Custom session lifetime","Satellite domains ($10/mo per domain)",a.REMOVE_CLERK_BRANDING]},downgradeFeatures:[{beforeText:"Unlimited users above 50,000",afterText:"Limit of 50,000 users",afterIcon:s.ExclamationOctagonIcon,afterTextStrikethrough:!1,featureImportance:"critical"},{beforeText:"Custom branded components",afterText:"Clerk branded components",afterIcon:n.ArrowDotsIcon,afterTextStrikethrough:!1,featureImportance:"medium"},{beforeText:a.MULTI_FACTOR_AUTH,afterText:a.MULTI_FACTOR_AUTH,afterIcon:c.XIcon,afterTextStrikethrough:!0,featureImportance:"high"},{beforeText:a.CUSTOM_SESSION_DURATIONS,afterText:a.CUSTOM_SESSION_DURATIONS,afterIcon:c.XIcon,afterTextStrikethrough:!0,featureImportance:"low"},{beforeText:"Satellite domains",afterText:"Satellite domains",afterIcon:c.XIcon,afterTextStrikethrough:!0,featureImportance:"medium"}],highlighted:!0},[x]:{id:x,name:"Business",highlighted:!1,icon:r.DotFiveIcon,features:{title:"Everything in Pro, plus:",items:["Unlimited additional seats","Enhanced dashboard roles","SOC2 Report & HIPAA compliance","Priority support"]},downgradeFeatures:[{beforeText:"Unlimited additional seats",afterText:"Limit of 3 seats",afterIcon:s.ExclamationOctagonIcon,afterTextStrikethrough:!1,featureImportance:"critical"},{beforeText:"Enhanced dashboard roles",afterText:"Enhanced dashboard roles",afterIcon:c.XIcon,afterTextStrikethrough:!0,featureImportance:"medium"},{beforeText:"SOC2 & HIPAA security",afterText:"SOC2 & HIPAA security",afterIcon:c.XIcon,afterTextStrikethrough:!0,featureImportance:"low"},{beforeText:"Priority support",afterText:"Priority support",afterIcon:c.XIcon,afterTextStrikethrough:!0,featureImportance:"low"}]}},j={[y]:{id:y,name:"B2B Authentication",icon:()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.default,{src:m,alt:"B2B Authentication",width:40,height:40,className:"dark:hidden"}),(0,t.jsx)(h.default,{src:u,alt:"B2B Authentication",width:40,height:40,className:"hidden dark:block"})]}),description:"The easy solution to multi-tenancy with a full suite of B2B SaaS features",features:{title:"Included features",items:["100 MRO limit","Organization components","Up to 5 members per organization","Invitation flows and basic roles"]},enhancedFeatures:{title:"Enhanced features",items:["100 included + $1-$0.60 /ea","Link enterprise connections","Unlimited members per organization","Verified domains","Custom Roles & Rolesets"]},downgradeFeatures:[{beforeText:"Unlimited orgs above 100",afterText:"Limit of 100 orgs",afterIcon:s.ExclamationOctagonIcon,afterTextStrikethrough:!1,featureImportance:"critical"},{beforeText:"Enterprise connections",afterText:"Enterprise connections",afterIcon:c.XIcon,afterTextStrikethrough:!0,featureImportance:"medium"},{beforeText:"Force multi-factor auth",afterText:"Force multi-factor auth",afterIcon:c.XIcon,afterTextStrikethrough:!0,featureImportance:"low"}]},[g]:{id:g,name:"Administration",icon:()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.default,{src:d,alt:"Administration",width:40,height:40,className:"dark:hidden"}),(0,t.jsx)(h.default,{src:o,alt:"Administration",width:40,height:40,className:"hidden dark:block"})]}),description:"Advanced user management and administrative capabilities for larger teams",features:{title:"Included features",items:["5 impersonations per month"]},enhancedFeatures:{title:"Enhanced features",items:["Unlimited impersonations"]},downgradeFeatures:[{beforeText:"Unlimited impersonations",afterText:"Limit of 5 impersonations/mo",afterIcon:s.ExclamationOctagonIcon,afterTextStrikethrough:!1,featureImportance:"critical"}]}},v=(e,t)=>{if(!e)return t?{...t}:void 0;let a=t??{id:e.id,name:e.name,icon:null,features:{title:"",items:e.features},downgradeFeatures:[]};return e.enterprise&&(a.name="Enterprise"),{...a,id:e.id,prices:{month:e.base_amount_monthly,yearPerMonth:e.base_amount_yearly_per_month,yearDiscount:e.discount_percentage,year:e.base_amount_yearly},seats:e.included_seats??1,additionalSeatsAmount:e.additional_seats_amount,addons:e.addons,isAddon:e.is_addon,action:e.action,enterpriseInfo:e.enterprise}};e.s(["PRICING_ADMINISTRATION_ADDON_ID",0,g,"PRICING_B2B_AUTHENTICATION_ADDON_ID",0,y,"PRICING_BUSINESS_PLAN_ID",0,x,"PRICING_HOBBY_PLAN_ID",0,p,"PRICING_PRO_PLAN_ID",0,f,"getStaticAddOnNameById",0,e=>{if(e)return j[e]?.name},"getStaticPlanNameById",0,e=>{if(e)return b[e]?.name},"getStaticPlanOrAddOnDowngradeFeatures",0,e=>e&&(b[e]?.downgradeFeatures||j[e]?.downgradeFeatures)||[],"populateAddOns",0,e=>Object.values(j).map(t=>({...v(e?.filter(e=>e.is_addon)?.find(e=>e.id===t.id),t),isAddon:!0})).filter(Boolean),"populatePlans",0,e=>e?.filter(e=>!e.is_addon)?.map(e=>{let t=b[e.id];return v(e,t)}).filter(Boolean)],497288),e.s(["AddOnModal",()=>H],60229);var w=e.i(224037),S=e.i(70038),N=e.i(109821),_=e.i(758040),A=e.i(419551),P=e.i(438439),C=e.i(104477),I=e.i(237206),k=e.i(238750),O=e.i(742890),D=e.i(988456),B=e.i(275630),E=e.i(788884),T=e.i(521322),F=e.i(247854),R=e.i(485596),U=e.i(965055),Q=e.i(4078),L=e.i(927800);function M(e){let a,n,r,i,l,s,c,o,d,u,m,h,p,f,x,y,g,b,j,v,w,N,_,A,P,C,I,k=(0,T.c)(81),{variant:O,addOn:D,onToggle:B,onAddToPlan:E,isDisabled:Q,isPending:M,isEnabled:Y}=e,H=void 0!==Q&&Q,G=void 0!==M&&M,V=void 0!==Y&&Y,{name:W,icon:$,title:X,price:Z,interval:J,includedInPlanFeatures:ee,enhancedAddOnFeatures:et,description:ea}=D,en="modal"===(void 0===O?"selection":O),er=et&&et.items.length>0,ei=V?"highlight":"default",el=en?"flex-col":"flex-col justify-between self-stretch lg:flex-row lg:items-center";k[0]!==el?(a=(0,L.cx)("flex h-full gap-4",el),k[0]=el,k[1]=a):a=k[1];let es=en?"flex-row":"flex-col self-stretch lg:max-w-64";k[2]!==es?(n=(0,L.cx)("flex gap-4 p-4",es),k[2]=es,k[3]=n):n=k[3];let ec=en?"":"items-center";k[4]!==ec?(r=(0,L.cx)("flex gap-4 bg-ceramic-white dark:bg-ceramic-gray-1400",ec),k[4]=ec,k[5]=r):r=k[5],k[6]!==$||k[7]!==en?(i="function"==typeof $?(0,t.jsx)($,{className:(0,L.cx)("text-ceramic-blue-500",en?"size-6":"size-10")}):$,k[6]=$,k[7]=en,k[8]=i):i=k[8],k[9]!==i?(l=(0,t.jsx)("div",{className:"rounded-md [filter:drop-shadow(0_1px_1px_rgba(0,0,0,0.05))_drop-shadow(0_0_0_rgba(34,42,53,0.05))_drop-shadow(0_4px_6px_rgba(34,42,53,0.04))_drop-shadow(0_24px_68px_rgba(47,48,55,0.05))_drop-shadow(0_2px_3px_rgba(0,0,0,0.04))]",children:i}),k[9]=i,k[10]=l):l=k[10],k[11]!==en||k[12]!==X?(s=!en&&(0,t.jsx)("div",{className:"flex items-baseline gap-0.5",children:X}),k[11]=en,k[12]=X,k[13]=s):s=k[13],k[14]!==r||k[15]!==l||k[16]!==s?(c=(0,t.jsxs)("div",{className:r,children:[l,s]}),k[14]=r,k[15]=l,k[16]=s,k[17]=c):c=k[17];let eo=en?"w-full items-center":"flex-col gap-1";k[18]!==eo?(o=(0,L.cx)("flex gap-1",eo),k[18]=eo,k[19]=o):o=k[19];let ed=en?"justify-between":"";k[20]!==ed?(d=(0,L.cx)("flex w-full items-center gap-2 text-ceramic-label-2 text-ceramic-primary",ed),k[20]=ed,k[21]=d):d=k[21],k[22]!==W?(u=(0,t.jsx)("span",{className:"w-min text-nowrap",children:W}),k[22]=W,k[23]=u):u=k[23],k[24]!==J||k[25]!==en||k[26]!==Z?(m=en?(0,t.jsxs)("div",{className:"flex flex-col items-end",children:[(0,t.jsxs)("span",{className:"text-ceramic-label-2 text-ceramic-primary",children:[Z,(0,t.jsx)("span",{className:"text-ceramic-label-3 text-ceramic-secondary",children:"/mo"})]}),(0,t.jsxs)("span",{className:"text-ceramic-body-3 text-ceramic-secondary",children:["billed ","year"===J?"annually":"monthly"]})]}):(0,t.jsx)(F.Badge,{variant:"dashed",children:"Add-on"}),k[24]=J,k[25]=en,k[26]=Z,k[27]=m):m=k[27],k[28]!==d||k[29]!==u||k[30]!==m?(h=(0,t.jsxs)("div",{className:d,children:[u,m]}),k[28]=d,k[29]=u,k[30]=m,k[31]=h):h=k[31],k[32]!==ea||k[33]!==en?(p=!en&&(0,t.jsx)("div",{className:"text-ceramic-body-3 text-ceramic-secondary",children:ea}),k[32]=ea,k[33]=en,k[34]=p):p=k[34],k[35]!==o||k[36]!==h||k[37]!==p?(f=(0,t.jsxs)("div",{className:o,children:[h,p]}),k[35]=o,k[36]=h,k[37]=p,k[38]=f):f=k[38],k[39]!==c||k[40]!==f||k[41]!==n?(x=(0,t.jsxs)("div",{className:n,children:[c,f]}),k[39]=c,k[40]=f,k[41]=n,k[42]=x):x=k[42],k[43]!==en?(y=(0,t.jsx)(q,{isModal:en}),k[43]=en,k[44]=y):y=k[44];let eu=en?"grid-cols-1":"lg:grid-cols-5";k[45]!==eu?(g=(0,L.cx)("grid w-full self-stretch",eu),k[45]=eu,k[46]=g):g=k[46];let em=en?"flex-col p-4":"flex-row px-6 py-4",eh=er?"col-span-2":"col-span-5";return k[47]!==em||k[48]!==eh?(b=(0,L.cx)("flex flex-col items-start gap-3 self-stretch",em,eh),k[47]=em,k[48]=eh,k[49]=b):b=k[49],k[50]===Symbol.for("react.memo_cache_sentinel")?(j=(0,t.jsx)(F.Badge,{variant:"secondary",children:"Included in your plan"}),v=(0,L.cx)("flex flex-col gap-x-4 gap-y-2 text-ceramic-body-3 text-ceramic-secondary"),k[50]=j,k[51]=v):(j=k[50],v=k[51]),k[52]!==ee.items?(w=ee.items.map(K),k[52]=ee.items,k[53]=w):w=k[53],k[54]!==w?(N=(0,t.jsx)("ul",{className:v,children:w}),k[54]=w,k[55]=N):N=k[55],k[56]!==b||k[57]!==N?(_=(0,t.jsxs)("div",{className:b,children:[j,N]}),k[56]=b,k[57]=N,k[58]=_):_=k[58],k[59]!==et||k[60]!==er||k[61]!==H||k[62]!==V||k[63]!==en||k[64]!==G||k[65]!==W||k[66]!==E||k[67]!==B?(A=et?(0,t.jsxs)("div",{className:(0,L.cx)("flex flex-grow items-start justify-between gap-6 self-stretch rounded-md bg-purple/4",en?"flex-col p-4":"flex-grow flex-col px-6 py-4 lg:flex-row",er?"col-span-3":"col-span-2"),children:[(0,t.jsxs)("div",{className:"flex flex-col items-start gap-3",children:[(0,t.jsx)(F.Badge,{variant:"primary",children:"Enhanced add-on"}),(0,t.jsx)("ul",{className:(0,L.cx)("flex flex-col gap-x-4 gap-y-2 text-ceramic-body-3 text-ceramic-secondary"),children:et.items.map(z)})]}),(0,t.jsx)("div",{className:(0,L.cx)("flex lg:items-center lg:self-center",en?"w-full flex-col":"flex-row"),children:en?(0,t.jsx)(S.Button,{variant:"primary",className:"flex w-full justify-center",onPress:E,isPending:G,isDisabled:H,children:(0,t.jsx)("span",{children:"Add to plan"})}):(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-ceramic-label-3 text-ceramic-secondary",children:"Add to plan"}),(0,t.jsx)(U.Switch,{isSelected:V,onChange:B,size:"lg",isDisabled:H,"data-testid":`Add ${W}`})]})})]}):(0,t.jsx)("div",{className:"flex flex-grow items-start justify-between gap-6 self-stretch"}),k[59]=et,k[60]=er,k[61]=H,k[62]=V,k[63]=en,k[64]=G,k[65]=W,k[66]=E,k[67]=B,k[68]=A):A=k[68],k[69]!==g||k[70]!==_||k[71]!==A?(P=(0,t.jsxs)("div",{className:g,children:[_,A]}),k[69]=g,k[70]=_,k[71]=A,k[72]=P):P=k[72],k[73]!==x||k[74]!==y||k[75]!==P||k[76]!==a?(C=(0,t.jsxs)("div",{className:a,children:[x,y,P]}),k[73]=x,k[74]=y,k[75]=P,k[76]=a,k[77]=C):C=k[77],k[78]!==C||k[79]!==ei?(I=(0,t.jsx)(R.ActionCard,{variant:"info",children:(0,t.jsx)(R.CardBody,{className:"p-1",variant:ei,children:C})}),k[78]=C,k[79]=ei,k[80]=I):I=k[80],I}function z(e,a){return(0,t.jsxs)("li",{className:"flex justify-start gap-x-1.5",children:[(0,t.jsx)(Q.CheckmarkCircleIcon,{className:"size-4 text-ceramic-secondary","aria-hidden":"true"}),(0,t.jsx)("span",{children:e})]},a)}function K(e,a){return(0,t.jsxs)("li",{className:"flex justify-start gap-x-1.5",children:[(0,t.jsx)(Q.CheckmarkCircleIcon,{className:"size-4 text-ceramic-secondary","aria-hidden":"true"}),(0,t.jsx)("span",{children:e})]},a)}let q=e=>{let a,n,r=(0,T.c)(4),{isModal:i}=e,l=i?"h-px w-full border-t px-20":"h-px w-full border-t lg:h-auto lg:w-px lg:self-stretch lg:border-l lg:border-t-0";return r[0]!==l?(a=(0,L.cx)("flex-shrink-0 border-dashed border-ceramic-gray/40",l),r[0]=l,r[1]=a):a=r[1],r[2]!==a?(n=(0,t.jsx)("div",{className:a}),r[2]=a,r[3]=n):n=r[3],n};var Y=e.i(475609);function H({isOpen:e,onClose:a,onComplete:n,addOn:r}){let{getToken:i}=(0,_.useAuth)(),{organization:l}=(0,A.useOrganization)(),{currentSubscription:s}=(0,Y.useNewPricing)(),o=(0,I.useQueryClient)(),{track:d}=(0,k.useAnalytics)(),{data:u,isLoading:m}=(0,C.useQuery)({...(0,w.previewSubscriptionChangeQuery)(l?.id??"",{target_id:r?.id??"",action:"add_addon"},{getToken:i}),enabled:!!l?.id&&!!r?.id}),{mutateAsync:h,isPending:p}=(0,P.useMutation)({mutationFn:({addOnId:e,organizationId:t})=>(0,w.currentSubscriptionAddAddon)(t,e,{getToken:i}),onSuccess:async()=>{try{let e="Dashboard_Billing Screen_Plan Purchase_Addon";d(e,{id:r?.id}),E.default.capture(e,{id:r?.id})}catch{}await Promise.all([o.invalidateQueries({queryKey:["pricingCurrentSubscription"]}),o.invalidateQueries({queryKey:["currentSubscriptionExpanded"]}),o.invalidateQueries({queryKey:["previewSubscriptionChange"]}),o.invalidateQueries({queryKey:["instance"]}),o.invalidateQueries({queryKey:["userSettings"]})]),n(),o.removeQueries({queryKey:["previewSubscriptionChange"]})},onError:()=>{a(),B.toast.error("Failed to add add-on to plan")}});if(!r)return null;let f=s.data?.interval==="year"?`${(0,O.formatCentsToCurrency)(r.prices?.yearPerMonth??0,{minimumFractionDigits:0})}`:`${(0,O.formatCentsToCurrency)(r.prices?.month??0,{minimumFractionDigits:0})}`;return(0,t.jsx)(N.Dialog,{isOpen:e,onClose:a,size:"sm",children:(0,t.jsxs)(N.DialogContent,{children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)(N.DialogHeader,{title:`Add ${r.name}`,description:"This feature will be available to all apps in your workspace"}),(0,t.jsx)("div",{className:"mx-5 my-5",children:(0,t.jsx)(S.Button,{variant:"secondary",size:"sm",emphasis:"low",onPress:a,icon:c.XIcon})})]}),(0,t.jsx)(N.DialogBody,{className:"p-5",children:(0,t.jsx)(M,{addOn:{name:r.name,icon:r.icon,price:f,interval:s.data?.interval,includedInPlanFeatures:r.features,enhancedAddOnFeatures:r.enhancedFeatures,description:`${r.description}.`},variant:"modal",isPending:p,isDisabled:m,onAddToPlan:()=>{r&&l?.id&&h({addOnId:r.id,organizationId:l.id})}})}),m?(0,t.jsx)(N.DialogNotice,{children:(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(D.Skeleton,{className:"h-3.5 w-full"}),(0,t.jsx)(D.Skeleton,{className:"h-3.5 w-10/12"})]})}):u?.amount_due_excluding_tax&&(0,t.jsxs)(N.DialogNotice,{children:["This add-on will be added to your plan immediately and you will be charged a pro-rated amount of"," ",(0,t.jsxs)("span",{className:"font-medium",children:[(0,O.formatCentsToCurrency)(u.amount_due_excluding_tax)," ","(tax not included)"]})]})]})})}e.s(["CheckoutStep",()=>e0],580539);var G=e.i(497915),V=e.i(184260),W=e.i(304153);function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach(function(t){J(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ee(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a,n,r=e&&("u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var i=[],l=!0,s=!1;try{for(r=r.call(e);!(l=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{l||null==r.return||r.return()}finally{if(s)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ea(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if("Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ea(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var en=function(e){return null!==e&&"object"===Z(e)},er="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",ei=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:er;if(null===e||en(e)&&"function"==typeof e.elements&&"function"==typeof e.createToken&&"function"==typeof e.createPaymentMethod&&"function"==typeof e.confirmCardPayment)return e;throw Error(t)},el=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:er;if(en(e)&&"function"==typeof e.then)return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return ei(e,t)})};var a=ei(e,t);return null===a?{tag:"empty"}:{tag:"sync",stripe:a}},es=function(e){var t=V.default.useRef(e);return V.default.useEffect(function(){t.current=e},[e]),t.current},ec="[object Object]",eo=function e(t,a){if(!en(t)||!en(a))return t===a;var n=Array.isArray(t);if(n!==Array.isArray(a))return!1;var r=Object.prototype.toString.call(t)===ec;if(r!==(Object.prototype.toString.call(a)===ec))return!1;if(!r&&!n)return t===a;var i=Object.keys(t),l=Object.keys(a);if(i.length!==l.length)return!1;for(var s={},c=0;c<i.length;c+=1)s[i[c]]=!0;for(var o=0;o<l.length;o+=1)s[l[o]]=!0;var d=Object.keys(s);return d.length===i.length&&d.every(function(n){return e(t[n],a[n])})},ed=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"4.0.2"}),e.registerAppInfo({name:"react-stripe-js",version:"4.0.2",url:"https://stripe.com/docs/stripe-js/react"}))},eu=V.default.createContext(null);eu.displayName="ElementsContext";var em=function(e,t){if(!e)throw Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e};W.default.any,W.default.object,W.default.func.isRequired;var eh=["on","session"],ep=V.default.createContext(null);ep.displayName="CheckoutContext";var ef=function(e,t){if(!e)throw Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in a <CheckoutProvider> provider."));return e},ex=function(e,t){if("success"!==t.type)return{stripe:e,checkoutState:t};var a=t.sdk,n=t.session;return a.on,a.session,{stripe:e,checkoutState:{type:"success",checkout:Object.assign({},n,ee(a,eh))}}},ey=function(e){var t=e.stripe,a=e.options,n=e.children,r=V.default.useMemo(function(){return el(t,"Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.")},[t]),i=et(V.default.useState({type:"loading"}),2),l=i[0],s=i[1],c=et(V.default.useState(null),2),o=c[0],d=c[1],u=V.default.useRef(!1);V.default.useEffect(function(){var e=!0,t=function(t){var n=t.stripe;n&&e&&!u.current&&(u.current=!0,n.initCheckout(a).then(function(e){s({type:"success",sdk:e,session:e.session()}),e.on("change",function(e){s(function(t){return"success"===t.type?{type:"success",sdk:t.sdk,session:e}:t})})},function(e){s({type:"error",error:e})}))};return"async"===r.tag?r.stripePromise.then(function(e){d(e),e&&t({stripe:e})}):"sync"===r.tag&&(d(r.stripe),t({stripe:r.stripe})),function(){e=!1}},[r,a,s]);var m=es(t);V.default.useEffect(function(){null!==m&&m!==t&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[m,t]);var h="success"===l.type?l.sdk:null,p=es(a),f=es(h);V.default.useEffect(function(){if(h){var e,t,n,r,i=!!(!f&&h),l=null==p||null==(e=p.elementsOptions)?void 0:e.appearance,s=null==a||null==(t=a.elementsOptions)?void 0:t.appearance,c=!eo(s,l);s&&(c||i)&&h.changeAppearance(s);var o=null==p||null==(n=p.elementsOptions)?void 0:n.fonts,d=null==a||null==(r=a.elementsOptions)?void 0:r.fonts,u=!eo(o,d);d&&(u||i)&&h.loadFonts(d)}},[a,p,h,f]),V.default.useEffect(function(){ed(o)},[o]);var x=V.default.useMemo(function(){return ex(o,l)},[o,l]);return V.default.createElement(ep.Provider,{value:x},n)};ey.propTypes={stripe:W.default.any,options:W.default.shape({fetchClientSecret:W.default.func.isRequired,elementsOptions:W.default.object}).isRequired};var eg=function(e){var t=V.default.useContext(ep),a=V.default.useContext(eu);if(!t)return em(a,e);if(!a)return t;throw Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."))},eb=function(){return ef(V.default.useContext(ep),"calls useCheckout()").checkoutState},ej=function(e,t,a){var n=!!a,r=V.default.useRef(a);V.default.useEffect(function(){r.current=a},[a]),V.default.useEffect(function(){if(!n||!e)return function(){};var a=function(){r.current&&r.current.apply(r,arguments)};return e.on(t,a),function(){e.off(t,a)}},[n,t,e,r])},ev=["mode"],ew=function(e,t){var a="".concat(e.charAt(0).toUpperCase()+e.slice(1),"Element"),n=t?function(e){eg("mounts <".concat(a,">"));var t=e.id,n=e.className;return V.default.createElement("div",{id:t,className:n})}:function(t){var n,r=t.id,i=t.className,l=t.options,s=void 0===l?{}:l,c=t.onBlur,o=t.onFocus,d=t.onReady,u=t.onChange,m=t.onEscape,h=t.onClick,p=t.onLoadError,f=t.onLoaderStart,x=t.onNetworksChange,y=t.onConfirm,g=t.onCancel,b=t.onShippingAddressChange,j=t.onShippingRateChange,v=t.onSavedPaymentMethodRemove,w=t.onSavedPaymentMethodUpdate,S=eg("mounts <".concat(a,">")),N="elements"in S?S.elements:null,_="checkoutState"in S?S.checkoutState:null,A=(null==_?void 0:_.type)==="success"?_.checkout:null,P=et(V.default.useState(null),2),C=P[0],I=P[1],k=V.default.useRef(null),O=V.default.useRef(null);ej(C,"blur",c),ej(C,"focus",o),ej(C,"escape",m),ej(C,"click",h),ej(C,"loaderror",p),ej(C,"loaderstart",f),ej(C,"networkschange",x),ej(C,"confirm",y),ej(C,"cancel",g),ej(C,"shippingaddresschange",b),ej(C,"shippingratechange",j),ej(C,"savedpaymentmethodremove",v),ej(C,"savedpaymentmethodupdate",w),ej(C,"change",u),d&&(n="expressCheckout"===e?d:function(){d(C)}),ej(C,"ready",n),V.default.useLayoutEffect(function(){if(null===k.current&&null!==O.current&&(N||A)){var t=null;if(A)switch(e){case"payment":t=A.createPaymentElement(s);break;case"address":if("mode"in s){var n=s.mode,r=ee(s,ev);if("shipping"===n)t=A.createShippingAddressElement(r);else if("billing"===n)t=A.createBillingAddressElement(r);else throw Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":t=A.createExpressCheckoutElement(s);break;case"currencySelector":t=A.createCurrencySelectorElement();break;case"taxId":t=A.createTaxIdElement(s);break;default:throw Error("Invalid Element type ".concat(a,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else N&&(t=N.create(e,s));k.current=t,I(t),t&&t.mount(O.current)}},[N,A,s]);var D=es(s);return V.default.useEffect(function(){if(k.current){var e,t=(e=["paymentRequest"],en(s)?Object.keys(s).reduce(function(t,a){var n=!en(D)||!eo(s[a],D[a]);return e.includes(a)?(n&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),t):n?X(X({},t||{}),{},J({},a,s[a])):t},null):null);t&&"update"in k.current&&k.current.update(t)}},[s,D]),V.default.useLayoutEffect(function(){return function(){if(k.current&&"function"==typeof k.current.destroy)try{k.current.destroy(),k.current=null}catch(e){}}},[]),V.default.createElement("div",{id:r,className:i,ref:O})};return n.propTypes={id:W.default.string,className:W.default.string,onChange:W.default.func,onBlur:W.default.func,onFocus:W.default.func,onReady:W.default.func,onEscape:W.default.func,onClick:W.default.func,onLoadError:W.default.func,onLoaderStart:W.default.func,onNetworksChange:W.default.func,onConfirm:W.default.func,onCancel:W.default.func,onShippingAddressChange:W.default.func,onShippingRateChange:W.default.func,onSavedPaymentMethodRemove:W.default.func,onSavedPaymentMethodUpdate:W.default.func,options:W.default.object},n.displayName=a,n.__elementType=e,n},eS="u"<typeof window,eN=["options"];ew("currencySelector",eS);var e_=ew("payment",eS);ew("expressCheckout",eS);var eA=ew("taxId",eS),eP=ew("address",eS),eC=function(e){var t=e.options,a=ee(e,eN),n=X(X({},t),{},{mode:"billing"});return V.default.createElement(eP,X(X({},a),{},{options:n}))},eI=e.i(29826),ek=e.i(290678);e.s(["CancelPlanStepBreadcrumbs",()=>eB,"ChoosePlanStepBreadcrumbs",()=>eE,"DowngradePlanStepBreadcrumbs",()=>eD],893018);var eO=e.i(874556);function eD(){let e,a=(0,T.c)(1);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(eT,{steps:[{number:1,label:"Confirm billing",mobileLabel:"Confirm"},{number:2,label:"Confirm downgrade",mobileLabel:"Downgrade"}]}),a[0]=e):e=a[0],e}function eB(){let e,a=(0,T.c)(1);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(eT,{steps:[{number:1,label:"Confirm billing",mobileLabel:"Confirm"},{number:2,label:"Review downgrade",mobileLabel:"Review"},{number:3,label:"Confirm cancellation",mobileLabel:"Cancel"}]}),a[0]=e):e=a[0],e}function eE(){let e,a,n,r,i,l=(0,T.c)(10),{checkoutState:s}=(0,Y.useNewPricing)();l[0]===Symbol.for("react.memo_cache_sentinel")?(e={number:1,label:"Choose plan",mobileLabel:"Plan"},l[0]=e):e=l[0];let c=!s.selectedPlanId;l[1]!==c?(a={number:2,label:"Choose add-ons",mobileLabel:"Add-ons",isDisabled:c},l[1]=c,l[2]=a):a=l[2];let o=!s.selectedPlanId;l[3]!==o?(n={number:3,label:"Payment details",mobileLabel:"Details",isDisabled:o},l[3]=o,l[4]=n):n=l[4],l[5]!==a||l[6]!==n?(r=[e,a,n],l[5]=a,l[6]=n,l[7]=r):r=l[7];let d=r;return l[8]!==d?(i=(0,t.jsx)("div",{className:"px-2",children:(0,t.jsx)(eT,{steps:d})}),l[8]=d,l[9]=i):i=l[9],i}function eT(e){let a,n,r=(0,T.c)(9),{steps:i}=e,{currentStep:l,setCurrentStep:s}=(0,eO.useFlow)(),c=l+1;if(r[0]!==c||r[1]!==s||r[2]!==i){let e;r[4]!==c||r[5]!==s?(e=(e,a)=>(0,t.jsxs)(S.Button,{className:"group flex items-center gap-1",emphasis:"none",type:"button","aria-label":`Go to step ${e.number}: ${e.label}`,onPress:()=>s(a),isDisabled:e.isDisabled,children:[(0,t.jsx)("span",{className:(0,L.cx)("flex min-h-[18px] min-w-[18px] items-center justify-center rounded-full border-2 text-ceramic-label-5",c===e.number&&"border-ceramic-primary text-ceramic-primary",c!==e.number&&"border-ceramic-dimmed text-ceramic-dimmed group-hover:border-ceramic-primary group-hover:text-ceramic-primary"),children:e.number}),(0,t.jsx)("span",{className:(0,L.cx)("text-nowrap text-ceramic-label-2 md:hidden",c===e.number&&"border-ceramic-primary text-ceramic-primary",c!==e.number&&"text-ceramic-dimmed group-hover:text-ceramic-primary"),children:e.mobileLabel}),(0,t.jsx)("span",{className:(0,L.cx)("hidden text-nowrap text-ceramic-label-2 md:inline",c===e.number&&"border-ceramic-primary text-ceramic-primary",c!==e.number&&"text-ceramic-dimmed group-hover:text-ceramic-primary"),children:e.label})]},e.number),r[4]=c,r[5]=s,r[6]=e):e=r[6],a=i.map(e),r[0]=c,r[1]=s,r[2]=i,r[3]=a}else a=r[3];return r[7]!==a?(n=(0,t.jsx)("div",{className:"flex items-center gap-4",children:a}),r[7]=a,r[8]=n):n=r[8],n}var eF=e.i(721376),eR=e.i(663843),eU=e.i(706537),eQ=e.i(959369),eL=e.i(546751),eM=e.i(630763);let ez=eQ.motion.create(R.CardSection);function eK(){let e,a,n,r,i,l,s=(0,T.c)(6);return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(R.CardHeader,{title:"Payment method"}),s[0]=e):e=s[0],s[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsxs)(R.ActionCard,{children:[e,(0,t.jsx)(R.CardBody,{className:"p-0",children:(0,t.jsx)(D.Skeleton,{className:"h-64 w-full"})})]}),s[1]=a):a=s[1],s[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(R.CardHeader,{title:"Billing information"}),s[2]=n):n=s[2],s[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsxs)(R.ActionCard,{children:[n,(0,t.jsx)(R.CardBody,{className:"p-0",children:(0,t.jsx)(D.Skeleton,{className:"h-80 w-full"})})]}),i=(0,t.jsx)(S.Button,{isDisabled:!0,className:"flex w-full justify-center",children:"Upgrade"}),s[3]=r,s[4]=i):(r=s[3],i=s[4]),s[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsxs)("div",{className:"flex w-full flex-col gap-4 md:w-2/3",children:[a,r,i,(0,t.jsx)("div",{className:"flex justify-center gap-x-0.5 text-center text-ceramic-body-4 text-ceramic-secondary",children:(0,t.jsxs)("span",{children:["By confirming you authorize Clerk to charge you for future payments as outlined in our"," ",(0,t.jsx)(eL.Link,{href:"https://clerk.com/legal/terms",className:"text-ceramic-label-4 text-ceramic-secondary underline",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"})]})})]}),s[5]=l):l=s[5],l}function eq({onComplete:e}){let a=eb(),[n,r]=(0,V.useState)(null),[i,l]=(0,V.useState)(!1),s=(0,I.useQueryClient)(),{organization:c}=(0,A.useOrganization)(),{getToken:o}=(0,_.useAuth)(),{checkoutState:d,currentSubscription:u}=(0,Y.useNewPricing)(),{track:m}=(0,k.useAnalytics)(),{data:h}=(0,C.useQuery)({...(0,w.customerInfo)(c?.id??"",{getToken:o}),enabled:!!c?.id}),{mutateAsync:p}=(0,P.useMutation)({mutationFn:async({organizationId:e,checkoutSessionId:t})=>{e&&t&&await (0,w.pricingRefreshCurrentSubscription)(c?.id??"",t,{getToken:o})}}),{mutateAsync:f,isPending:x}=(0,P.useMutation)({mutationFn:async e=>{if("success"!==a.type||!a.checkout)throw Error("Something went wrong. Please try again.");let t=await a.checkout.confirm({redirect:"if_required",email:a.checkout.email?void 0:e.email,savePaymentMethod:!0});if("error"===t.type)throw Error(t.error.message||"Payment failed. Please try again.");if("success"===t.type){try{let e="Dashboard_Billing Screen_Plan Upgraded";m(e,{newPlan:d.selectedPlanId,previousPlan:u.data?.plan_id,selectedAddOns:d.selectedAddOns,interval:d.selectedInterval}),E.default.capture(e,{newPlan:d.selectedPlanId,previousPlan:u.data?.plan_id,selectedAddOns:d.selectedAddOns,interval:d.selectedInterval})}catch{}await p({organizationId:c?.id??"",checkoutSessionId:a.checkout.id}).catch(()=>{})}},onSuccess:async()=>{await Promise.all([s.invalidateQueries({queryKey:["pricingCurrentSubscription"]}),s.invalidateQueries({queryKey:["currentSubscriptionExpanded"]}),s.invalidateQueries({queryKey:["previewSubscriptionChange"]}),s.invalidateQueries({queryKey:["pricingPlans"]}),s.invalidateQueries({queryKey:["instance"]}),s.invalidateQueries({queryKey:["userSettings"]})]),e(),s.removeQueries({queryKey:["checkoutSession"]})},onError:e=>{r(e instanceof Error?e.message:"An unexpected error occurred")}}),y=(0,eF.useControlledForm)({defaultValues:{email:"success"===a.type?a.checkout.email??null:null},validators:{onMount:eM.default.object({email:eM.default.string().email().nonempty("Email address is required")}),onChange:eM.default.object({email:eM.default.string().email().nonempty("Email address is required")})},onSubmit:async({value:e})=>{e.email&&await f({email:e.email})}}),g=(0,V.useMemo)(()=>"success"===a.type&&(a.checkout.email?a.checkout.canConfirm:y.store.state.canSubmit),[a,y.store.state]);if("success"!==a.type)return null;let b=h?.email||a.checkout.email,j=e=>{e?.clear(),requestAnimationFrame(()=>e?.unmount())};return(0,t.jsxs)("form",{...y.formProps,className:"flex min-h-72 w-full flex-col gap-4 md:w-2/3",children:[(0,t.jsxs)(R.ActionCard,{children:[(0,t.jsx)(R.CardHeader,{title:"Payment method"}),(0,t.jsx)(R.CardBody,{children:(0,t.jsx)(R.CardSection,{className:"flex flex-col gap-y-4",children:(0,t.jsx)(e_,{className:(0,L.cx)(x&&"pointer-events-none opacity-50"),options:{layout:{type:"tabs"},terms:{card:"never"}}})})})]}),!b&&(0,t.jsxs)(R.ActionCard,{children:[(0,t.jsx)(R.CardHeader,{title:"Contact information"}),(0,t.jsx)(R.CardBody,{children:(0,t.jsx)(R.CardSection,{className:"flex flex-col gap-y-3",children:(0,t.jsx)(y.Field,{name:"email",children:e=>(0,t.jsx)(eU.TextField,{label:"Email address",className:"w-full",value:e.state.value??"",onChange:e.handleChange,errors:e.state.meta.errors,isDisabled:!!a.checkout.email,children:(0,t.jsx)(eU.Input,{type:"email"})})})})})]}),(0,t.jsxs)(R.ActionCard,{children:[(0,t.jsx)(R.CardHeader,{title:"Billing information"}),(0,t.jsx)(R.CardBody,{className:"overflow-visible",children:(0,t.jsx)(R.CardSection,{className:(0,L.cx)("flex flex-col gap-y-3",x&&"pointer-events-none opacity-50"),children:(0,t.jsx)(eC,{})})})]}),!h?.tax_id?.value&&(0,t.jsxs)(R.ActionCard,{children:[(0,t.jsx)(R.CardHeader,{title:"Purchasing as business",switch:(0,t.jsx)(U.Switch,{isSelected:i,onChange:async e=>{let t=a.checkout.getTaxIdElement();j(t),e&&requestAnimationFrame(()=>{t?.mount(document.getElementById("billing-tax-id"))}),l(e)}})}),(0,t.jsx)(R.CardBody,{className:(0,L.cx)(i?"h-auto":"invisible h-0 opacity-0",x&&"pointer-events-none opacity-50"),children:(0,t.jsx)(ez,{layout:!0,className:(0,L.cx)(i?"h-44":"invisible h-0 opacity-0"),children:(0,t.jsx)(eA,{id:"billing-tax-id",options:{visibility:"auto"},onReady:e=>{i||j(e)}})})})]}),n&&(0,t.jsx)(eR.Banner,{variant:"negative",size:"sm",children:(0,t.jsx)("div",{className:"flex flex-col gap-y-2",children:(0,t.jsx)("div",{className:"text-ceramic-label-2 text-ceramic-primary",children:n})})}),(0,t.jsx)(S.Button,{className:"flex w-full justify-center",...y.submitButtonProps,isPending:x,isDisabled:!g,children:"Upgrade"}),(0,t.jsx)("div",{className:"flex justify-center gap-x-0.5 text-center text-ceramic-body-4 text-ceramic-secondary",children:(0,t.jsxs)("span",{children:["By confirming you authorize Clerk to charge you for future payments as outlined in our"," ",(0,t.jsx)(eL.Link,{href:"https://clerk.com/terms",className:"text-ceramic-label-4 text-ceramic-secondary underline",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"})]})})]})}var eY=e.i(861160),eH=e.i(836052),eG=e.i(184512);let eV=function(e){(0,V.useEffect)(e,[])};function eW({setLoading:e}){let{isStaffMode:a}=(0,eY.useStaffContext)(),n=eb(),r=(0,I.useQueryClient)(),{organization:i}=(0,A.useOrganization)(),{checkoutState:l,selectCheckoutInterval:s,enterprise:c,getPlanById:o}=(0,Y.useNewPricing)(),[d,u]=(0,V.useState)(""),[m,h]=(0,V.useState)(null),[p,f]=(0,V.useState)(!1),{mutateAsync:x,isPending:y}=(0,P.useMutation)({mutationFn:async()=>{if("success"!==n.type)return;if(!d.trim())return void h("Promo code is required.");h(null);let e=await n.checkout.applyPromotionCode(d);"error"===e.type?e.error?.code==="invalidCode"?h("This promo code is invalid."):h("Something went wrong. Please try again."):"success"===e.type&&u("")}}),g="success"===n.type?n.checkout.recurring?.interval:"month",b=(0,V.useMemo)(()=>o(l.selectedPlanId),[o,l.selectedPlanId]),j=(0,V.useMemo)(()=>"year"===g?"Switch to monthly billing":b?.prices?.yearDiscount?`Switch to annual billing and save ${(0,O.formatPercent)(b.prices.yearDiscount)}`:"Switch to annual billing",[g,b]);if(eV(()=>{e(!1)}),"success"!==n.type)return null;let v=(0,O.formatCentsToCurrency)(n.checkout.total.total.minorUnitsAmount),w=(0,O.formatCentsToCurrency)(n.checkout.recurring?.dueNext.subtotal.minorUnitsAmount??0),N=o(l.selectedPlanId),_=n.checkout.lineItems.filter(e=>e.recurring?.usageType!=="metered"||a),C=!!n.checkout.discountAmounts?.length;return(0,t.jsxs)("div",{className:"flex w-full flex-col gap-5 pr-4 md:w-1/3",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("div",{className:"text-ceramic-label-2 text-ceramic-primary",children:c?"Subscribe to Enterprise plan":`Subscribe to ${N?.name} plan`}),!c&&(0,t.jsx)(eX,{interval:g??"month"})]}),(0,t.jsx)("div",{className:"mt-1.5 text-ceramic-heading-3 text-ceramic-primary",children:(0,O.formatCentsToCurrency)(n.checkout.total.subtotal.minorUnitsAmount)}),(0,t.jsxs)("div",{className:"mt-2",children:[!c&&(0,t.jsxs)("div",{className:"text-ceramic-body-3 text-ceramic-secondary",children:["Due today and then ",w,"/",g,"."]}),n.checkout.total.taxExclusive.minorUnitsAmount>0&&(0,t.jsx)("div",{className:"text-ceramic-body-3 text-ceramic-secondary",children:"Plus applicable sales tax."})]}),!c&&(0,t.jsx)("div",{className:"mt-3 text-ceramic-body-3 text-ceramic-secondary",children:(0,t.jsx)(S.Button,{variant:"primary",emphasis:"none",icon:eH.ArrowRotateLeftRightIcon,iconPosition:"start",onPress:async()=>{e(!0);try{s("month"===l.selectedInterval?"year":"month"),await r.refetchQueries({queryKey:["checkoutSession",i?.id]})}finally{e(!1)}},children:j})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 text-ceramic-body-2 text-ceramic-primary",children:[(0,t.jsx)(eJ,{}),_.map((e,a)=>(0,t.jsxs)(V.Fragment,{children:[(0,t.jsx)(eZ,{label:e.name,description:e.description??"",amount:(0,O.formatCentsToCurrency)(e.subtotal.minorUnitsAmount)},e.id),a<_.length-1&&(0,t.jsx)(eJ,{})]},e.id)),(0,t.jsx)(eJ,{}),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-1.5",children:[(0,t.jsxs)("div",{className:"flex justify-between gap-x-1",children:[(0,t.jsx)("div",{className:"text-ceramic-label-2",children:"Subtotal"}),(0,t.jsx)("div",{children:(0,O.formatCentsToCurrency)(n.checkout.total.subtotal.minorUnitsAmount)})]}),n.checkout.discountAmounts&&n.checkout.discountAmounts.length>0&&n.checkout.discountAmounts.map(e=>(0,t.jsx)(V.Fragment,{children:(0,t.jsx)("div",{className:"text-ceramic-purple",children:(0,t.jsx)(eZ,{label:e.displayName,description:e.recurring?.type==="repeating"&&e.percentOff&&e.recurring.durationInMonths?(0,t.jsxs)("span",{className:"text-ceramic-body-4",children:["(",e.percentOff,"% off for"," ",e.recurring.durationInMonths," months)"]}):"",amount:`-${(0,O.formatCentsToCurrency)(e.minorUnitsAmount)}`})})},e.displayName)),(0,t.jsxs)("div",{className:"flex justify-between gap-x-1",children:[(0,t.jsx)("div",{className:"text-ceramic-secondary",children:"Tax"}),(0,t.jsx)("div",{children:(0,O.formatCentsToCurrency)(n.checkout.total.taxExclusive.minorUnitsAmount)})]})]})}),(0,t.jsx)(eJ,{}),(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)("div",{className:"flex flex-col gap-y-0.5",children:(0,t.jsx)("div",{className:"text-ceramic-label-2",children:"Total"})}),(0,t.jsx)("div",{"data-testid":"total-amount",children:v})]}),(0,t.jsx)(eJ,{})]}),!p&&!C&&(0,t.jsxs)(S.Button,{onPress:()=>f(!0),variant:"secondary",className:"flex items-center text-ceramic-label-3 text-ceramic-secondary",emphasis:"none",children:[(0,t.jsx)(eG.PlusIcon,{className:"size-4"}),(0,t.jsx)("span",{children:"Add a promo code"})]}),p&&!C&&(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsxs)("div",{className:"flex flex-shrink-0 flex-row items-start gap-2",children:[(0,t.jsx)(eU.TextField,{placeholder:"Enter promo code",className:"w-full",value:d,onChange:e=>{h(null),u(e)},isDisabled:y,errors:m?[m]:void 0}),(0,t.jsx)(S.Button,{variant:"secondary",className:"flex-shrink-0",onPress:()=>x(),isPending:y,children:"Add"})]})})]})}function e$(){let e,a,n,r,i,l,s,c,o,d=(0,T.c)(9);return d[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"flex items-center gap-x-2",children:(0,t.jsx)(D.Skeleton,{className:"h-4 w-64"})}),d[0]=e):e=d[0],d[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("div",{className:"mt-3 text-ceramic-heading-3 text-ceramic-primary",children:(0,t.jsx)(D.Skeleton,{className:"h-10 w-24"})}),d[1]=a):a=d[1],d[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("div",{className:"mt-4 text-ceramic-body-3 text-ceramic-secondary",children:(0,t.jsx)(D.Skeleton,{className:"h-3 w-52"})}),d[2]=n):n=d[2],d[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsxs)("div",{className:"flex flex-col",children:[e,a,n,(0,t.jsx)("div",{className:"mt-3 text-ceramic-body-3 text-ceramic-secondary",children:(0,t.jsx)(S.Button,{variant:"primary",emphasis:"none",iconPosition:"start",children:(0,t.jsx)(D.Skeleton,{className:"h-4 w-64"})})})]}),d[3]=r):r=d[3],d[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(eJ,{}),d[4]=i):i=d[4],d[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsxs)("div",{className:"flex justify-between gap-x-1",children:[(0,t.jsx)("div",{className:"text-ceramic-label-2",children:"Subtotal"}),(0,t.jsx)("div",{children:(0,t.jsx)(D.Skeleton,{className:"h-4 w-16"})})]}),d[5]=l):l=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-1.5",children:[l,(0,t.jsxs)("div",{className:"flex justify-between gap-x-1",children:[(0,t.jsx)("div",{className:"text-ceramic-secondary",children:"Tax"}),(0,t.jsx)("div",{children:(0,t.jsx)(D.Skeleton,{className:"h-4 w-16"})})]})]})}),c=(0,t.jsx)(eJ,{}),d[6]=s,d[7]=c):(s=d[6],c=d[7]),d[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsxs)("div",{className:"flex w-full flex-col gap-5 pr-4 md:w-1/3",children:[r,(0,t.jsxs)("div",{className:"flex flex-col gap-4 text-ceramic-body-2 text-ceramic-primary",children:[i,s,c,(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsx)("div",{className:"flex flex-col gap-y-0.5",children:(0,t.jsx)("div",{className:"text-ceramic-label-2",children:"Total"})}),(0,t.jsx)("div",{children:(0,t.jsx)(D.Skeleton,{className:"h-4 w-16"})})]}),(0,t.jsx)(eJ,{})]})]}),d[8]=o):o=d[8],o}function eX(e){let a,n,r=(0,T.c)(3),{interval:i}=e;r[0]===Symbol.for("react.memo_cache_sentinel")?(a={day:"Daily",week:"Weekly",month:"Monthly",year:"Annual"},r[0]=a):a=r[0];let l=a[i];return r[1]!==l?(n=(0,t.jsx)(F.Badge,{variant:"secondary",children:l}),r[1]=l,r[2]=n):n=r[2],n}function eZ(e){let a,n,r,i,l,s=(0,T.c)(12),{label:c,description:o,amount:d}=e;return s[0]!==c?(a=(0,t.jsx)("div",{className:"break-words",children:c}),s[0]=c,s[1]=a):a=s[1],s[2]!==o?(n="string"==typeof o?(0,t.jsx)("div",{className:"text-ceramic-body-3 text-ceramic-secondary",children:o}):o,s[2]=o,s[3]=n):n=s[3],s[4]!==a||s[5]!==n?(r=(0,t.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-y-0.5",children:[a,n]}),s[4]=a,s[5]=n,s[6]=r):r=s[6],s[7]!==d?(i=(0,t.jsx)("div",{className:"flex-shrink-0",children:d}),s[7]=d,s[8]=i):i=s[8],s[9]!==r||s[10]!==i?(l=(0,t.jsxs)("div",{className:"flex items-start justify-between gap-8",children:[r,i]}),s[9]=r,s[10]=i,s[11]=l):l=s[11],l}function eJ(){let e,a=(0,T.c)(1);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"border-separate border-t"}),a[0]=e):e=a[0],e}function e0(e){let a,n,r,i,l,s=(0,T.c)(13),{onClose:c,onComplete:o}=e,{currentSubscription:d,enterprise:u}=(0,Y.useNewPricing)(),m=!!u;return s[0]!==c?(a=(0,t.jsx)(ek.ChoosePlanDialogHeader,{onClose:c}),s[0]=c,s[1]=a):a=s[1],s[2]!==d.data?.is_free||s[3]!==m?(n=d.data?.is_free&&!m&&(0,t.jsx)(eE,{}),s[2]=d.data?.is_free,s[3]=m,s[4]=n):n=s[4],s[5]!==o?(r=(0,t.jsx)(e1,{onComplete:o}),s[5]=o,s[6]=r):r=s[6],s[7]!==n||s[8]!==r?(i=(0,t.jsx)(ek.ChoosePlanDialogBody,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-5 px-5 py-6",children:[n,r]})}),s[7]=n,s[8]=r,s[9]=i):i=s[9],s[10]!==a||s[11]!==i?(l=(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(ek.ChoosePlanDialogContent,{children:[a,i]})}),s[10]=a,s[11]=i,s[12]=l):l=s[12],l}function e1(e){let a,n,r,i,l,s,c,o,d,u=(0,T.c)(40),{onComplete:m}=e,{organization:h}=(0,A.useOrganization)(),{getToken:p}=(0,_.useAuth)(),{checkoutState:f}=(0,Y.useNewPricing)(),[x,y]=(0,V.useState)(!0),{appearance:g,fonts:b}=(0,eI.useStripeUtils)(),j=h?.id;u[0]!==f.selectedInterval||u[1]!==f.selectedPlanId||u[2]!==j?(a=["checkoutSession",j,f.selectedPlanId,f.selectedInterval],u[0]=f.selectedInterval,u[1]=f.selectedPlanId,u[2]=j,u[3]=a):a=u[3],u[4]!==f.selectedAddOns||u[5]!==f.selectedInterval||u[6]!==f.selectedPlanId||u[7]!==p||u[8]!==h?.id?(n=async()=>f.selectedPlanId?await (0,w.createCheckoutSession)(h?.id??"",{returnUrl:`${window.location.origin}/billing/complete?path=${window.location.pathname}`,getToken:p,interval:f.selectedInterval,planIds:[f.selectedPlanId,...f.selectedAddOns]}):null,u[4]=f.selectedAddOns,u[5]=f.selectedInterval,u[6]=f.selectedPlanId,u[7]=p,u[8]=h?.id,u[9]=n):n=u[9];let v=!!f.selectedPlanId;u[10]!==a||u[11]!==n||u[12]!==v?(r={queryKey:a,queryFn:n,enabled:v},u[10]=a,u[11]=n,u[12]=v,u[13]=r):r=u[13];let{data:S,isRefetching:N}=(0,C.useQuery)(r);S?.client_secret;e:{let e,t,a,n;if(N){let e;u[14]===Symbol.for("react.memo_cache_sentinel")?(e={fetchClientSecret:e2},u[14]=e):e=u[14],i=e;break e}u[15]!==S?.client_secret?(e=async()=>S?.client_secret??"",u[15]=S?.client_secret,u[16]=e):e=u[16],u[17]===Symbol.for("react.memo_cache_sentinel")?(t={enableRedisplay:"auto"},u[17]=t):t=u[17],u[18]!==g||u[19]!==b?(a={appearance:g,fonts:b,savedPaymentMethod:t},u[18]=g,u[19]=b,u[20]=a):a=u[20],u[21]!==e||u[22]!==a?(n={fetchClientSecret:e,elementsOptions:a},u[21]=e,u[22]=a,u[23]=n):n=u[23],i=n}let P=i,I=x?"invisible hidden opacity-0":"visible opacity-100";return u[24]!==I?(l=(0,L.cx)("flex w-full flex-col-reverse gap-6 transition-opacity duration-1000 md:flex-row",I),u[24]=I,u[25]=l):l=u[25],u[26]!==P||u[27]!==S||u[28]!==f.selectedPlanId||u[29]!==N||u[30]!==m?(s=!N&&S&&f.selectedPlanId&&(0,t.jsx)(ey,{stripe:(0,G.getStripe)(),options:P,children:(0,t.jsx)(e3,{setLoading:y,onComplete:m})}),u[26]=P,u[27]=S,u[28]=f.selectedPlanId,u[29]=N,u[30]=m,u[31]=s):s=u[31],u[32]!==l||u[33]!==s?(c=(0,t.jsx)("div",{className:l,children:s}),u[32]=l,u[33]=s,u[34]=c):c=u[34],u[35]!==x?(o=x&&(0,t.jsxs)("div",{className:"flex w-full flex-col-reverse gap-6 md:flex-row",children:[(0,t.jsx)(eK,{}),(0,t.jsx)(e$,{})]}),u[35]=x,u[36]=o):o=u[36],u[37]!==c||u[38]!==o?(d=(0,t.jsxs)(t.Fragment,{children:[c,o]}),u[37]=c,u[38]=o,u[39]=d):d=u[39],d}async function e2(){return""}function e3(e){let a,n,r,i=(0,T.c)(8),{setLoading:l,onComplete:s}=e;if("success"!==eb().type){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)("div",{className:"flex w-full flex-col-reverse gap-6 md:flex-row",children:[(0,t.jsx)(eK,{}),(0,t.jsx)(e$,{})]}),i[0]=e):e=i[0],e}return i[1]!==s?(a=(0,t.jsx)(eq,{onComplete:s}),i[1]=s,i[2]=a):a=i[2],i[3]!==l?(n=(0,t.jsx)(eW,{setLoading:l}),i[3]=l,i[4]=n):n=i[4],i[5]!==a||i[6]!==n?(r=(0,t.jsxs)(t.Fragment,{children:[a,n]}),i[5]=a,i[6]=n,i[7]=r):r=i[7],r}e.s(["AddOnsStep",()=>e7],943908);let e4={src:e.i(655907).default,width:160,height:160,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAxUlEQVR42k2PTwsBURxF32exkQWFhXmPwYyEFTJKsaEoFmyMQpkF+ZdSYi22k6XvNrtr7ltZ3Dqd81u8J2KxxEsqK8iZJfyPjk1kjEKgshYMacK2K3pkOjZh2TU47S7i8STqDUePTMcmilYVjWYHShXguivM3aVmOjZh5ssYjmbYH264P57wvAtW64N2bMKQRbScHo6nB3z/i/f7Ex4ctWMTqbQMwhdjPFlgu7ti453RH0z5CyRTMhCRSPRF4LVUth6Zju0H3R15al89G2wAAAAASUVORK5CYII="},e5={src:e.i(735745).default,width:168,height:168,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAtElEQVR42k2Ouw6CQBRE91MpNcb4dSZaaycN8loBcXmIEBIgBhBsRmYri0kmZ+bejNhsdobrSiuOU/Uvx/Gt9XprCJp5/mKaZgzDR4uezLZ9S7A9jpMGSZIjSZ/akzETUaRU07zRNB32+8OiI9q2AxkzEQSx8v0IYfhYXkqUZY2iqEDGTBcYSnnH6XyBaV6RZYU+0AUO6fsBef5arkJCVFUNMj1ytdoatu1ZUobK825a9GTMftYM3OqRNhzAAAAAAElFTkSuQmCC"},e6=()=>{let e,a=(0,T.c)(1);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.default,{src:e5,alt:"Billing",width:40,height:40,className:"dark:hidden"}),(0,t.jsx)(h.default,{src:e4,alt:"Billing",width:40,height:40,className:"hidden dark:block"})]}),a[0]=e):e=a[0],e};function e7(e){let a,n,r,i,l,s,c,o,d,u,m,h,p,f,x,y=(0,T.c)(45),{onClose:g}=e,{nextStep:b}=(0,eO.useFlow)(),{checkoutState:j,defaultAddOns:v,currentSubscription:w,selectCheckoutAddOn:N,deselectAllCheckoutAddOns:_,getPlanById:A}=(0,Y.useNewPricing)();y[0]!==j.selectedPlanId||y[1]!==A?(a=A(j.selectedPlanId),y[0]=j.selectedPlanId,y[1]=A,y[2]=a):a=y[2];let P=a;y[3]!==_||y[4]!==b?(n=()=>{_(),b()},y[3]=_,y[4]=b,y[5]=n):n=y[5];let C=n,I="year"===j.selectedInterval?v.b2bAuthentication?.prices?.yearPerMonth??0:v.b2bAuthentication?.prices?.month??0,k="year"===j.selectedInterval?v.administration?.prices?.yearPerMonth??0:v.administration?.prices?.month??0;return y[6]!==g?(r=(0,t.jsx)(ek.ChoosePlanDialogHeader,{onClose:g}),y[6]=g,y[7]=r):r=y[7],y[8]!==w.data?.is_free?(i=w.data?.is_free&&(0,t.jsx)(eE,{}),y[8]=w.data?.is_free,y[9]=i):i=y[9],y[10]!==i?(l=(0,t.jsx)("div",{className:"flex flex-col justify-between md:flex-row md:items-center",children:i}),y[10]=i,y[11]=l):l=y[11],y[12]!==I||y[13]!==j.selectedAddOns||y[14]!==j.selectedInterval||y[15]!==v.b2bAuthentication||y[16]!==N||y[17]!==P?.addons?(s=v.b2bAuthentication&&(0,t.jsx)(M,{addOn:{name:v.b2bAuthentication.name,icon:v.b2bAuthentication.icon,title:(0,t.jsxs)("span",{className:"text-ceramic-heading-5 text-ceramic-primary",children:[(0,O.formatCentsToCurrency)(I,{minimumFractionDigits:0}),(0,t.jsxs)("span",{className:"text-ceramic-label-3 text-ceramic-secondary",children:["/mo,"," ","year"===j.selectedInterval?"billed annually":"billed monthly"]})]}),includedInPlanFeatures:v.b2bAuthentication.features,enhancedAddOnFeatures:v.b2bAuthentication.enhancedFeatures,description:`${v.b2bAuthentication.description}.`},variant:"selection",isEnabled:j.selectedAddOns.includes(v.b2bAuthentication.id),isDisabled:!P?.addons?.includes(v.b2bAuthentication.id),onToggle:()=>N(v.b2bAuthentication?.id)}),y[12]=I,y[13]=j.selectedAddOns,y[14]=j.selectedInterval,y[15]=v.b2bAuthentication,y[16]=N,y[17]=P?.addons,y[18]=s):s=y[18],y[19]!==k||y[20]!==j.selectedAddOns||y[21]!==j.selectedInterval||y[22]!==v.administration||y[23]!==N||y[24]!==P?.addons?(c=v.administration&&(0,t.jsx)(M,{addOn:{name:v.administration.name,icon:v.administration.icon,title:(0,t.jsxs)("span",{className:"text-ceramic-heading-5 text-ceramic-primary",children:[(0,O.formatCentsToCurrency)(k,{minimumFractionDigits:0}),(0,t.jsxs)("span",{className:"text-ceramic-label-3 text-ceramic-secondary",children:["/mo,"," ","year"===j.selectedInterval?"billed annually":"billed monthly"]})]}),includedInPlanFeatures:v.administration.features,enhancedAddOnFeatures:v.administration.enhancedFeatures,description:`${v.administration.description}.`},variant:"selection",isEnabled:j.selectedAddOns.includes(v.administration.id),isDisabled:!P?.addons?.includes(v.administration.id),onToggle:()=>N(v.administration?.id)}),y[19]=k,y[20]=j.selectedAddOns,y[21]=j.selectedInterval,y[22]=v.administration,y[23]=N,y[24]=P?.addons,y[25]=c):c=y[25],y[26]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsxs)("span",{className:"text-ceramic-heading-5 text-ceramic-primary",children:["0.7%"," ",(0,t.jsx)("span",{className:"text-ceramic-label-3 text-ceramic-secondary",children:"of billing volume"})]}),y[26]=o):o=y[26],y[27]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)(M,{addOn:{name:"Billing",icon:e6,title:o,includedInPlanFeatures:{title:"Billing",items:["Stripe 2.9% + Stripe transaction charge $0.30 + Clerk Billing 0.7%","Prebuilt components for pricing pages & customer self-service subscription management","Billing-aware authorization for plan-based access control and feature gating","Unified user and subscription data"]},description:"The easiest way to implement subscriptions for applications. Pay only for what you bill, no upfront costs."},variant:"selection"},"billing"),y[27]=d):d=y[27],y[28]!==l||y[29]!==s||y[30]!==c?(u=(0,t.jsx)(ek.ChoosePlanDialogBody,{children:(0,t.jsxs)("div",{className:"flex flex-col gap-5 px-5 py-6",children:[l,s,c,d]})}),y[28]=l,y[29]=s,y[30]=c,y[31]=u):u=y[31],y[32]!==u||y[33]!==r?(m=(0,t.jsxs)(ek.ChoosePlanDialogContent,{children:[r,u]}),y[32]=u,y[33]=r,y[34]=m):m=y[34],y[35]!==b?(h=(0,t.jsx)(S.Button,{onClick:()=>b(),children:"Go to payment"}),y[35]=b,y[36]=h):h=y[36],y[37]!==C?(p=(0,t.jsx)(S.Button,{onClick:()=>C(),children:"Skip"}),y[37]=C,y[38]=p):p=y[38],y[39]!==h||y[40]!==p?(f=(0,t.jsx)(ek.ChoosePlanDialogFooter,{notice:"Youll be able to see your total subscription price on the next page",button:h,secondaryButton:p}),y[39]=h,y[40]=p,y[41]=f):f=y[41],y[42]!==m||y[43]!==f?(x=(0,t.jsxs)(t.Fragment,{children:[m,f]}),y[42]=m,y[43]=f,y[44]=x):x=y[44],x}e.s(["ChoosePlanStep",()=>tc],976952);var e8=e.i(228069),e9=e.i(199613),te=e.i(253683),tt=e.i(942976),ta=e.i(603770),tn=e.i(133717);e.i(45564);var tr=e.i(757324),ti=e.i(998098);function tl(e){let a,n,r,i,l,s,c,o,d,u,m,h,p,f,x,y,g,b,j,v,w,N,_,A,P,C,I=(0,T.c)(75),{plan:k,buttonText:D,onClick:B,isEnabled:E}=e,{checkoutState:U,selectCheckoutInterval:M}=(0,Y.useNewPricing)(),{icon:z,name:K,highlighted:q,prices:H,seats:G,additionalSeatsAmount:V,features:W}=k;e:{let e="year"===U.selectedInterval?H?.yearPerMonth:H?.month;if("number"!=typeof e){a=null;break e}a=e/100}let $=a,X=q?"highlight":"default",Z=q?"highlight":"default",J=q?"border-ceramic-purple/4 bg-ceramic-purple-50 dark:border-ceramic-purple/8 dark:bg-ceramic-purple/4":"border-ceramic-gray/8 bg-ceramic-gray-100 dark:border-ceramic-gray/8 dark:bg-ceramic-gray/4";I[0]!==J?(n=(0,L.cx)("flex flex-col rounded-lg border-[1px] p-3",J),I[0]=J,I[1]=n):n=I[1],I[2]!==z||I[3]!==q?(r="function"==typeof z?(0,t.jsx)(z,{className:(0,L.cx)("size-6",q?"text-ceramic-purple dark:text-ceramic-purple-600":"text-ceramic-secondary")}):z,I[2]=z,I[3]=q,I[4]=r):r=I[4],I[5]!==n||I[6]!==r?(i=(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:n,children:r})}),I[5]=n,I[6]=r,I[7]=i):i=I[7],I[8]!==U.selectedInterval||I[9]!==H||I[10]!==M?(l=!!H?.yearPerMonth&&(0,t.jsx)("div",{className:"mt-[1px]",children:(0,t.jsxs)(tn.SegmentControl,{size:"sm",fit:!0,selectedKeys:[U.selectedInterval],defaultSelectedKeys:["year"],onSelectionChange:e=>{M(Array.from(e)[0])},children:[(0,t.jsx)(tn.SegmentControlItem,{id:"month",children:(0,t.jsx)("span",{className:"text-ceramic-label-3",children:"Monthly"})}),(0,t.jsx)(tn.SegmentControlItem,{id:"year",badge:H.yearDiscount&&(0,t.jsxs)(F.Badge,{variant:"primary",children:[" ","-",(0,O.formatPercent)(H.yearDiscount)]}),children:(0,t.jsx)("span",{className:"text-ceramic-label-3",children:"Annual"})})]})}),I[8]=U.selectedInterval,I[9]=H,I[10]=M,I[11]=l):l=I[11],I[12]!==i||I[13]!==l?(s=(0,t.jsxs)("div",{className:"flex items-start justify-between p-4",children:[i,l]}),I[12]=i,I[13]=l,I[14]=s):s=I[14],I[15]!==q?(c=q&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ta.Dots,{}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-white/80 to-transparent dark:from-ceramic-gray-1400"})]}),I[15]=q,I[16]=c):c=I[16],I[17]!==K?(o=(0,t.jsx)("div",{className:"text-ceramic-label-1",children:K}),I[17]=K,I[18]=o):o=I[18],I[19]!==U.selectedInterval||I[20]!==k.isFree||I[21]!==$?(d=(0,t.jsx)("div",{className:"mt-1",children:null!==$?(0,t.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,t.jsx)(tr.default,{className:(0,L.cx)("text-ceramic-heading-2","[&::part(suffix)]:ml-0.5 [&::part(suffix)]:text-ceramic-label-1 [&::part(suffix)]:text-ceramic-secondary"),isolate:!0,value:$,locales:["en-US"],format:{style:"currency",currency:"USD",trailingZeroDisplay:"stripIfInteger"},suffix:k.isFree?"":"/mo,",plugins:[ti.continuous]}),!k.isFree&&(0,t.jsx)("span",{className:"text-ceramic-label-3 text-ceramic-secondary",children:"year"===U.selectedInterval?"billed annually":"billed monthly"})]}):(0,t.jsx)("span",{className:"text-ceramic-heading-2",children:"N/A"})}),I[19]=U.selectedInterval,I[20]=k.isFree,I[21]=$,I[22]=d):d=I[22];let ee=q?"text-ceramic-purple dark:text-ceramic-purple-600":"text-ceramic-primary";I[23]!==ee?(u=(0,L.cx)("mt-1.5 text-ceramic-label-3",ee),I[23]=ee,I[24]=u):u=I[24],I[25]!==u?(m=(0,t.jsx)("div",{className:u,children:"Unlimited applications"}),I[25]=u,I[26]=m):m=I[26],I[27]!==V||I[28]!==G?(h=V?`Includes ${G} seats, ${(0,O.formatCentsToCurrency)(V,{minimumFractionDigits:0})}/mo per additional`:`Up to ${G} seats`,I[27]=V,I[28]=G,I[29]=h):h=I[29],I[30]!==h?(p=(0,t.jsx)("div",{className:"mt-0.5 text-ceramic-body-3 text-ceramic-secondary",children:h}),I[30]=h,I[31]=p):p=I[31],I[32]!==o||I[33]!==d||I[34]!==m||I[35]!==p?(f=(0,t.jsxs)("div",{className:"relative z-10 m-4 flex flex-col",children:[o,d,m,p]}),I[32]=o,I[33]=d,I[34]=m,I[35]=p,I[36]=f):f=I[36];let et=q?"primary":"secondary",ea=!E;I[37]===Symbol.for("react.memo_cache_sentinel")?(x=(0,L.cx)("w-full justify-center text-ceramic-secondary"),I[37]=x):x=I[37];let en=`Select-${K}`;I[38]!==D||I[39]!==B||I[40]!==et||I[41]!==ea||I[42]!==en?(y=(0,t.jsx)("div",{className:"m-4 flex items-center justify-center",children:(0,t.jsx)(S.Button,{variant:et,isDisabled:ea,className:x,onPress:B,"data-testid":en,children:D})}),I[38]=D,I[39]=B,I[40]=et,I[41]=ea,I[42]=en,I[43]=y):y=I[43],I[44]!==c||I[45]!==f||I[46]!==y?(g=(0,t.jsxs)("div",{className:"relative overflow-hidden",children:[c,f,y]}),I[44]=c,I[45]=f,I[46]=y,I[47]=g):g=I[47];let er=!q&&"border-ceramic-gray-200 bg-ceramic-gray-50 dark:border-ceramic-gray/4 dark:bg-ceramic-gray-1500",ei=q&&"border-ceramic-purple/4 bg-ceramic-purple-50 dark:border-ceramic-purple/8 dark:bg-ceramic-purple/4";if(I[48]!==er||I[49]!==ei?(b=(0,L.cx)("flex min-h-48 flex-col rounded-lg border-[1px] p-4",er,ei),I[48]=er,I[49]=ei,I[50]=b):b=I[50],I[51]!==W.title?(j=(0,t.jsx)("div",{className:"text-ceramic-label-3 text-ceramic-primary",children:W.title}),I[51]=W.title,I[52]=j):j=I[52],I[53]===Symbol.for("react.memo_cache_sentinel")?(v=(0,t.jsx)("div",{className:"my-3 border-t-[1px] border-ceramic-bg-separator"}),I[53]=v):v=I[53],I[54]!==W.items||I[55]!==q){let e;I[57]!==q?(e=(e,a)=>(0,t.jsxs)("li",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(Q.CheckmarkCircleIcon,{className:(0,L.cx)("size-4",q?"text-ceramic-purple dark:text-ceramic-purple-300":"text-ceramic-secondary"),"aria-hidden":"true"}),(0,t.jsx)("span",{children:e})]},a),I[57]=q,I[58]=e):e=I[58],w=W.items.map(e),I[54]=W.items,I[55]=q,I[56]=w}else w=I[56];return I[59]!==w?(N=(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsx)("ul",{className:"space-y-2 text-ceramic-body-3 text-ceramic-secondary",children:w})}),I[59]=w,I[60]=N):N=I[60],I[61]!==b||I[62]!==j||I[63]!==N?(_=(0,t.jsxs)("div",{className:b,children:[j,v,N]}),I[61]=b,I[62]=j,I[63]=N,I[64]=_):_=I[64],I[65]!==g||I[66]!==_||I[67]!==s?(A=(0,t.jsxs)("div",{className:"m-1 h-full overflow-clip",children:[s,g,_]}),I[65]=g,I[66]=_,I[67]=s,I[68]=A):A=I[68],I[69]!==Z||I[70]!==A?(P=(0,t.jsx)(R.CardBody,{variant:Z,children:A}),I[69]=Z,I[70]=A,I[71]=P):P=I[71],I[72]!==X||I[73]!==P?(C=(0,t.jsx)(R.ActionCard,{className:"w-full",variant:X,children:P}),I[72]=X,I[73]=P,I[74]=C):C=I[74],C}let ts={cancel:"Cancel Plan",checkout:"Select plan",upgrade:"Upgrade",downgrade:"Downgrade",switch:"Switch plan",add_addon:"Add Add-on",remove_addon:"Remove Add-on"};function tc(e){let a,n,r,i,l,s,c,o,d,u,m,h,p,f,x,y,g,b,j=(0,T.c)(63),{onClose:v}=e,{nextStep:S}=(0,eO.useFlow)(),{organization:N}=(0,A.useOrganization)(),{getToken:P}=(0,_.useAuth)(),{currentSubscription:I,checkoutState:k,openCancelPlan:O,openSwitchPlan:D,openUpgradePlan:B,openDowngradePlan:E,selectCheckoutPlan:F,defaultPlans:R,isLoading:U}=(0,Y.useNewPricing)(),Q=N?.id??"";j[0]!==P||j[1]!==Q?(a=(0,w.currentSubscriptionExpandedQuery)(Q,{getToken:P}),j[0]=P,j[1]=Q,j[2]=a):a=j[2];let L=!!N?.id;j[3]!==a||j[4]!==L?(n={...a,enabled:L},j[3]=a,j[4]=L,j[5]=n):n=j[5];let{data:M}=(0,C.useQuery)(n);j[6]!==k.selectedInterval||j[7]!==M?.upcoming_changes?(r=e=>{let t=M?.upcoming_changes?.find(t=>t.plan_id===e.id);return t&&t.interval===k.selectedInterval?t:null},j[6]=k.selectedInterval,j[7]=M?.upcoming_changes,j[8]=r):r=j[8];let z=r;j[9]!==I?(i=e=>!!I&&(I.data?.plan_id===e.id||void 0),j[9]=I,j[10]=i):i=j[10];let K=i;j[11]!==k.selectedInterval||j[12]!==I.data?.interval||j[13]!==K||j[14]!==z?(l=e=>{if(!e)return{isEnabled:!1,buttonText:"Select plan"};let a=z(e);return a?{isEnabled:!1,buttonText:(0,t.jsxs)(t.Fragment,{children:["Starting"," ",(0,t.jsx)(e8.Date,{date:a.scheduled_at,showTooltip:!1})]})}:K(e)?k.selectedInterval===I.data?.interval||e.isFree?{isEnabled:!1,buttonText:"Current plan"}:{isEnabled:!0,buttonText:`Switch to ${"year"===k.selectedInterval?"annual":"monthly"}`}:void 0!==e.action?{isEnabled:!0,buttonText:ts[e.action??"checkout"]}:{isEnabled:!1,buttonText:"Select plan"}},j[11]=k.selectedInterval,j[12]=I.data?.interval,j[13]=K,j[14]=z,j[15]=l):l=j[15],I.data?.interval;let q=l;j[16]!==k.selectedInterval||j[17]!==S||j[18]!==O||j[19]!==E||j[20]!==D||j[21]!==B||j[22]!==F?(s=e=>{if(e){if("cancel"===e.action)return void O();if("checkout"===e.action){F(e.id),S();return}if("switch"===e.action)return void D(e.id,k.selectedInterval);if("downgrade"===e.action)return void E(e.id);if("upgrade"===e.action)return void B(e.id,k.selectedInterval)}},j[16]=k.selectedInterval,j[17]=S,j[18]=O,j[19]=E,j[20]=D,j[21]=B,j[22]=F,j[23]=s):s=j[23];let H=s;j[24]!==R.hobby||j[25]!==q?(c=q(R.hobby),j[24]=R.hobby,j[25]=q,j[26]=c):c=j[26];let{isEnabled:G,buttonText:V}=c;j[27]!==R.pro||j[28]!==q?(o=q(R.pro),j[27]=R.pro,j[28]=q,j[29]=o):o=j[29];let{isEnabled:W,buttonText:$}=o;j[30]!==R.business||j[31]!==q?(d=q(R.business),j[30]=R.business,j[31]=q,j[32]=d):d=j[32];let{isEnabled:X,buttonText:Z}=d;return j[33]!==v?(u=(0,t.jsx)(ek.ChoosePlanDialogHeader,{onClose:v}),j[33]=v,j[34]=u):u=j[34],j[35]!==I.data?.is_free?(m=I.data?.is_free&&(0,t.jsx)(eE,{}),j[35]=I.data?.is_free,j[36]=m):m=j[36],j[37]!==k.selectedAddOns.length||j[38]!==k.selectedPlanId?(h=k.selectedAddOns.length>0&&null===k.selectedPlanId&&(0,t.jsx)(eR.Banner,{variant:"info",children:"You must select a paid plan before enabling any add-ons. Please select a plan and then continue to the next screen."}),j[37]=k.selectedAddOns.length,j[38]=k.selectedPlanId,j[39]=h):h=j[39],j[40]!==Z||j[41]!==R.business||j[42]!==R.hobby||j[43]!==R.pro||j[44]!==V||j[45]!==X||j[46]!==G||j[47]!==U||j[48]!==W||j[49]!==H||j[50]!==$?(p=U?(0,t.jsx)(tu,{}):(0,t.jsxs)("div",{className:"flex w-full flex-wrap gap-5 lg:flex-nowrap",children:[R.hobby&&(0,t.jsx)(tl,{plan:R.hobby,isEnabled:G,buttonText:V,onClick:()=>{H(R.hobby)}}),R.pro&&(0,t.jsx)(tl,{plan:R.pro,isEnabled:W,buttonText:$,onClick:()=>{H(R.pro)}}),R.business&&(0,t.jsx)(tl,{plan:R.business,isEnabled:X,buttonText:Z,onClick:()=>{H(R.business)}})]}),j[40]=Z,j[41]=R.business,j[42]=R.hobby,j[43]=R.pro,j[44]=V,j[45]=X,j[46]=G,j[47]=U,j[48]=W,j[49]=H,j[50]=$,j[51]=p):p=j[51],j[52]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)(to,{}),j[52]=f):f=j[52],j[53]!==m||j[54]!==h||j[55]!==p?(x=(0,t.jsxs)("div",{className:"flex flex-col gap-5 px-5 py-6",children:[m,h,p,f]}),j[53]=m,j[54]=h,j[55]=p,j[56]=x):x=j[56],j[57]===Symbol.for("react.memo_cache_sentinel")?(y=(0,t.jsx)(td,{}),j[57]=y):y=j[57],j[58]!==x?(g=(0,t.jsxs)(ek.ChoosePlanDialogBody,{children:[x,y]}),j[58]=x,j[59]=g):g=j[59],j[60]!==u||j[61]!==g?(b=(0,t.jsxs)(ek.ChoosePlanDialogContent,{children:[u,g]}),j[60]=u,j[61]=g,j[62]=b):b=j[62],b}function to(){let e,a,n,r=(0,T.c)(3);return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"flex flex-col rounded-lg border-[1px] border-ceramic-gray/8 bg-ceramic-gray-100 p-3 dark:bg-ceramic-gray/8",children:(0,t.jsx)(te.BuildingIcon,{className:"size-6 text-ceramic-secondary"})})}),r[0]=e):e=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e,(0,t.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,t.jsx)("div",{className:"text-ceramic-label-1 text-ceramic-primary",children:"Enterprise"}),(0,t.jsx)("div",{className:"text-ceramic-body-3 text-ceramic-secondary",children:"Support and uptime SLAs, premium support, price smoothing, and more"})]})]}),r[1]=a):a=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(R.ActionCard,{className:"w-full",children:(0,t.jsx)(R.CardBody,{children:(0,t.jsxs)("div",{className:"flex flex-wrap justify-between gap-6 p-5",children:[a,(0,t.jsx)("div",{className:"flex w-full items-center md:w-auto",children:(0,t.jsx)(S.Button,{variant:"secondary",href:"https://clerk.com/contact/sales",target:"_blank",rel:"noopener noreferrer","aria-label":"Contact sales team (opens in new tab)",className:"w-full justify-center",children:(0,t.jsx)("div",{className:"px-6 text-ceramic-secondary",children:"Contact us"})})})]})})}),r[2]=n):n=r[2],n}function td(){let e,a=(0,T.c)(1);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"border-t border-ceramic-bg-separator px-5 py-3",children:(0,t.jsx)("div",{className:"flex items-center justify-end",children:(0,t.jsx)(tt.default,{href:"https://clerk.com/pricing#faq",target:"_blank",rel:"noopener noreferrer",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"text-ceramic-label-3 text-ceramic-secondary",children:"View FAQs"}),(0,t.jsx)(e9.ArrowRightIcon,{className:"size-4 text-ceramic-secondary"})]})})})}),a[0]=e):e=a[0],e}function tu(){let e,a=(0,T.c)(1);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)("div",{className:"flex w-full flex-wrap gap-5 lg:flex-nowrap",children:[(0,t.jsx)(D.Skeleton,{className:"h-[484px] w-full rounded-lg"}),(0,t.jsx)(D.Skeleton,{className:"h-[484px] w-full rounded-lg"}),(0,t.jsx)(D.Skeleton,{className:"h-[484px] w-full rounded-lg"})]}),a[0]=e):e=a[0],e}},892488,e=>{"use strict";e.s(["UpgradeSuccessfulStep",()=>p]);var t=e.i(73677),a=e.i(521322),n=e.i(70038),r=e.i(109821),i=e.i(747970),l=e.i(141226),s=e.i(933401),c=e.i(103910),o=e.i(133310),d=e.i(927800),u=e.i(131733),m=e.i(475609);let h=[{icon:s.MultiFactorIcon,name:"Setup multi-factor auth",description:"Add MFA to your app for improved security",buttonText:"Setup MFA",docsPath:"configure/auth-strategies/sign-up-sign-in-options#multi-factor-authentication"},{icon:l.GlobeIcon,name:"Add satellite domains",description:"Add satellite domains to your authentication flow",buttonText:"Add satellite domains",docsPath:"dashboard/dns-domains/satellite-domains"},{icon:o.StackedRectangleIcon,name:"Setup custom session duration",description:"Use custom session duration for your users",buttonText:"Custom sessions",docsPath:"secure/session-options#maximum-lifetime"},{icon:c.SsoIcon,name:"Add enterprise connections",description:"Utilize unlimited SAML and OIDC connections",buttonText:"Enterprise connections",docsPath:"configure/auth-strategies/enterprise-connections/authentication-flows"}];function p(e){let i,l,s,c,o,p,x,y,g,b=(0,a.c)(18),{onClose:j}=e,{currentSubscription:v,getPlanNameById:w}=(0,m.useNewPricing)(),S=v.data?.plan_id;b[0]!==w||b[1]!==S?(i=w(S),b[0]=w,b[1]=S,b[2]=i):i=b[2];let N=i;b[3]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)("div",{className:(0,d.cx)("pointer-events-none absolute left-[calc(50%-280px)] top-[-11px] z-0 h-[474px] w-[609px] bg-[url(/assets/pricing/logo-bg-upgrade-success.png)] bg-contain bg-no-repeat","dark:opacity-15",'after:absolute after:inset-0 after:max-h-[185px] after:min-w-full after:rounded-[609px] after:bg-[rgb(108_71_255/0.05)] after:blur-[100px] after:content-[""]'),"aria-hidden":"true"}),b[3]=l):l=b[3];let _=!N;return b[4]!==N||b[5]!==_?(s=(0,t.jsx)("div",{children:(0,t.jsx)(u.PlanBadge,{planName:N,isLoading:_})}),b[4]=N,b[5]=_,b[6]=s):s=b[6],b[7]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("div",{className:"text-ceramic-label-1",children:"Your plan has been upgraded"}),(0,t.jsx)("div",{className:"mt-0.5 text-ceramic-body-2 text-ceramic-secondary",children:"Learn more about a few of the features you have access to"})]}),b[7]=c):c=b[7],b[8]!==s?(o=(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[s,c]})}),b[8]=s,b[9]=o):o=b[9],b[10]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)("div",{className:"relative z-10 grid grid-cols-1 gap-4 md:grid-cols-2",children:h.map(f)}),b[10]=p):p=b[10],b[11]!==o?(x=(0,t.jsx)(r.DialogContent,{children:(0,t.jsx)(r.DialogBody,{children:(0,t.jsxs)("div",{className:"relative",children:[l,(0,t.jsxs)("div",{className:"relative z-10 flex flex-col gap-6 p-5",children:[o,p]})]})})}),b[11]=o,b[12]=x):x=b[12],b[13]!==j?(y=(0,t.jsx)(r.DialogFooter,{secondaryButton:null,button:(0,t.jsx)(n.Button,{onPress:j,className:"w-full",children:"Done"})}),b[13]=j,b[14]=y):y=b[14],b[15]!==x||b[16]!==y?(g=(0,t.jsxs)(t.Fragment,{children:[x,y]}),b[15]=x,b[16]=y,b[17]=g):g=b[17],g}function f(e){return(0,t.jsx)(x,{feature:e},e.name)}function x(e){let r,l,s,c,o,d=(0,a.c)(14),{feature:u}=e;d[0]!==u.icon?(r=(0,t.jsx)(u.icon,{className:"size-8 text-ceramic-secondary","aria-hidden":"true"}),d[0]=u.icon,d[1]=r):r=d[1],d[2]!==u.name?(l=(0,t.jsx)("div",{className:"mt-3 text-ceramic-label-2",children:u.name}),d[2]=u.name,d[3]=l):l=d[3],d[4]!==u.description?(s=(0,t.jsx)("div",{className:"mt-1 text-ceramic-body-2 text-ceramic-secondary",children:u.description}),d[4]=u.description,d[5]=s):s=d[5];let m=`https://clerk.com/docs/guides/${u.docsPath}`;return d[6]!==u.buttonText||d[7]!==m?(c=(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(n.Button,{variant:"secondary",size:"md",emphasis:"high",icon:i.BookIcon,iconPosition:"start",href:m,target:"_blank",rel:"noopener",children:u.buttonText})}),d[6]=u.buttonText,d[7]=m,d[8]=c):c=d[8],d[9]!==r||d[10]!==l||d[11]!==s||d[12]!==c?(o=(0,t.jsxs)("div",{className:"flex-start flex flex-col rounded-xl border bg-ceramic-bg-main p-6 shadow-md",children:[r,l,s,c]}),d[9]=r,d[10]=l,d[11]=s,d[12]=c,d[13]=o):o=d[13],o}},475609,e=>{"use strict";e.s(["NewPricingProvider",()=>ez,"useNewPricing",()=>eq],475609);var t=e.i(73677),a=e.i(521322),n=e.i(224037),r=e.i(362903),i=e.i(497288),l=e.i(275630),s=e.i(758040),c=e.i(419551),o=e.i(957298),d=e.i(237206),u=e.i(364890),m=e.i(184260),h=e.i(60229),p=e.i(874556),f=e.i(290678),x=e.i(580539),y=e.i(943908),g=e.i(976952),b=e.i(892488);function j(e){let n,r,i,l,s,c,o=(0,a.c)(21),{isOpen:d,currentStep:u,onClose:m,onComplete:h,onStepChange:j}=e,v=3===u?"md":"lg";return o[0]!==m?(n=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(g.ChoosePlanStep,{onClose:m})}),o[0]=m,o[1]=n):n=o[1],o[2]!==m?(r=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(y.AddOnsStep,{onClose:m})}),o[2]=m,o[3]=r):r=o[3],o[4]!==m||o[5]!==h?(i=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(x.CheckoutStep,{onClose:m,onComplete:h})}),o[4]=m,o[5]=h,o[6]=i):i=o[6],o[7]!==m?(l=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(b.UpgradeSuccessfulStep,{onClose:m})}),o[7]=m,o[8]=l):l=o[8],o[9]!==u||o[10]!==j||o[11]!==n||o[12]!==r||o[13]!==i||o[14]!==l?(s=(0,t.jsxs)(p.Flow,{onStepChange:j,currentStep:u,initialStep:0,animated:!0,children:[n,r,i,l]}),o[9]=u,o[10]=j,o[11]=n,o[12]=r,o[13]=i,o[14]=l,o[15]=s):s=o[15],o[16]!==d||o[17]!==m||o[18]!==v||o[19]!==s?(c=(0,t.jsx)(f.ChoosePlanDialog,{isOpen:d,onClose:m,size:v,children:s}),o[16]=d,o[17]=m,o[18]=v,o[19]=s,o[20]=c):c=o[20],c}var v=e.i(721376),w=e.i(70038),S=e.i(109821),N=e.i(503666),_=e.i(357707),A=e.i(988456),P=e.i(706537),C=e.i(746264),I=e.i(536977),k=e.i(438439),O=e.i(104477),D=e.i(942976),B=e.i(788884),E=e.i(238750),T=e.i(893018),F=e.i(247854),R=e.i(4078),U=e.i(122914),Q=e.i(186177),L=e.i(927800);function M(e){let n,r,i,l,s,c,o,d,u,m,h,p=(0,a.c)(23),{sections:f,beforePlanName:x,afterPlanName:y}=e;return p[0]!==x?(n=x&&(0,t.jsx)(F.Badge,{variant:"secondary",className:"mb-6",children:x}),p[0]=x,p[1]=n):n=p[1],p[2]!==f?(r=f.map(q),p[2]=f,p[3]=r):r=p[3],p[4]!==r?(i=(0,t.jsx)("div",{className:"flex flex-col gap-3",children:r}),p[4]=r,p[5]=i):i=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)("div",{className:"pointer-events-none absolute right-[-11px] top-[calc(50%-11px)] hidden rounded-sm border bg-ceramic-white p-0.5 shadow dark:border-ceramic-gray-1200 dark:bg-ceramic-gray-1400 md:block",children:(0,t.jsx)(Q.ChevronRightIcon,{className:"size-4 text-ceramic-secondary","aria-hidden":"true"})}),p[6]=l):l=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)("div",{className:"pointer-events-none absolute bottom-[-11px] left-[calc(50%-11px)] rounded-sm border bg-ceramic-white p-0.5 shadow dark:border-ceramic-gray-1200 dark:bg-ceramic-gray-1400 md:hidden",children:(0,t.jsx)(U.ChevronDownIcon,{className:"size-4 text-ceramic-secondary","aria-hidden":"true"})}),p[7]=s):s=p[7],p[8]!==n||p[9]!==i?(c=(0,t.jsxs)("div",{className:"relative w-full border-b-[1px] px-4 pb-6 pt-4 dark:border-ceramic-gray-1200 md:border-b-0 md:border-r-[1px] md:px-6 md:pb-4 md:pt-4",children:[n,i,l,s]}),p[8]=n,p[9]=i,p[10]=c):c=p[10],p[11]!==y?(o=y&&(0,t.jsx)(F.Badge,{variant:"negative",className:"mb-6",children:y}),p[11]=y,p[12]=o):o=p[12],p[13]!==f?(d=f.map(z),p[13]=f,p[14]=d):d=p[14],p[15]!==d?(u=(0,t.jsx)("div",{className:"flex flex-col gap-3",children:d}),p[15]=d,p[16]=u):u=p[16],p[17]!==o||p[18]!==u?(m=(0,t.jsxs)("div",{className:"w-full px-4 pb-4 pt-6 md:px-6 md:pb-4 md:pt-4",children:[o,u]}),p[17]=o,p[18]=u,p[19]=m):m=p[19],p[20]!==m||p[21]!==c?(h=(0,t.jsxs)("div",{className:"flex flex-col items-center rounded-md border dark:border-ceramic-gray-1200 md:flex-row",children:[c,m]}),p[20]=m,p[21]=c,p[22]=h):h=p[22],h}function z(e){return(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"text-ceramic-label-2 text-ceramic-negative",children:[e.afterTitle,":"]}),(0,t.jsx)("ul",{children:e.features.map(K)})]},e.afterTitle)}function K(e){return(0,t.jsx)("li",{children:(0,t.jsxs)("span",{className:"flex items-start gap-1",children:[(0,t.jsx)(e.afterIcon,{className:"mt-0.5 size-4 text-ceramic-negative","aria-hidden":"true"}),(0,t.jsx)("span",{className:(0,L.cx)("text-ceramic-body-2 text-ceramic-negative",e.afterTextStrikethrough&&"line-through"),children:e.afterText})]})},e.afterText)}function q(e){return(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("div",{className:"text-ceramic-label-2",children:[e.beforeTitle,":"]}),(0,t.jsx)("ul",{children:e.features.map(Y)})]},e.beforeTitle)}function Y(e){return(0,t.jsx)("li",{children:(0,t.jsxs)("span",{className:"flex items-start gap-1",children:[(0,t.jsx)(R.CheckmarkCircleIcon,{className:"mt-0.5 size-4 text-ceramic-secondary","aria-hidden":"true"}),(0,t.jsx)("span",{className:"text-ceramic-body-2",children:e.beforeText})]})},e.beforeText)}function H(e){let n,r,i,l,s,c,o,d=(0,a.c)(18),{changeDate:u,changeDateLabel:m,newPriceLabel:h,newPrice:p}=e;if(!u)return null;let f=p&&"border-b border-ceramic-gray-1200";return d[0]!==f?(n=(0,L.cx)("flex w-full justify-between px-2.5 py-2",f),d[0]=f,d[1]=n):n=d[1],d[2]!==m?(r=(0,t.jsx)("div",{className:"text-ceramic-primary",children:m}),d[2]=m,d[3]=r):r=d[3],d[4]!==u?(i=(0,I.formatDate)(new Date(u)),d[4]=u,d[5]=i):i=d[5],d[6]!==i?(l=(0,t.jsx)("div",{className:"text-ceramic-secondary",children:i}),d[6]=i,d[7]=l):l=d[7],d[8]!==n||d[9]!==r||d[10]!==l?(s=(0,t.jsxs)("div",{className:n,children:[r,l]}),d[8]=n,d[9]=r,d[10]=l,d[11]=s):s=d[11],d[12]!==p||d[13]!==h?(c=p&&(0,t.jsxs)("div",{className:"flex w-full justify-between px-2.5 py-2",children:[(0,t.jsx)("div",{className:"text-ceramic-primary",children:h}),(0,t.jsx)("div",{className:"text-ceramic-secondary",children:p})]}),d[12]=p,d[13]=h,d[14]=c):c=d[14],d[15]!==s||d[16]!==c?(o=(0,t.jsxs)("div",{className:"rounded-md border text-ceramic-body-3 dark:border-ceramic-gray-1200",children:[s,c]}),d[15]=s,d[16]=c,d[17]=o):o=d[17],o}function G(e){let n,r,i=(0,a.c)(7),{isOpen:l,onClose:s,onComplete:c}=e;return i[0]!==s||i[1]!==c?(n=(0,t.jsx)(V,{onClose:s,onComplete:c}),i[0]=s,i[1]=c,i[2]=n):n=i[2],i[3]!==l||i[4]!==s||i[5]!==n?(r=(0,t.jsx)(S.Dialog,{isOpen:l,onClose:s,size:"md",children:n}),i[3]=l,i[4]=s,i[5]=n,i[6]=r):r=i[6],r}function V(e){let r,i,l,o,d,u,h,f,x,y,g,b,j,v,w=(0,a.c)(41),{onClose:N,onComplete:_}=e,[A,P]=(0,m.useState)(0),{getToken:C}=(0,s.useAuth)(),{organization:I}=(0,c.useOrganization)(),k=I?.id??"";w[0]!==C||w[1]!==k?(r=(0,n.currentSubscriptionExpandedQuery)(k,{getToken:C}),w[0]=C,w[1]=k,w[2]=r):r=w[2];let D=!!I?.id;w[3]!==r||w[4]!==D?(i={...r,enabled:D},w[3]=r,w[4]=D,w[5]=i):i=w[5];let{data:B}=(0,O.useQuery)(i);w[6]!==A?(l={goToNextStep:()=>P(A+1)},w[6]=A,w[7]=l):l=w[7];let E=ec(l);if(!B){let e;return w[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(es,{}),w[8]=e):e=w[8],e}let T=B.schedule?.renews_at,F=3===A;w[9]!==T||w[10]!==F?(o=(0,t.jsx)($,{billing_end_date:T,isLastStep:F}),w[9]=T,w[10]=F,w[11]=o):o=w[11],w[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(Z,{})}),w[12]=d):d=w[12],w[13]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(ee,{})}),w[13]=u):u=w[13],w[14]!==E?(h=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(et,{form:E})}),w[14]=E,w[15]=h):h=w[15],w[16]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(ei,{})}),w[16]=f):f=w[16],w[17]!==A||w[18]!==h?(x=(0,t.jsx)(S.DialogBody,{children:(0,t.jsx)("div",{children:(0,t.jsxs)(p.Flow,{animated:!0,currentStep:A,onStepChange:P,children:[d,u,h,f]})})}),w[17]=A,w[18]=h,w[19]=x):x=w[19];let R=B.interval??"month",U=B.schedule?.cancels_at;return w[20]!==A||w[21]!==B.plan_id||w[22]!==R||w[23]!==U?(y=(0,t.jsx)(X,{currentStep:A,subInterval:R,cancelsAt:U,currentPlanId:B.plan_id}),w[20]=A,w[21]=B.plan_id,w[22]=R,w[23]=U,w[24]=y):y=w[24],w[25]!==x||w[26]!==y||w[27]!==o?(g=(0,t.jsxs)(S.DialogContent,{children:[o,x,y]}),w[25]=x,w[26]=y,w[27]=o,w[28]=g):g=w[28],w[29]!==A?(b=()=>P(A+1),w[29]=A,w[30]=b):b=w[30],w[31]!==A||w[32]!==E||w[33]!==N||w[34]!==_||w[35]!==b?(j=(0,t.jsx)(W,{form:E,currentStep:A,onClose:N,onNextStep:b,onComplete:_}),w[31]=A,w[32]=E,w[33]=N,w[34]=_,w[35]=b,w[36]=j):j=w[36],w[37]!==E.formProps||w[38]!==g||w[39]!==j?(v=(0,t.jsxs)("form",{...E.formProps,children:[g,j]}),w[37]=E.formProps,w[38]=g,w[39]=j,w[40]=v):v=w[40],v}function W(e){let n,r,i,l,s,c=(0,a.c)(15),{form:o,currentStep:d,onClose:u,onComplete:h,onNextStep:p}=e;switch(d){case 0:n="Go back";break;case 1:case 2:n="Keep Plan";break;default:n=null}let f=n;c[0]!==d||c[1]!==o||c[2]!==h||c[3]!==p?(r=()=>{switch(d){case 0:case 1:return(0,t.jsx)(w.Button,{variant:"negative",onPress:()=>p(),children:"Proceed"},d);case 2:return(0,m.createElement)(w.Button,{variant:"negative",...o.submitButtonProps,key:d},"Cancel plan");case 3:return(0,t.jsx)(w.Button,{onPress:h,children:"Done"},d)}},c[0]=d,c[1]=o,c[2]=h,c[3]=p,c[4]=r):r=c[4];let x=r;return c[5]!==x?(i=x(),c[5]=x,c[6]=i):i=c[6],c[7]!==d||c[8]!==o||c[9]!==u||c[10]!==f?(l=f?(0,t.jsx)(w.Button,{onPress:()=>u(),isDisabled:2===d&&"PENDING"===o.stage,children:f}):null,c[7]=d,c[8]=o,c[9]=u,c[10]=f,c[11]=l):l=c[11],c[12]!==i||c[13]!==l?(s=(0,t.jsx)(S.DialogFooter,{button:i,secondaryButton:l}),c[12]=i,c[13]=l,c[14]=s):s=c[14],s}function $(e){let n,r,i=(0,a.c)(5),{billing_end_date:l,isLastStep:s}=e;i[0]!==l?(n=()=>l?(0,t.jsxs)(t.Fragment,{children:["Your subscription ends on"," ",(0,t.jsx)("span",{className:"text-ceramic-label-3 text-ceramic-primary",children:(0,I.formatDate)(new Date(l))})]}):(0,t.jsx)(t.Fragment,{children:"Your subscription ends at the end of your billing cycle."}),i[0]=l,i[1]=n):n=i[1];let c=n;if(s){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(S.DialogHeader,{title:"Cancellation complete"}),i[2]=e):e=i[2],e}return i[3]!==c?(r=(0,t.jsx)(S.DialogHeader,{title:"Cancel plan",description:c()}),i[3]=c,i[4]=r):r=i[4],r}function X(e){let n,r,i,l=(0,a.c)(10),{currentStep:s,subInterval:c,cancelsAt:o,currentPlanId:d}=e,{getPlanNameById:u}=eq();l[0]!==d||l[1]!==u?(n=u(d)||"current plan",l[0]=d,l[1]=u,l[2]=n):n=l[2];let m=n;if(0===s){let e,a="year"===c?"Usage based features will continue to accrue and be charged to your credit card monthly. If you do not want to accrue any further charges you need to disable all usage based features.":"Usage based features will continue to accrue and be charged to your credit card at the end of your billing cycle. If you do not want to accrue any further charges you need to disable all usage based features.";return l[3]!==a?(e=(0,t.jsx)(S.DialogNotice,{variant:"warning",children:a}),l[3]=a,l[4]=e):e=l[4],e}if(3===s){let e;return l[5]!==o||l[6]!==m?(e=(0,t.jsx)(S.DialogNotice,{variant:"info",icon:C.SpeechBubbleIcon,children:o?(0,t.jsxs)("p",{children:["You will have access to all ",m," features until the end of your billing cycle on ",(0,I.formatDate)(new Date(o)),"."]}):(0,t.jsx)("p",{children:(0,t.jsx)(A.Skeleton,{children:"You will have access to all Pro features until the end of your billing cycle on March 24th, 2099."})})}),l[5]=o,l[6]=m,l[7]=e):e=l[7],e}return l[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(D.default,{href:"https://clerk.com/pricing",target:"_blank",className:"text-ceramic-secondary underline",rel:"noopener noreferrer",children:"pricing page"}),l[8]=r):r=l[8],l[9]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(S.DialogNotice,{icon:C.SpeechBubbleIcon,children:(0,t.jsxs)("p",{children:["If you have questions or concerns about your account please visit our"," ",r," ","or"," ",(0,t.jsx)(D.default,{href:"https://clerk.com/contact/support",target:"_blank",className:"text-ceramic-secondary underline",rel:"noopener noreferrer",children:"contact support"}),"."]})}),l[9]=i):i=l[9],i}function Z(){let e,r,i,l,o,d,u,m,h,p,f,x,y,g,b=(0,a.c)(36),{getPlanNameById:j}=eq(),{getToken:v}=(0,s.useAuth)(),{organization:w}=(0,c.useOrganization)(),S=w?.id??"";b[0]!==v||b[1]!==S?(e=(0,n.currentSubscriptionExpandedQuery)(S,{getToken:v}),b[0]=v,b[1]=S,b[2]=e):e=b[2];let N=!!w?.id;b[3]!==e||b[4]!==N?(r={...e,enabled:N},b[3]=e,b[4]=N,b[5]=r):r=b[5];let{data:_}=(0,O.useQuery)(r);if(!_){let e;return b[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(es,{}),b[6]=e):e=b[6],e}let A=_.interval??"month";b[7]!==_.plan_id||b[8]!==j?(i=j(_.plan_id)||"current plan",b[7]=_.plan_id,b[8]=j,b[9]=i):i=b[9];let P=i,C=`If you cancel your plan, you will continue to have access to all ${P} features until the end of your billing cycle.`;if(b[10]!==P||b[11]!==A||b[12]!==C){let e={month:[C,"You will be billed for any final usage based billing at the end of your billing cycle."],year:[`If you cancel your annual plan, you will continue to have access to all ${P} features until the end of your billing cycle.`,"You will be billed for any usage based billing at the end of each monthly cycle until the end of your annual term."]};d="p-5",l="flex flex-col gap-6",b[20]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)(T.CancelPlanStepBreadcrumbs,{}),b[20]=o):o=b[20],h="flex flex-col gap-1",b[21]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)("p",{children:"What happens if I cancel my plan?"}),b[21]=p):p=b[21],u="list-outside list-disc pl-6",m=e[A].map(J),b[10]=P,b[11]=A,b[12]=C,b[13]=l,b[14]=o,b[15]=d,b[16]=u,b[17]=m,b[18]=h,b[19]=p}else l=b[13],o=b[14],d=b[15],u=b[16],m=b[17],h=b[18],p=b[19];return b[22]!==u||b[23]!==m?(f=(0,t.jsx)("ul",{className:u,children:m}),b[22]=u,b[23]=m,b[24]=f):f=b[24],b[25]!==f||b[26]!==h||b[27]!==p?(x=(0,t.jsxs)("div",{className:h,children:[p,f]}),b[25]=f,b[26]=h,b[27]=p,b[28]=x):x=b[28],b[29]!==l||b[30]!==o||b[31]!==x?(y=(0,t.jsxs)("div",{className:l,children:[o,x]}),b[29]=l,b[30]=o,b[31]=x,b[32]=y):y=b[32],b[33]!==d||b[34]!==y?(g=(0,t.jsx)("div",{className:d,children:y}),b[33]=d,b[34]=y,b[35]=g):g=b[35],g}function J(e,a){return(0,t.jsx)("li",{children:e},a)}function ee(){let e,r,l,o,d,u,m,h,p,f,x,y,g=(0,a.c)(27),{getPlanNameById:b}=eq(),{getToken:j}=(0,s.useAuth)(),{organization:v}=(0,c.useOrganization)(),w=v?.id??"";g[0]!==j||g[1]!==w?(e=(0,n.currentSubscriptionExpandedQuery)(w,{getToken:j}),g[0]=j,g[1]=w,g[2]=e):e=g[2];let S=!!v?.id;g[3]!==e||g[4]!==S?(r={...e,enabled:S},g[3]=e,g[4]=S,g[5]=r):r=g[5];let{data:N}=(0,O.useQuery)(r);g[6]!==N?(l=er(N),g[6]=N,g[7]=l):l=g[7];let{planList:_,addOnsList:A}=l;g[8]!==N?.plan_id||g[9]!==b?(o=b(N?.plan_id)||"Current",g[8]=N?.plan_id,g[9]=b,g[10]=o):o=g[10];let P=o;g[11]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)(T.CancelPlanStepBreadcrumbs,{}),g[11]=d):d=g[11],g[12]===Symbol.for("react.memo_cache_sentinel")?(u=(0,i.getStaticPlanNameById)(i.PRICING_HOBBY_PLAN_ID),g[12]=u):u=g[12];let C=`${P} plan features`;g[13]===Symbol.for("react.memo_cache_sentinel")?(m=(0,i.getStaticPlanNameById)(i.PRICING_HOBBY_PLAN_ID),g[13]=m):m=g[13],g[14]!==_||g[15]!==C?(h={features:_,beforeTitle:C,afterTitle:`${m} plan features`},g[14]=_,g[15]=C,g[16]=h):h=g[16],g[17]!==A?(p=A.length>0?[{features:A,beforeTitle:"With enhancements",afterTitle:"Without enhancements"}]:[],g[17]=A,g[18]=p):p=g[18],g[19]!==h||g[20]!==p?(f=(0,t.jsx)(M,{beforePlanName:"Current plan",afterPlanName:`${u} plan`,sections:[h,...p]}),g[19]=h,g[20]=p,g[21]=f):f=g[21];let I=N?.schedule?.renews_at??null;return g[22]!==I?(x=(0,t.jsx)(H,{changeDate:I,changeDateLabel:"Plan change date",newPriceLabel:"New price after cancellation"}),g[22]=I,g[23]=x):x=g[23],g[24]!==f||g[25]!==x?(y=(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[d,(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[f,x]})]})}),g[24]=f,g[25]=x,g[26]=y):y=g[26],y}function et(e){let n,r,i,l,s,c,o,d,u=(0,a.c)(18),{form:m}=e;u[0]===Symbol.for("react.memo_cache_sentinel")?(n=[{label:"It's too expensive",id:"pricing"},{label:"I'm missing features I need",id:"missingFeatures"},{label:"I ran into technical issues or performance problems",id:"techPerfIssues"},{label:"I'm shutting down my project and no longer need Clerk",id:"shuttingDownProject"},{label:"My project is paused / I'm not ready yet",id:"notReadyYet"},{label:"Something else (share details below)",id:"other"}],u[0]=n):n=u[0];let h=n;return u[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(T.CancelPlanStepBreadcrumbs,{}),u[1]=r):r=u[1],u[2]!==m.stage?(i=e=>(0,t.jsxs)(_.SelectField,{id:e.name,label:"Please tell us why you are cancelling",isOptional:!0,name:e.name,selectedKey:e.state.value,onSelectionChange:t=>e.handleChange(t),isDisabled:"PENDING"===m.stage,children:[(0,t.jsx)(w.Button,{children:(0,t.jsx)("span",{className:"truncate",children:h.find(t=>t.id===e.state.value)?.label||"Select a reason..."})}),(0,t.jsx)(N.Popover,{children:(0,t.jsx)(N.ListBox,{items:h.map(en),children:ea})})]}),u[2]=m.stage,u[3]=i):i=u[3],u[4]!==m.Field||u[5]!==i?(l=(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(m.Field,{name:"reason",children:i})}),u[4]=m.Field,u[5]=i,u[6]=l):l=u[6],u[7]!==m.stage?(s=e=>(0,t.jsx)(P.TextField,{label:"Can you tell us more?",placeholder:"Type your answer here...",name:e.name,value:e.state.value,onChange:e.handleChange,isOptional:!0,isDisabled:"PENDING"===m.stage,children:(0,t.jsx)(P.TextArea,{rows:4,className:"resize-none"})}),u[7]=m.stage,u[8]=s):s=u[8],u[9]!==m.Field||u[10]!==s?(c=(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(m.Field,{name:"additionalFeedback",children:s})}),u[9]=m.Field,u[10]=s,u[11]=c):c=u[11],u[12]!==l||u[13]!==c?(o=(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[l,c]}),u[12]=l,u[13]=c,u[14]=o):o=u[14],u[15]!==m.notices||u[16]!==o?(d=(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[r,o,m.notices]})}),u[15]=m.notices,u[16]=o,u[17]=d):d=u[17],d}function ea(e){return(0,t.jsx)(N.ListBoxItem,{children:e.label})}function en(e){return{label:e.label,id:e.id}}let er=e=>{let t=(0,i.getStaticPlanOrAddOnDowngradeFeatures)(i.PRICING_PRO_PLAN_ID),a=(0,i.getStaticPlanOrAddOnDowngradeFeatures)(i.PRICING_BUSINESS_PLAN_ID),n=e?.plan_id===i.PRICING_PRO_PLAN_ID?t:[...t,...a],r=[];return e?.active_addons?.forEach(e=>{let t=(0,i.getStaticPlanOrAddOnDowngradeFeatures)(e.id);r=[...r,...t]}),{planList:[...n].sort((e,t)=>el(e.featureImportance,t.featureImportance)).slice(0,5),addOnsList:[...r].sort((e,t)=>el(e.featureImportance,t.featureImportance)).slice(0,5)}},ei=()=>{let e,n=(0,a.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(S.DialogSection,{children:(0,t.jsxs)("div",{className:"text-ceramic-body-2",children:["You have been successfully downgraded to the"," ",(0,t.jsx)("span",{className:"text-ceramic-label-2 text-ceramic-primary",children:(0,i.getStaticPlanNameById)(i.PRICING_HOBBY_PLAN_ID)})," ","plan."]})}),n[0]=e):e=n[0],e},el=(e,t)=>{let a={critical:0,high:1,medium:2,low:3};return a[e]-a[t]},es=()=>{let e,n,r,i,l,s,c=(0,a.c)(6);return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(S.DialogHeader,{title:"Cancel plan"}),c[0]=e):e=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(A.Skeleton,{children:(0,t.jsx)(T.CancelPlanStepBreadcrumbs,{})}),c[1]=n):n=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(A.Skeleton,{children:"What happens if I cancel my plan?"}),c[2]=r):r=c[2],c[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(S.DialogBody,{className:"p-5",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[n,(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[r,(0,t.jsxs)("ul",{className:"list-outside list-disc pl-6",children:[(0,t.jsx)("li",{children:(0,t.jsx)(A.Skeleton,{children:"If you cancel your plan, you will continue to have access to all paid features until the end of your billing cycle."})}),(0,t.jsx)("li",{children:(0,t.jsx)(A.Skeleton,{children:"You will be billed for any usage based billing at the end of each monthly cycle until the end of your plan."})})]})]})]})}),c[3]=i):i=c[3],c[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsxs)(S.DialogContent,{children:[e,i,(0,t.jsx)(S.DialogNotice,{variant:"warning",children:(0,t.jsx)(A.Skeleton,{children:"Usage based features will continue to accrue and be charged to your credit card monthly. If you do not want to accrue any further charges you need to disable all usage based features."})})]}),c[4]=l):l=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsxs)(t.Fragment,{children:[l,(0,t.jsx)(S.DialogFooter,{button:(0,t.jsx)(w.Button,{variant:"negative",isDisabled:!0,children:"Proceed"}),secondaryButton:(0,t.jsx)(w.Button,{isDisabled:!0,children:"Go back"})})]}),c[5]=s):s=c[5],s},ec=e=>{let t,r,l,o,u,m,h=(0,a.c)(19),{goToNextStep:p}=e,{getToken:f,userId:x}=(0,s.useAuth)(),y=(0,d.useQueryClient)(),{organization:g}=(0,c.useOrganization)(),{track:b}=(0,E.useAnalytics)(),j=g?.id??"";h[0]!==f||h[1]!==j?(t=(0,n.currentSubscriptionExpandedQuery)(j,{getToken:f}),h[0]=f,h[1]=j,h[2]=t):t=h[2];let w=!!g?.id;h[3]!==t||h[4]!==w?(r={...t,enabled:w},h[3]=t,h[4]=w,h[5]=r):r=h[5];let{data:S}=(0,O.useQuery)(r);h[6]!==f?(l={mutationFn:e=>{let{organizationId:t}=e;return(0,n.pricingCancelCurrentSubscription)(t,{getToken:f})}},h[6]=f,h[7]=l):l=h[7];let{mutateAsync:N}=(0,k.useMutation)(l);return h[8]===Symbol.for("react.memo_cache_sentinel")?(o={reason:"",additionalFeedback:""},h[8]=o):o=h[8],h[9]!==N||h[10]!==S?.active_addons||h[11]!==S?.plan_id||h[12]!==p||h[13]!==g?.id||h[14]!==y||h[15]!==b||h[16]!==x?(u={defaultValues:o,onSubmit:async e=>{let{value:t}=e,a=g?.id,n=S?.plan_id,r=S?.active_addons?.map(eo)||[];if(!a)throw Error("Organization ID is required");if(await N({organizationId:a}),t.reason||t.additionalFeedback)try{b("Dashboard_Billing Screen_Plan Downgrade Survey Submitted",{userId:x,organizationId:a,newPlan:i.PRICING_HOBBY_PLAN_ID,previousPlan:n,addOns:r,...t}),B.default.capture("Dashboard_Billing Screen_Plan Downgrade Survey Submitted",{userId:x,organizationId:a,newPlan:i.PRICING_HOBBY_PLAN_ID,previousPlan:n,addOns:r,...t})}catch{}await Promise.all([y.invalidateQueries({queryKey:["pricingCurrentSubscription"]}),y.invalidateQueries({queryKey:["currentSubscriptionExpanded"]}),y.invalidateQueries({queryKey:["pricingPlans"]}),y.invalidateQueries({queryKey:["instance"]}),y.invalidateQueries({queryKey:["userSettings"]})]),p()}},h[9]=N,h[10]=S?.active_addons,h[11]=S?.plan_id,h[12]=p,h[13]=g?.id,h[14]=y,h[15]=b,h[16]=x,h[17]=u):u=h[17],h[18]===Symbol.for("react.memo_cache_sentinel")?(m={fallbackErrorMessage:"Failed to cancel your plan",closeOnComplete:!1},h[18]=m):m=h[18],(0,v.useDialogForm)(u,m)};function eo(e){return e.id}function ed(e){let n,r,i=(0,a.c)(9),{isOpen:l,previousPlan:s,newPlan:c,onClose:o,onComplete:d}=e;return i[0]!==c||i[1]!==o||i[2]!==d||i[3]!==s?(n=(0,t.jsx)(eu,{onClose:o,onComplete:d,previousPlan:s,newPlan:c}),i[0]=c,i[1]=o,i[2]=d,i[3]=s,i[4]=n):n=i[4],i[5]!==l||i[6]!==o||i[7]!==n?(r=(0,t.jsx)(S.Dialog,{isOpen:l,onClose:o,size:"md",children:n}),i[5]=l,i[6]=o,i[7]=n,i[8]=r):r=i[8],r}function eu(e){let r,i,l,o,d,u,h,f,x,y,g,b,j,v,w=(0,a.c)(51),{onClose:N,onComplete:_,previousPlan:A,newPlan:P}=e,[C,I]=(0,m.useState)(0),{getToken:k}=(0,s.useAuth)(),{organization:D}=(0,c.useOrganization)(),B=D?.id??"";w[0]!==k||w[1]!==B?(r=(0,n.currentSubscriptionExpandedQuery)(B,{getToken:k}),w[0]=k,w[1]=B,w[2]=r):r=w[2];let E=!!D?.id;w[3]!==r||w[4]!==E?(i={...r,enabled:E},w[3]=r,w[4]=E,w[5]=i):i=w[5];let{data:T}=(0,O.useQuery)(i);w[6]!==C?(l=()=>I(C+1),w[6]=C,w[7]=l):l=w[7],w[8]!==P||w[9]!==l?(o={goToNextStep:l,newPlan:P},w[8]=P,w[9]=l,w[10]=o):o=w[10];let F=ev(o);if(!T){let e;return w[11]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(ej,{}),w[11]=e):e=w[11],e}let R=2===C,U=P?.name;w[12]!==R||w[13]!==U?(d=(0,t.jsx)(ex,{isLastStep:R,newPlanName:U}),w[12]=R,w[13]=U,w[14]=d):d=w[14],w[15]!==A?(u=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(em,{previousPlan:A})}),w[15]=A,w[16]=u):u=w[16],w[17]!==F||w[18]!==P?(h=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(ep,{form:F,newPlan:P})}),w[17]=F,w[18]=P,w[19]=h):h=w[19],w[20]!==P||w[21]!==A?(f=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(ef,{previousPlan:A,newPlan:P})}),w[20]=P,w[21]=A,w[22]=f):f=w[22],w[23]!==C||w[24]!==u||w[25]!==h||w[26]!==f?(x=(0,t.jsx)(S.DialogBody,{children:(0,t.jsx)("div",{children:(0,t.jsxs)(p.Flow,{animated:!0,currentStep:C,onStepChange:I,children:[u,h,f]})})}),w[23]=C,w[24]=u,w[25]=h,w[26]=f,w[27]=x):x=w[27];let Q=T.interval??"month",L=T.schedule?.renews_at,M=A?.name;return w[28]!==C||w[29]!==Q||w[30]!==L||w[31]!==M?(y=(0,t.jsx)(eg,{currentStep:C,subInterval:Q,renewsAt:L,previousPlanName:M}),w[28]=C,w[29]=Q,w[30]=L,w[31]=M,w[32]=y):y=w[32],w[33]!==x||w[34]!==y||w[35]!==d?(g=(0,t.jsxs)(S.DialogContent,{children:[d,x,y]}),w[33]=x,w[34]=y,w[35]=d,w[36]=g):g=w[36],w[37]!==C?(b=()=>I(C+1),w[37]=C,w[38]=b):b=w[38],w[39]!==C||w[40]!==F||w[41]!==P||w[42]!==N||w[43]!==_||w[44]!==A||w[45]!==b?(j=(0,t.jsx)(ey,{form:F,currentStep:C,onClose:N,onNextStep:b,onComplete:_,previousPlan:A,newPlan:P}),w[39]=C,w[40]=F,w[41]=P,w[42]=N,w[43]=_,w[44]=A,w[45]=b,w[46]=j):j=w[46],w[47]!==F.formProps||w[48]!==g||w[49]!==j?(v=(0,t.jsxs)("form",{...F.formProps,children:[g,j]}),w[47]=F.formProps,w[48]=g,w[49]=j,w[50]=v):v=w[50],v}function em(e){let r,i,l,o,d,u,m,h,p,f,x,y,g,b=(0,a.c)(33),{previousPlan:j}=e,{getToken:v}=(0,s.useAuth)(),{organization:w}=(0,c.useOrganization)(),S=w?.id??"";b[0]!==v||b[1]!==S?(r=(0,n.currentSubscriptionExpandedQuery)(S,{getToken:v}),b[0]=v,b[1]=S,b[2]=r):r=b[2];let N=!!w?.id;b[3]!==r||b[4]!==N?(i={...r,enabled:N},b[3]=r,b[4]=N,b[5]=i):i=b[5];let{data:_}=(0,O.useQuery)(i);if(!_){let e;return b[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(ej,{}),b[6]=e):e=b[6],e}let A=_.interval??"month",P=j?.name||"current",C=`If you downgrade your plan, you will continue to have access to all ${P} features until the end of your billing cycle.`;if(b[7]!==P||b[8]!==A||b[9]!==C){let e={month:[C,"You will be billed for any final usage based billing at the end of your billing cycle."],year:[`If you downgrade your annual plan, you will continue to have access to all ${P} features until the end of your billing cycle.`,"You will be billed for any usage based billing at the end of each monthly cycle until the end of your annual term."]};d="p-5",l="flex flex-col gap-6",b[17]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)(T.DowngradePlanStepBreadcrumbs,{}),b[17]=o):o=b[17],h="flex flex-col gap-1",b[18]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)("p",{children:"What happens if I downgrade my plan?"}),b[18]=p):p=b[18],u="list-outside list-disc pl-6",m=e[A].map(eh),b[7]=P,b[8]=A,b[9]=C,b[10]=l,b[11]=o,b[12]=d,b[13]=u,b[14]=m,b[15]=h,b[16]=p}else l=b[10],o=b[11],d=b[12],u=b[13],m=b[14],h=b[15],p=b[16];return b[19]!==u||b[20]!==m?(f=(0,t.jsx)("ul",{className:u,children:m}),b[19]=u,b[20]=m,b[21]=f):f=b[21],b[22]!==f||b[23]!==h||b[24]!==p?(x=(0,t.jsxs)("div",{className:h,children:[p,f]}),b[22]=f,b[23]=h,b[24]=p,b[25]=x):x=b[25],b[26]!==l||b[27]!==o||b[28]!==x?(y=(0,t.jsxs)("div",{className:l,children:[o,x]}),b[26]=l,b[27]=o,b[28]=x,b[29]=y):y=b[29],b[30]!==d||b[31]!==y?(g=(0,t.jsx)("div",{className:d,children:y}),b[30]=d,b[31]=y,b[32]=g):g=b[32],g}function eh(e,a){return(0,t.jsx)("li",{children:e},a)}function ep(e){let r,i,l,o,d,u,m,h,p,f,x=(0,a.c)(27),{form:y,newPlan:g}=e,{getPlanNameById:b}=eq(),{getToken:j}=(0,s.useAuth)(),{organization:v}=(0,c.useOrganization)(),w=v?.id??"";x[0]!==j||x[1]!==w?(r=(0,n.currentSubscriptionExpandedQuery)(w,{getToken:j}),x[0]=j,x[1]=w,x[2]=r):r=x[2];let S=!!v?.id;x[3]!==r||x[4]!==S?(i={...r,enabled:S},x[3]=r,x[4]=S,x[5]=i):i=x[5];let{data:N}=(0,O.useQuery)(i);x[6]!==N?(l=eb(N),x[6]=N,x[7]=l):l=x[7];let _=l,A=g?.name||"Pro";x[8]!==N?.plan_id||x[9]!==b?(o=b(N?.plan_id)||"Current",x[8]=N?.plan_id,x[9]=b,x[10]=o):o=x[10];let P=o;x[11]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)(T.DowngradePlanStepBreadcrumbs,{}),x[11]=d):d=x[11];let C=`${A} plan`,I=`${P} plan features`,k=`${A} plan features`;x[12]!==_||x[13]!==k||x[14]!==I?(u=[{features:_,beforeTitle:I,afterTitle:k}],x[12]=_,x[13]=k,x[14]=I,x[15]=u):u=x[15],x[16]!==u||x[17]!==C?(m=(0,t.jsx)(M,{beforePlanName:"Current plan",afterPlanName:C,sections:u}),x[16]=u,x[17]=C,x[18]=m):m=x[18];let D=N?.schedule?.renews_at??null;return x[19]!==D?(h=(0,t.jsx)(H,{changeDate:D,changeDateLabel:"Plan change date",newPriceLabel:"New price after downgrade"}),x[19]=D,x[20]=h):h=x[20],x[21]!==m||x[22]!==h?(p=(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[m,h]}),x[21]=m,x[22]=h,x[23]=p):p=x[23],x[24]!==y.notices||x[25]!==p?(f=(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[d,p,y.notices]})}),x[24]=y.notices,x[25]=p,x[26]=f):f=x[26],f}function ef(e){let n,r,i,l=(0,a.c)(7),{previousPlan:s,newPlan:c}=e,o=s?.name||"previous",d=c?.name||"new";return l[0]!==o?(n=(0,t.jsx)("span",{className:"text-ceramic-label-2 text-ceramic-primary",children:o}),l[0]=o,l[1]=n):n=l[1],l[2]!==d?(r=(0,t.jsx)("span",{className:"text-ceramic-label-2 text-ceramic-primary",children:d}),l[2]=d,l[3]=r):r=l[3],l[4]!==n||l[5]!==r?(i=(0,t.jsx)(S.DialogSection,{children:(0,t.jsxs)("div",{className:"text-ceramic-body-2",children:["You have successfully downgraded from the"," ",n," ","plan to the"," ",r," ","plan."]})}),l[4]=n,l[5]=r,l[6]=i):i=l[6],i}function ex(e){let n,r=(0,a.c)(3),{isLastStep:i,newPlanName:l}=e;if(i){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(S.DialogHeader,{title:"Downgrade complete"}),r[0]=e):e=r[0],e}let s=`Are you sure you want to downgrade to ${l??"the selected plan"}?`;return r[1]!==s?(n=(0,t.jsx)(S.DialogHeader,{title:"Downgrade plan",description:s}),r[1]=s,r[2]=n):n=r[2],n}function ey(e){let n,r,i,l,s,c=(0,a.c)(17),{form:o,currentStep:d,onClose:u,onNextStep:h,onComplete:p,previousPlan:f,newPlan:x}=e;switch(d){case 0:n="Go back";break;case 1:n="Keep plan";break;default:n=null}let y=n;c[0]!==d||c[1]!==o||c[2]!==x||c[3]!==p||c[4]!==h||c[5]!==f?(r=()=>{switch(d){case 0:return(0,t.jsx)(w.Button,{variant:"negative",onPress:()=>h(),children:"Proceed"},d);case 1:return(0,m.createElement)(w.Button,{variant:"negative",...o.submitButtonProps,key:d},"Downgrade plan");case 2:return(0,t.jsx)(w.Button,{onPress:()=>p(f,x),children:"Done"},d)}},c[0]=d,c[1]=o,c[2]=x,c[3]=p,c[4]=h,c[5]=f,c[6]=r):r=c[6];let g=r;return c[7]!==g?(i=g(),c[7]=g,c[8]=i):i=c[8],c[9]!==d||c[10]!==o||c[11]!==u||c[12]!==y?(l=y?(0,t.jsx)(w.Button,{onPress:()=>u(),isDisabled:1===d&&"PENDING"===o.stage,children:y}):null,c[9]=d,c[10]=o,c[11]=u,c[12]=y,c[13]=l):l=c[13],c[14]!==i||c[15]!==l?(s=(0,t.jsx)(S.DialogFooter,{button:i,secondaryButton:l}),c[14]=i,c[15]=l,c[16]=s):s=c[16],s}function eg(e){let n,r,i=(0,a.c)(7),{currentStep:l,subInterval:s,renewsAt:c,previousPlanName:o}=e,d=o||"current";if(0===l){let e,a="year"===s?"Usage based features will continue to accrue and be charged to your credit card monthly. If you do not want to accrue any further charges you need to disable all usage based features.":"Usage based features will continue to accrue and be charged to your credit card at the end of your billing cycle. If you do not want to accrue any further charges you need to disable all usage based features.";return i[0]!==a?(e=(0,t.jsx)(S.DialogNotice,{variant:"warning",children:a}),i[0]=a,i[1]=e):e=i[1],e}if(2===l){let e;return i[2]!==d||i[3]!==c?(e=(0,t.jsx)(S.DialogNotice,{variant:"info",icon:C.SpeechBubbleIcon,children:c?(0,t.jsxs)("p",{children:["You will have access to all ",d," features until the end of your billing cycle on ",(0,I.formatDate)(new Date(c)),"."]}):(0,t.jsx)("p",{children:(0,t.jsx)(A.Skeleton,{children:"You will have access to all Business features until the end of your billing cycle on March 24th, 2099."})})}),i[2]=d,i[3]=c,i[4]=e):e=i[4],e}return i[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(D.default,{href:"https://clerk.com/pricing",target:"_blank",className:"text-ceramic-secondary underline",rel:"noopener noreferrer",children:"pricing page"}),i[5]=n):n=i[5],i[6]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(S.DialogNotice,{icon:C.SpeechBubbleIcon,children:(0,t.jsxs)("p",{children:["If you have questions or concerns about your account please visit our"," ",n," ","or"," ",(0,t.jsx)(D.default,{href:"https://clerk.com/contact/support",target:"_blank",className:"text-ceramic-secondary underline",rel:"noopener noreferrer",children:"contact support"}),"."]})}),i[6]=r):r=i[6],r}let eb=e=>(0,i.getStaticPlanOrAddOnDowngradeFeatures)(e?.plan_id),ej=()=>{let e,n,r,i,l,s,c=(0,a.c)(6);return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(S.DialogHeader,{title:"Downgrade plan",description:(0,t.jsx)(A.Skeleton,{children:"Are you sure you want to downgrade to Pro?"})}),c[0]=e):e=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(A.Skeleton,{children:(0,t.jsx)(T.DowngradePlanStepBreadcrumbs,{})}),c[1]=n):n=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(A.Skeleton,{children:"What happens if I downgrade my plan?"}),c[2]=r):r=c[2],c[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(S.DialogBody,{className:"p-5",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[n,(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[r,(0,t.jsxs)("ul",{className:"list-outside list-disc pl-6",children:[(0,t.jsx)("li",{children:(0,t.jsx)(A.Skeleton,{children:"If you downgrade your plan, you will continue to have access to all current features until the end of your billing cycle."})}),(0,t.jsx)("li",{children:(0,t.jsx)(A.Skeleton,{children:"You will be billed for any usage based billing at the end of each monthly cycle until the end of your plan."})})]})]})]})}),c[3]=i):i=c[3],c[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsxs)(S.DialogContent,{children:[e,i,(0,t.jsx)(S.DialogNotice,{variant:"warning",children:(0,t.jsx)(A.Skeleton,{children:"Usage based features will continue to accrue and be charged to your credit card monthly. If you do not want to accrue any further charges you need to disable all usage based features."})})]}),c[4]=l):l=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsxs)(t.Fragment,{children:[l,(0,t.jsx)(S.DialogFooter,{button:(0,t.jsx)(w.Button,{variant:"negative",isDisabled:!0,children:"Proceed"}),secondaryButton:(0,t.jsx)(w.Button,{isDisabled:!0,children:"Go back"})})]}),c[5]=s):s=c[5],s},ev=e=>{let t,r,i,l,o,u,m=(0,a.c)(20),{goToNextStep:h,newPlan:p}=e,{getToken:f,userId:x}=(0,s.useAuth)(),y=(0,d.useQueryClient)(),{organization:g}=(0,c.useOrganization)(),{track:b}=(0,E.useAnalytics)(),j=g?.id??"";m[0]!==f||m[1]!==j?(t=(0,n.currentSubscriptionExpandedQuery)(j,{getToken:f}),m[0]=f,m[1]=j,m[2]=t):t=m[2];let w=!!g?.id;m[3]!==t||m[4]!==w?(r={...t,enabled:w},m[3]=t,m[4]=w,m[5]=r):r=m[5];let{data:S}=(0,O.useQuery)(r);m[6]!==S?.interval||m[7]!==f?(i={mutationFn:e=>{let{planId:t,organizationId:a}=e;return(0,n.switchPlanMutation)(a,{planId:t,interval:S?.interval},{getToken:f})}},m[6]=S?.interval,m[7]=f,m[8]=i):i=m[8];let{mutateAsync:N}=(0,k.useMutation)(i);return m[9]===Symbol.for("react.memo_cache_sentinel")?(l={},m[9]=l):l=m[9],m[10]!==S?.plan_id||m[11]!==h||m[12]!==p?.id||m[13]!==g?.id||m[14]!==y||m[15]!==N||m[16]!==b||m[17]!==x?(o={defaultValues:l,onSubmit:async()=>{let e=g?.id,t=p?.id,a=S?.plan_id;if(!e||!t)throw Error("Missing required data");await N({planId:t,organizationId:e});try{b("Dashboard_Billing Screen_Plan Downgrade",{userId:x,organizationId:e,previousPlan:a,newPlan:t}),B.default.capture("Dashboard_Billing Screen_Plan Downgrade",{userId:x,organizationId:e,previousPlan:a,newPlan:t})}catch{}await Promise.all([y.invalidateQueries({queryKey:["pricingCurrentSubscription"]}),y.invalidateQueries({queryKey:["currentSubscriptionExpanded"]}),y.invalidateQueries({queryKey:["pricingPlans"]}),y.invalidateQueries({queryKey:["instance"]}),y.invalidateQueries({queryKey:["userSettings"]})]),h()}},m[10]=S?.plan_id,m[11]=h,m[12]=p?.id,m[13]=g?.id,m[14]=y,m[15]=N,m[16]=b,m[17]=x,m[18]=o):o=m[18],m[19]===Symbol.for("react.memo_cache_sentinel")?(u={fallbackErrorMessage:"Failed to downgrade plan",closeOnComplete:!1},m[19]=u):u=m[19],(0,v.useDialogForm)(o,u)};function ew(e){let n,r,i=(0,a.c)(8),{isOpen:l,onClose:s,onComplete:c,addOn:o}=e;return i[0]!==o||i[1]!==s||i[2]!==c?(n=(0,t.jsx)(eS,{onClose:s,onComplete:c,addOn:o}),i[0]=o,i[1]=s,i[2]=c,i[3]=n):n=i[3],i[4]!==l||i[5]!==s||i[6]!==n?(r=(0,t.jsx)(S.Dialog,{isOpen:l,onClose:s,size:"md",children:n}),i[4]=l,i[5]=s,i[6]=n,i[7]=r):r=i[7],r}function eS(e){let r,i,l,o,d,u,h,f,x,y,g,b,j=(0,a.c)(41),{onClose:v,onComplete:w,addOn:N}=e,[_,A]=(0,m.useState)(0),{getToken:P}=(0,s.useAuth)(),{organization:C}=(0,c.useOrganization)(),I=C?.id??"";j[0]!==P||j[1]!==I?(r=(0,n.currentSubscriptionExpandedQuery)(I,{getToken:P}),j[0]=P,j[1]=I,j[2]=r):r=j[2];let k=!!C?.id;j[3]!==r||j[4]!==k?(i={...r,enabled:k},j[3]=r,j[4]=k,j[5]=i):i=j[5];let{data:D}=(0,O.useQuery)(i);j[6]!==_?(l=()=>A(_+1),j[6]=_,j[7]=l):l=j[7],j[8]!==N||j[9]!==l?(o={goToNextStep:l,addOn:N},j[8]=N,j[9]=l,j[10]=o):o=j[10];let B=ek(o),E=1===_,T=N?.name;j[11]!==E||j[12]!==T?(d=(0,t.jsx)(eA,{isLastStep:E,addOnName:T}),j[11]=E,j[12]=T,j[13]=d):d=j[13],j[14]!==N||j[15]!==B?(u=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(eN,{addOn:N,form:B})}),j[14]=N,j[15]=B,j[16]=u):u=j[16],j[17]!==N?(h=(0,t.jsx)(p.FlowStep,{children:(0,t.jsx)(e_,{addOn:N})}),j[17]=N,j[18]=h):h=j[18],j[19]!==_||j[20]!==u||j[21]!==h?(f=(0,t.jsx)(S.DialogBody,{children:(0,t.jsx)("div",{children:(0,t.jsxs)(p.Flow,{animated:!0,currentStep:_,onStepChange:A,children:[u,h]})})}),j[19]=_,j[20]=u,j[21]=h,j[22]=f):f=j[22];let F=D?.schedule?.renews_at,R=N?.name;j[23]!==_||j[24]!==F||j[25]!==R?(x=(0,t.jsx)(eC,{currentStep:_,renewsAt:F,addOnName:R}),j[23]=_,j[24]=F,j[25]=R,j[26]=x):x=j[26],j[27]!==f||j[28]!==x||j[29]!==d?(y=(0,t.jsxs)(S.DialogContent,{children:[d,f,x]}),j[27]=f,j[28]=x,j[29]=d,j[30]=y):y=j[30];let U=D?.schedule?.renews_at;return j[31]!==_||j[32]!==B||j[33]!==v||j[34]!==w||j[35]!==U?(g=(0,t.jsx)(eP,{form:B,currentStep:_,onClose:v,onComplete:w,renewsAt:U}),j[31]=_,j[32]=B,j[33]=v,j[34]=w,j[35]=U,j[36]=g):g=j[36],j[37]!==B.formProps||j[38]!==y||j[39]!==g?(b=(0,t.jsxs)("form",{...B.formProps,children:[y,g]}),j[37]=B.formProps,j[38]=y,j[39]=g,j[40]=b):b=j[40],b}function eN(e){let r,i,l,o,d,u,m,h=(0,a.c)(18),{addOn:p,form:f}=e,{getToken:x}=(0,s.useAuth)(),{organization:y}=(0,c.useOrganization)(),g=y?.id??"";h[0]!==x||h[1]!==g?(r=(0,n.currentSubscriptionExpandedQuery)(g,{getToken:x}),h[0]=x,h[1]=g,h[2]=r):r=h[2];let b=!!y?.id;h[3]!==r||h[4]!==b?(i={...r,enabled:b},h[3]=r,h[4]=b,h[5]=i):i=h[5];let{data:j}=(0,O.useQuery)(i),v=p?.id;h[6]!==v?(l=eI(v),h[6]=v,h[7]=l):l=h[7];let w=l;h[8]!==w?(o=(0,t.jsx)(M,{sections:[{features:w,beforeTitle:"With enhancement",afterTitle:"Without enhancement"}]}),h[8]=w,h[9]=o):o=h[9];let S=j?.schedule?.renews_at??null;return h[10]!==S?(d=(0,t.jsx)(H,{changeDate:S,changeDateLabel:"Add-on removal date",newPriceLabel:"New price after removal"}),h[10]=S,h[11]=d):d=h[11],h[12]!==o||h[13]!==d?(u=(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[o,d]}),h[12]=o,h[13]=d,h[14]=u):u=h[14],h[15]!==f.notices||h[16]!==u?(m=(0,t.jsx)("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[u,f.notices]})}),h[15]=f.notices,h[16]=u,h[17]=m):m=h[17],m}function e_(e){let n,r=(0,a.c)(2),{addOn:i}=e,l=i?.name||"add-on";return r[0]!==l?(n=(0,t.jsx)(S.DialogSection,{children:(0,t.jsxs)("div",{className:"text-ceramic-body-2",children:["You have successfully removed the"," ",(0,t.jsxs)("span",{className:"text-ceramic-label-2 text-ceramic-primary",children:[l," add-on"]}),"."]})}),r[0]=l,r[1]=n):n=r[1],n}function eA(e){let n,r=(0,a.c)(4),{isLastStep:i,addOnName:l}=e;if(i){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(S.DialogHeader,{title:"Add-on removed"}),r[0]=e):e=r[0],e}let s=`Remove ${l??"add-on"}`,c=`Are you sure you want to remove the ${l??"add-on"}?`;return r[1]!==s||r[2]!==c?(n=(0,t.jsx)(S.DialogHeader,{title:s,description:c}),r[1]=s,r[2]=c,r[3]=n):n=r[3],n}function eP(e){let n,r,i,l,s,c=(0,a.c)(15),{form:o,currentStep:d,onClose:u,onComplete:h,renewsAt:p}=e,f=n=0===d?"Go back":null;c[0]!==d||c[1]!==o||c[2]!==h||c[3]!==p?(r=()=>{switch(d){case 0:return(0,m.createElement)(w.Button,{variant:"negative",...o.submitButtonProps,key:d},"Remove add-on");case 1:return(0,t.jsx)(w.Button,{onPress:()=>h(p??void 0),children:"Done"},d)}},c[0]=d,c[1]=o,c[2]=h,c[3]=p,c[4]=r):r=c[4];let x=r;return c[5]!==x?(i=x(),c[5]=x,c[6]=i):i=c[6],c[7]!==d||c[8]!==o||c[9]!==u||c[10]!==f?(l=f?(0,t.jsx)(w.Button,{onPress:()=>u(),isDisabled:0===d&&"PENDING"===o.stage,children:f}):null,c[7]=d,c[8]=o,c[9]=u,c[10]=f,c[11]=l):l=c[11],c[12]!==i||c[13]!==l?(s=(0,t.jsx)(S.DialogFooter,{button:i,secondaryButton:l}),c[12]=i,c[13]=l,c[14]=s):s=c[14],s}function eC(e){let n,r=(0,a.c)(4),{currentStep:i,renewsAt:l,addOnName:s}=e;if(1===i){let e;return r[0]!==s||r[1]!==l?(e=(0,t.jsx)(S.DialogNotice,{variant:"info",icon:C.SpeechBubbleIcon,children:l?(0,t.jsxs)("p",{children:["You will continue to have access to ",s??"the add-on"," ","until the end of your billing cycle on"," ",(0,I.formatDate)(new Date(l)),"."]}):(0,t.jsx)("p",{children:"Changes will take effect at the end of your billing cycle."})}),r[0]=s,r[1]=l,r[2]=e):e=r[2],e}return r[3]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)(S.DialogNotice,{icon:C.SpeechBubbleIcon,children:(0,t.jsxs)("p",{children:["If you have questions or concerns about your account please"," ",(0,t.jsx)(D.default,{href:"https://clerk.com/contact/support",target:"_blank",className:"text-ceramic-secondary underline",rel:"noopener noreferrer",children:"contact support"}),"."]})}),r[3]=n):n=r[3],n}let eI=e=>(0,i.getStaticPlanOrAddOnDowngradeFeatures)(e),ek=e=>{let t,r,i,l=(0,a.c)(10),{goToNextStep:o,addOn:u}=e,{getToken:m,userId:h}=(0,s.useAuth)(),p=(0,d.useQueryClient)(),{organization:f}=(0,c.useOrganization)(),{track:x}=(0,E.useAnalytics)();return l[0]===Symbol.for("react.memo_cache_sentinel")?(t={},l[0]=t):t=l[0],l[1]!==u?.id||l[2]!==m||l[3]!==o||l[4]!==f?.id||l[5]!==p||l[6]!==x||l[7]!==h?(r={defaultValues:t,onSubmit:async()=>{let e=f?.id,t=u?.id;if(!e||!t)throw Error("Missing required data");await (0,n.currentSubscriptionRemoveAddon)(e,t,{getToken:m});try{x("Dashboard_Billing Screen_Plan Remove_Addon",{userId:h,organizationId:e,id:t}),B.default.capture("Dashboard_Billing Screen_Plan Remove_Addon",{userId:h,organizationId:e,id:t})}catch{}await Promise.all([p.invalidateQueries({queryKey:["pricingCurrentSubscription"]}),p.invalidateQueries({queryKey:["currentSubscriptionExpanded"]}),p.invalidateQueries({queryKey:["pricingPlans"]}),p.invalidateQueries({queryKey:["instance"]}),p.invalidateQueries({queryKey:["userSettings"]})]),o()}},l[1]=u?.id,l[2]=m,l[3]=o,l[4]=f?.id,l[5]=p,l[6]=x,l[7]=h,l[8]=r):r=l[8],l[9]===Symbol.for("react.memo_cache_sentinel")?(i={fallbackErrorMessage:"Failed to remove add-on from plan",closeOnComplete:!1},l[9]=i):i=l[9],(0,v.useDialogForm)(r,i)};var eO=e.i(29826),eD=e.i(819970),eB=e.i(742890),eE=e.i(836052);function eT(e){let n,r,i=(0,a.c)(10),{isOpen:l,plan:s,onClose:c,onComplete:o,updatePlanType:d,interval:u}=e;return i[0]!==u||i[1]!==c||i[2]!==o||i[3]!==s||i[4]!==d?(n=(0,t.jsx)(eF,{plan:s,updatePlanType:d,onClose:c,onComplete:o,interval:u}),i[0]=u,i[1]=c,i[2]=o,i[3]=s,i[4]=d,i[5]=n):n=i[5],i[6]!==l||i[7]!==c||i[8]!==n?(r=(0,t.jsx)(S.Dialog,{isOpen:l,size:"sm",onClose:c,children:n}),i[6]=l,i[7]=c,i[8]=n,i[9]=r):r=i[9],r}function eF({plan:e,onClose:a,onComplete:r,updatePlanType:i,interval:o}){let{getToken:u}=(0,s.useAuth)(),h=(0,d.useQueryClient)(),{organization:p}=(0,c.useOrganization)(),{openSwitchPlan:f,openUpgradePlan:x}=eq(),{track:y}=(0,E.useAnalytics)(),{data:g,isLoading:b}=(0,O.useQuery)({...(0,n.currentSubscriptionExpandedQuery)(p?.id??"",{getToken:u}),enabled:!!p?.id}),{data:j,isLoading:v,isRefetching:N}=(0,O.useQuery)({...(0,n.previewSubscriptionChangeQuery)(p?.id??"",{target_id:e?.id??"",action:"switch",interval:o},{getToken:u}),enabled:!!p?.id&&!!e?.id,staleTime:0}),_=b||v||N,{mutateAsync:P,isPending:C}=(0,k.useMutation)({mutationFn:({planId:e,organizationId:t})=>(0,n.switchPlanMutation)(t,{planId:e,interval:o},{getToken:u}),onSuccess:async()=>{try{let t="Dashboard_Billing Screen_Plan Switch";y(t,{previousPlan:g?.plan_id,newPlan:e?.id,oldInterval:g?.interval,newInterval:o}),B.default.capture(t,{previousPlan:g?.plan_id,newPlan:e?.id,oldInterval:g?.interval,newInterval:o})}catch{}await Promise.all([h.invalidateQueries({queryKey:["pricingCurrentSubscription"]}),h.invalidateQueries({queryKey:["currentSubscriptionExpanded"]}),h.refetchQueries({queryKey:["pricingPlans"]}),h.invalidateQueries({queryKey:["previewSubscriptionChange"]}),h.invalidateQueries({queryKey:["instance"]}),h.invalidateQueries({queryKey:["userSettings"]})]),r(),l.toast.success("Plan switched successfully")},onError:()=>{a(),l.toast.error("Failed to switch plan")}}),I=(0,m.useMemo)(()=>"switch-plan"===i?`Switch to ${"year"===o?"Annual":"Monthly"}`:`Upgrade to ${e?.name}`,[i,e?.name,o]),D=(0,m.useMemo)(()=>"year"!==o&&g?.plan_id!==e?.id,[o,g?.plan_id,e?.id]),T=(0,m.useMemo)(()=>j?.refund_amount&&j.refund_amount>0?"You will be downgraded immediately and will be refunded a pro-rated amount in 3-5 business days.":"You will be upgraded immediately and pay a pro-rated amount for this month.",[j?.refund_amount]);return(0,t.jsxs)(S.DialogContent,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(S.DialogHeader,{title:I,description:T}),(0,t.jsx)("div",{className:"mx-5 my-5",children:(0,t.jsx)(w.Button,{variant:"secondary",size:"sm",emphasis:"low",onPress:()=>{a()},icon:eD.XIcon})})]}),(0,t.jsx)(S.DialogBody,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("div",{className:"flex w-full flex-col gap-5",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsx)("div",{className:"text-ceramic-label-2 text-ceramic-primary",children:I}),(0,t.jsx)(F.Badge,{variant:"secondary",children:"year"===o?"Annual":"Monthly"})]}),(0,t.jsx)("div",{className:"mt-1.5 text-ceramic-heading-3 text-ceramic-primary",children:_?(0,t.jsx)(A.Skeleton,{className:"h-10 w-24"}):(0,eB.formatCentsToCurrency)(j?.amount_due_excluding_tax??0)}),D&&(0,t.jsx)("div",{className:"mt-3 text-ceramic-body-3 text-ceramic-secondary",children:(0,t.jsxs)(w.Button,{variant:"primary",emphasis:"none",icon:eE.ArrowRotateLeftRightIcon,iconPosition:"start",onPress:()=>{"switch-plan"===i?f(e?.id??"","year"):x(e?.id??"","year")},children:["Switch to annual billing and save"," ",(0,eB.formatPercent)(e?.prices?.yearDiscount??0)]})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 text-ceramic-body-2 text-ceramic-primary",children:[(0,t.jsx)(eU,{}),(0,t.jsx)("div",{className:"w-full",children:(0,t.jsxs)("div",{className:"flex flex-col gap-y-2",children:[j?.amount_due_excluding_tax!==null&&j?.refund_amount_excluding_tax===null&&(0,t.jsx)(eR,{label:"Amount due today",value:(0,eB.formatCentsToCurrency)(j?.amount_due_excluding_tax??0),loading:_}),j?.refund_amount_excluding_tax!==null&&j?.amount_due_excluding_tax===null&&(0,t.jsx)(eR,{label:"Refund amount",value:(0,eB.formatCentsToCurrency)(j?.refund_amount_excluding_tax??0),loading:_}),j?.amount_due!==null&&(0,t.jsx)(eR,{label:(0,t.jsx)("div",{className:"text-ceramic-secondary",children:"Tax"}),value:(0,eB.formatCentsToCurrency)(j?.tax??0),loading:_})]})}),(0,t.jsx)(eU,{}),(0,t.jsx)(eR,{label:"Total due today",value:(0,eB.formatCentsToCurrency)(j?.amount_due??0),loading:_}),(0,t.jsx)(eU,{})]})]}),(0,t.jsx)("div",{className:"flex w-full flex-col justify-between gap-y-4",children:(0,t.jsx)(w.Button,{variant:"primary",className:"w-full justify-center",onPress:()=>{e?.id&&p?.id&&P({planId:e.id,organizationId:p.id})},isPending:C,children:(0,t.jsx)("span",{children:"switch-plan"===i?"Switch":"Upgrade"})})})]})})]})}function eR(e){let n,r,i,l=(0,a.c)(8),{label:s,value:c,loading:o}=e;if(o){let e;return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)("div",{className:"flex justify-between gap-x-1",children:[(0,t.jsx)(A.Skeleton,{className:"h-4 w-16"}),(0,t.jsx)(A.Skeleton,{className:"h-4 w-16"})]}),l[0]=e):e=l[0],e}return l[1]!==s?(n="string"==typeof s?(0,t.jsx)("div",{className:"text-ceramic-label-2",children:s}):s,l[1]=s,l[2]=n):n=l[2],l[3]!==c?(r=(0,t.jsx)("div",{children:c}),l[3]=c,l[4]=r):r=l[4],l[5]!==n||l[6]!==r?(i=(0,t.jsxs)("div",{className:"flex justify-between gap-x-1",children:[n,r]}),l[5]=n,l[6]=r,l[7]=i):i=l[7],i}function eU(){let e,n=(0,a.c)(1);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"border-separate border-t"}),n[0]=e):e=n[0],e}let eQ={checkout:{isOpen:!1},switchPlan:{isOpen:!1},cancelPlan:{isOpen:!1},addAddOn:{isOpen:!1},downgradePlan:{isOpen:!1},removeAddOn:{isOpen:!1},downgradeSuccessful:{isOpen:!1}},eL={selectedPlanId:null,selectedInterval:"year",selectedAddOns:[]},eM=(0,m.createContext)(null);function ez(e){let n,r,i,s,c,o,u,p,f,x,y,g=(0,a.c)(38),{children:b}=e,[v,w]=(0,m.useState)(eL),[S,N]=(0,m.useState)(eQ),_=(0,d.useQueryClient)(),[A,P]=(0,m.useState)(0);g[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{N(t=>({...t,[e]:{isOpen:!1,state:eQ[e].state}}))},g[0]=n):n=g[0];let C=n;g[1]===Symbol.for("react.memo_cache_sentinel")?(r=(e,t)=>{"checkout"===e&&t?.isUpgradingToEnterprise&&P(2),N(a=>({...a,[e]:{state:t,isOpen:!0}}))},g[1]=r):r=g[1];let I=r;g[2]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{w(eL)},g[2]=i):i=g[2];let k=i;return g[3]!==v?(s={checkoutState:v,setCheckoutState:w,closeModal:C,openModal:I},g[3]=v,g[4]=s):s=g[4],g[5]!==A||g[6]!==S.checkout.isOpen||g[7]!==S.checkout.state||g[8]!==_?(c=S.checkout.isOpen&&(0,t.jsx)(eO.StripeUtilsProvider,{children:(0,t.jsx)(j,{isOpen:S.checkout.isOpen,currentStep:A,onStepChange:e=>{P(e),_.removeQueries({queryKey:["checkoutSession"]})},onClose:()=>{C("checkout"),k(),P(0)},onComplete:()=>{S.checkout.state?.onComplete?S.checkout.state.onComplete():P(eK)}})}),g[5]=A,g[6]=S.checkout.isOpen,g[7]=S.checkout.state,g[8]=_,g[9]=c):c=g[9],g[10]!==S.addAddOn.isOpen||g[11]!==S.addAddOn.state||g[12]!==_?(o=S.addAddOn.isOpen&&(0,t.jsx)(h.AddOnModal,{isOpen:S.addAddOn.isOpen,addOn:S.addAddOn.state?.addOn,onClose:()=>{C("addAddOn"),_.removeQueries({queryKey:["previewSubscriptionChange"]})},onComplete:async()=>{S.addAddOn.state?.onComplete?S.addAddOn.state.onComplete():(C("addAddOn"),l.toast.success("Add-on added to plan"))}}),g[10]=S.addAddOn.isOpen,g[11]=S.addAddOn.state,g[12]=_,g[13]=o):o=g[13],g[14]!==S.switchPlan.isOpen||g[15]!==S.switchPlan.state?.interval||g[16]!==S.switchPlan.state?.plan||g[17]!==S.switchPlan.state?.updatePlanType||g[18]!==_?(u=S.switchPlan.isOpen&&(0,t.jsx)(eT,{isOpen:S.switchPlan.isOpen,plan:S.switchPlan.state?.plan,interval:S.switchPlan.state?.interval??"year",updatePlanType:S.switchPlan.state?.updatePlanType||"switch-plan",onClose:async()=>{C("switchPlan"),_.removeQueries({queryKey:["previewSubscriptionChange"]})},onComplete:()=>{C("switchPlan"),C("checkout")}}),g[14]=S.switchPlan.isOpen,g[15]=S.switchPlan.state?.interval,g[16]=S.switchPlan.state?.plan,g[17]=S.switchPlan.state?.updatePlanType,g[18]=_,g[19]=u):u=g[19],g[20]!==S.cancelPlan.isOpen?(p=S.cancelPlan.isOpen&&(0,t.jsx)(G,{isOpen:S.cancelPlan.isOpen,onClose:()=>{C("cancelPlan")},onComplete:()=>{C("checkout"),C("cancelPlan")}}),g[20]=S.cancelPlan.isOpen,g[21]=p):p=g[21],g[22]!==S.downgradePlan.isOpen||g[23]!==S.downgradePlan.state?.newPlan||g[24]!==S.downgradePlan.state?.previousPlan?(f=S.downgradePlan.isOpen&&(0,t.jsx)(ed,{isOpen:S.downgradePlan.isOpen,previousPlan:S.downgradePlan.state?.previousPlan,newPlan:S.downgradePlan.state?.newPlan,onClose:()=>{C("downgradePlan")},onComplete:()=>{C("checkout"),C("downgradePlan")}}),g[22]=S.downgradePlan.isOpen,g[23]=S.downgradePlan.state?.newPlan,g[24]=S.downgradePlan.state?.previousPlan,g[25]=f):f=g[25],g[26]!==S.removeAddOn.isOpen||g[27]!==S.removeAddOn.state?.addOn?(x=S.removeAddOn.isOpen&&(0,t.jsx)(ew,{isOpen:S.removeAddOn.isOpen,addOn:S.removeAddOn.state?.addOn,onClose:()=>{C("removeAddOn")},onComplete:()=>{C("checkout"),C("removeAddOn")}}),g[26]=S.removeAddOn.isOpen,g[27]=S.removeAddOn.state?.addOn,g[28]=x):x=g[28],g[29]!==b||g[30]!==x||g[31]!==s||g[32]!==c||g[33]!==o||g[34]!==u||g[35]!==p||g[36]!==f?(y=(0,t.jsxs)(eM.Provider,{value:s,children:[b,c,o,u,p,f,x]}),g[29]=b,g[30]=x,g[31]=s,g[32]=c,g[33]=o,g[34]=u,g[35]=p,g[36]=f,g[37]=y):y=g[37],y}function eK(e){return e+1}function eq(){let e,t,l,d,h,p,f,x,y,g,b,j,v,w,S,N,_,A,P,C,I,k,O,D,B,E,T,F,R,U,Q,L,M,z,K,q,Y,H,G=(0,a.c)(130),V=(0,m.useContext)(eM);if(!V)throw Error("useNewPricing must be used within a NewPricingProvider");let{checkoutState:W,setCheckoutState:$,closeModal:X,openModal:Z}=V,{organization:J}=(0,c.useOrganization)(),{getToken:ee,has:et}=(0,s.useAuth)();G[0]!==ee?(e=(0,r.systemConfigQuery)({getToken:ee}),G[0]=ee,G[1]=e):e=G[1],G[2]!==e?(t={...e},G[2]=e,G[3]=t):t=G[3];let{data:ea}=(0,u.useSuspenseQuery)(t);G[4]!==et?(l=et?.({permission:"org:billing:manage"}),G[4]=et,G[5]=l):l=G[5];let en=l,er=J?.id??"";G[6]!==ee||G[7]!==er?(d=(0,n.pricingPlansQuery)(er,{getToken:ee}),G[6]=ee,G[7]=er,G[8]=d):d=G[8];let ei=en&&!!J?.id&&ea?.feature_flags?.allow_new_pricing_model;G[9]!==d||G[10]!==ei?(h={...d,enabled:ei},G[9]=d,G[10]=ei,G[11]=h):h=G[11];let el=J?.id??"";G[12]!==ee||G[13]!==el?(p=(0,n.currentSubscriptionQuery)(el,{getToken:ee}),G[12]=ee,G[13]=el,G[14]=p):p=G[14];let es=en&&!!J?.id&&ea?.feature_flags?.allow_new_pricing_model;G[15]!==p||G[16]!==es?(f={...p,enabled:es},G[15]=p,G[16]=es,G[17]=f):f=G[17],G[18]!==f||G[19]!==h?(x={queries:[h,f]},G[18]=f,G[19]=h,G[20]=x):x=G[20];let[ec,eo]=(0,o.useQueries)(x),ed=ea?.feature_flags?.allow_new_pricing_model??!1,eu=ec.isLoading||eo.isLoading;e:{let e;if(!ec.data||ec.isLoading){let e;G[21]===Symbol.for("react.memo_cache_sentinel")?(e=[],G[21]=e):e=G[21],y=e;break e}G[22]!==ec.data?(e=(0,i.populatePlans)(ec.data),G[22]=ec.data,G[23]=e):e=G[23],y=e}let em=y;G[24]!==em?(g=em.reduce(eW,{}),G[24]=em,G[25]=g):g=G[25];let eh=g;t:{let e;if(!ec.data||ec.isLoading){let e;G[26]===Symbol.for("react.memo_cache_sentinel")?(e=[],G[26]=e):e=G[26],b=e;break t}G[27]!==ec.data?(e=(0,i.populateAddOns)(ec.data),G[27]=ec.data,G[28]=e):e=G[28],b=e}let ep=b;G[29]!==ep?(j=ep.reduce(eV,{}),G[29]=ep,G[30]=j):j=G[30];let ef=j;G[31]!==eh?(v=e=>{if(e)return eh[e]},G[31]=eh,G[32]=v):v=G[32];let ex=v;G[33]!==ef?(w=e=>{if(e)return ef[e]},G[33]=ef,G[34]=w):w=G[34];let ey=w;a:{let e;if(!en||!ed||eu){S=null;break a}G[35]!==em?(e=em.find(eG),G[35]=em,G[36]=e):e=G[36];let t=e;if(!t){S=null;break a}if(eo.data?.is_enterprise){let e;G[37]!==t?(e={plan:t,state:"active"},G[37]=t,G[38]=e):e=G[38],S=e;break a}let a=eo.data?.is_free;if(t&&a){let e;G[39]!==t?(e={plan:t,state:"pending-on-free"},G[39]=t,G[40]=e):e=G[40],S=e;break a}if(t&&!a){let e;G[41]!==t?(e={plan:t,state:"pending-on-paid"},G[41]=t,G[42]=e):e=G[42],S=e;break a}S=null}let eg=S,eb=eg?.state==="pending-on-free"||eg?.state==="pending-on-paid",ej=eg?.state==="active";G[43]!==$?(N=e=>{$(t=>({...t,selectedPlanId:e}))},G[43]=$,G[44]=N):N=G[44];let ev=N;G[45]!==W||G[46]!==$?(_=e=>{e&&(W.selectedAddOns.includes(e)?$(t=>({...t,selectedAddOns:t.selectedAddOns.filter(t=>t!==e)})):$(t=>({...t,selectedAddOns:[...t.selectedAddOns,e]})))},G[45]=W,G[46]=$,G[47]=_):_=G[47];let ew=_;G[48]!==$?(A=()=>{$(eH)},G[48]=$,G[49]=A):A=G[49];let eS=A;G[50]!==$?(P=e=>{$(t=>({...t,selectedInterval:e}))},G[50]=$,G[51]=P):P=G[51];let eN=P;G[52]!==$?(C=()=>{$(eL)},G[52]=$,G[53]=C):C=G[53];let e_=C;G[54]!==$?(I=e=>{$(t=>({...t,...e}))},G[54]=$,G[55]=I):I=G[55];let eA=I;G[56]!==ey||G[57]!==Z?(k=(e,t)=>{Z("addAddOn",{addOn:ey(e),onComplete:t})},G[56]=ey,G[57]=Z,G[58]=k):k=G[58];let eP=k;G[59]!==eo.data?.is_free||G[60]!==eg||G[61]!==eP||G[62]!==Z||G[63]!==$?(O=e=>{let{planId:t,addOnIds:a}=e??{};if(eg&&"pending-on-free"===eg.state){$(e=>({...e,selectedPlanId:eg.plan.id,selectedInterval:eg.plan.enterpriseInfo?.interval??"year"})),Z("checkout",{onComplete:e?.onCheckoutComplete,isUpgradingToEnterprise:!0});return}($(e=>({...e,selectedAddOns:a??eL.selectedAddOns,selectedPlanId:t??eL.selectedPlanId})),a&&a.length>0&&!eo.data?.is_free)?eP(a[0],e?.onAddOnComplete):Z("checkout",{onComplete:e?.onCheckoutComplete})},G[59]=eo.data?.is_free,G[60]=eg,G[61]=eP,G[62]=Z,G[63]=$,G[64]=O):O=G[64];let eC=O;G[65]!==ey||G[66]!==Z?(D=e=>{Z("removeAddOn",{addOn:ey(e)})},G[65]=ey,G[66]=Z,G[67]=D):D=G[67];let eI=D;G[68]!==eo.data?.plan_id||G[69]!==ex||G[70]!==Z?(B=e=>{Z("downgradePlan",{previousPlan:ex(eo.data?.plan_id),newPlan:ex(e)})},G[68]=eo.data?.plan_id,G[69]=ex,G[70]=Z,G[71]=B):B=G[71];let ek=B;G[72]!==Z?(E=()=>{Z("cancelPlan")},G[72]=Z,G[73]=E):E=G[73];let eO=E;G[74]!==ex||G[75]!==Z?(T=(e,t)=>{Z("switchPlan",{plan:ex(e),updatePlanType:"upgrade-plan",interval:void 0===t?"year":t})},G[74]=ex,G[75]=Z,G[76]=T):T=G[76];let eD=T;G[77]!==ex||G[78]!==Z?(F=(e,t)=>{Z("switchPlan",{plan:ex(e),updatePlanType:"switch-plan",interval:void 0===t?"year":t})},G[77]=ex,G[78]=Z,G[79]=F):F=G[79];let eB=F;G[80]!==ex?(R=e=>ex(e)?.name,G[80]=ex,G[81]=R):R=G[81];let eE=R;G[82]!==ey?(U=e=>ey(e)?.name,G[82]=ey,G[83]=U):U=G[83];let eT=U;G[84]!==ex?(Q=ex(i.PRICING_HOBBY_PLAN_ID),G[84]=ex,G[85]=Q):Q=G[85],G[86]!==ex?(L=ex(i.PRICING_PRO_PLAN_ID),G[86]=ex,G[87]=L):L=G[87],G[88]!==ex?(M=ex(i.PRICING_BUSINESS_PLAN_ID),G[88]=ex,G[89]=M):M=G[89],G[90]!==Q||G[91]!==L||G[92]!==M?(z={hobby:Q,pro:L,business:M},G[90]=Q,G[91]=L,G[92]=M,G[93]=z):z=G[93];let eF=z;G[94]!==ey?(K=ey(i.PRICING_B2B_AUTHENTICATION_ADDON_ID),G[94]=ey,G[95]=K):K=G[95],G[96]!==ey?(q=ey(i.PRICING_ADMINISTRATION_ADDON_ID),G[96]=ey,G[97]=q):q=G[97],G[98]!==K||G[99]!==q?(Y={b2bAuthentication:K,administration:q},G[98]=K,G[99]=q,G[100]=Y):Y=G[100];let eR=Y;return G[101]!==W||G[102]!==X||G[103]!==eo||G[104]!==eR||G[105]!==eF||G[106]!==eS||G[107]!==eg||G[108]!==ey||G[109]!==eT||G[110]!==ex||G[111]!==eE||G[112]!==ed||G[113]!==eu||G[114]!==ej||G[115]!==eb||G[116]!==eP||G[117]!==eO||G[118]!==eC||G[119]!==ek||G[120]!==Z||G[121]!==eI||G[122]!==eB||G[123]!==eD||G[124]!==e_||G[125]!==ew||G[126]!==eN||G[127]!==ev||G[128]!==eA?(H={openSwitchPlan:eB,openUpgradePlan:eD,openCancelPlan:eO,openDowngradePlan:ek,openRemoveAddOn:eI,openAddAddOn:eP,openCheckout:eC,closeModal:X,openModal:Z,resetCheckoutState:e_,selectCheckoutPlan:ev,selectCheckoutAddOn:ew,deselectAllCheckoutAddOns:eS,selectCheckoutInterval:eN,updateCheckoutState:eA,getAddonsFromInstanceFeatures:eY,isLoading:eu,isEnabled:ed,checkoutState:W,currentSubscription:eo,enterprise:eg,getPlanNameById:eE,getAddOnNameById:eT,getPlanById:ex,getAddOnById:ey,defaultPlans:eF,defaultAddOns:eR,isOnEnterprisePlan:ej,isPendingEnterprisePlan:eb},G[101]=W,G[102]=X,G[103]=eo,G[104]=eR,G[105]=eF,G[106]=eS,G[107]=eg,G[108]=ey,G[109]=eT,G[110]=ex,G[111]=eE,G[112]=ed,G[113]=eu,G[114]=ej,G[115]=eb,G[116]=eP,G[117]=eO,G[118]=eC,G[119]=ek,G[120]=Z,G[121]=eI,G[122]=eB,G[123]=eD,G[124]=e_,G[125]=ew,G[126]=eN,G[127]=ev,G[128]=eA,G[129]=H):H=G[129],H}function eY(e,t){return e.filter(e=>t[e]?.plan?.is_addon).map(e=>t[e]?.plan?.id).filter(Boolean)}function eH(e){return{...e,selectedAddOns:[]}}function eG(e){return!!e.enterpriseInfo}function eV(e,t){return e[t.id]=t,e}function eW(e,t){return e[t.id]=t,e}}]);