(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,689265,e=>{"use strict";e.s(["DEFAULT_SYSTEM_LOGS_LIMIT",0,50,"PAGE_SIZE",0,10])},676834,e=>{"use strict";var t=e.i(73677),r=e.i(521322),s=e.i(959369),n=e.i(814729);function c(e){let s,c=(0,r.c)(2);return c[0]!==e?(s=(0,t.jsx)(n.AnimatedIcon,{...e,viewBox:"0 0 16 16",fill:"none",children:a}),c[0]=e,c[1]=s):s=c[1],s}function a(e){let{isOpen:r}=e;return(0,t.jsx)(s.motion.path,{d:"M4.75 6.75L8 10.25L11.25 6.75",initial:!1,animate:{rotate:180*!!r},transition:{type:"spring",visualDuration:.12,bounce:0},stroke:"var(--_ceramic-icon-stroke)",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}e.s(["AnimatedChevronDownIcon",()=>c])},466314,e=>{"use strict";var t=e.i(689265),r=e.i(538040),s=e.i(720796),n=e.i(982942);e.s(["billingSettingsCommerceStatusQuery",0,(e,{getToken:t})=>(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/billing_settings/commerce_status`,getToken:t}),queryKey:["billingSettingsCommerceStatus",e],staleTime:0}),"billingSettingsQuery",0,(e,{getToken:t})=>(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/billing_settings`,getToken:t}),queryKey:["billingSettings",e],select:e=>({...e,previously_enabled:e.user_enabled||e.organization_enabled||e.has_subscriptions})}),"billingSettingsUpdate",0,(e,t,{getToken:r})=>(0,s.request)({data:t,method:"PATCH",path:`/v1/instances/${e}/billing_settings`,getToken:r}),"commerceAddFeaturesToPlan",0,(e,t,r,{getToken:n})=>(0,s.request)({data:r,method:"POST",path:`/v1/instances/${e}/commerce/plans/${t}/features`,getToken:n}),"commerceAnalyticsRecurringRevenueQuery",0,(e,{start:t,end:r,getToken:c})=>(0,n.queryOptions)({queryFn:async()=>{let n=new URLSearchParams;return t&&n.set("start",t),r&&n.set("end",r),(0,s.request)({path:`/v1/instances/${e}/commerce/analytics/recurring_revenue?${n}`,getToken:c})},queryKey:["commerceAnalyticsRecurringRevenue",e,t,r]}),"commerceAnalyticsRevenueQuery",0,(e,{start:t,end:r,getToken:c})=>(0,n.queryOptions)({queryFn:async()=>{let n=new URLSearchParams;return t&&n.set("start",t),r&&n.set("end",r),(0,s.request)({path:`/v1/instances/${e}/commerce/analytics/revenue?${n}`,getToken:c})},queryKey:["commerceAnalyticsRevenue",e,t,r]}),"commerceBulkUpdateFreeTrials",0,(e,t,{getToken:r})=>{let{plan_ids:n,...c}=t;if(!n?.length)throw Error("bulk_update_free_trials requires at least one plan_id");let a=new URLSearchParams;for(let e of n)a.append("plan_id",e);let i=a.toString();return(0,s.request)({data:c,method:"PUT",path:`/v1/instances/${e}/commerce/plans/bulk_update_free_trials${i?`?${i}`:""}`,getToken:r})},"commerceCancelSubscriptionItem",0,(e,t,{endNow:r=!1,getToken:n})=>{let c=new URLSearchParams;return r&&c.set("end_now","true"),(0,s.request)({path:`/v1/instances/${e}/commerce/subscription_items/${t}?${c}`,method:"DELETE",getToken:n})},"commerceChangeSubscriptionPrice",0,(e,t,{fromPriceId:r,toPriceId:n,getToken:c})=>(0,s.request)({path:`/v1/instances/${e}/commerce/subscription_items/${t}/price_transition`,method:"POST",data:{from_price_id:r,to_price_id:n},getToken:c}),"commerceCreateFeature",0,(e,t,{getToken:r})=>(0,s.request)({data:t,method:"POST",path:`/v1/instances/${e}/commerce/features`,getToken:r}),"commerceCreatePayee",0,(e,t,{getToken:r})=>(0,s.request)({data:t,method:"POST",path:`/v1/instances/${e}/commerce/payees`,getToken:r}),"commerceCreatePayeeAccountLink",0,(e,t,{getToken:r})=>(0,s.request)({method:"POST",path:`/v1/instances/${e}/commerce/payees/${t}/account_link`,getToken:r}),"commerceCreatePlan",0,(e,t,{getToken:r})=>(0,s.request)({data:t,method:"POST",path:`/v1/instances/${e}/commerce/plans`,getToken:r}),"commerceCreatePrice",0,(e,t,{getToken:r})=>(0,s.request)({data:t,method:"POST",path:`/v1/instances/${e}/billing/prices`,getToken:r}),"commerceDeletePlan",0,(e,t,{getToken:r})=>(0,s.request)({method:"DELETE",path:`/v1/instances/${e}/commerce/plans/${t}`,getToken:r}),"commerceDisconnectPayee",0,(e,t,{getToken:r})=>(0,s.request)({method:"DELETE",path:`/v1/instances/${e}/commerce/payees/${t}`,getToken:r}),"commerceEditFeature",0,(e,t,r,{getToken:n})=>(0,s.request)({data:r,method:"PUT",path:`/v1/instances/${e}/commerce/features/${t}`,getToken:n}),"commerceEditPlan",0,(e,t,r,{getToken:n})=>(0,s.request)({data:r,method:"PUT",path:`/v1/instances/${e}/commerce/plans/${t}`,getToken:n}),"commerceExtendSubscriptionItemFreeTrial",0,(e,t,{days:r,getToken:n})=>(0,s.request)({path:`/v1/instances/${e}/commerce/subscription_items/${t}/extend_free_trial`,method:"POST",data:{days:r},getToken:n}),"commerceFeaturesQuery",0,(e,{isGenerated:t=!1,getToken:r,payerType:c})=>{let a=new URLSearchParams;return t&&a.set("is_generated","true"),c&&a.set("plan_payer_type",c),(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/commerce/features?${a}`,getToken:r}),queryKey:["commerceFeatures",e,t,c]})},"commerceGetStarted",0,(e,{getToken:t})=>(0,s.request)({method:"POST",path:`/v1/instances/${e}/commerce/get-started`,getToken:t}),"commerceOrganizationPaymentAttemptsQuery",0,(e,r,{page:c,limit:a=t.PAGE_SIZE,getToken:i})=>(0,n.queryOptions)({queryFn:async()=>{let t=new URLSearchParams;return t.set("limit",String(a)),t.set("offset",String((c-1)*a)),(0,s.request)({path:`/v1/instances/${e}/commerce/payers/organizations/${r}/payment_attempts?${t}`,getToken:i})},queryKey:["commerceOrganizationPaymentAttempts",e,r,c,a]}),"commerceOrganizationRevenueQuery",0,(e,t,{getToken:r})=>(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/commerce/payers/organizations/${t}/revenue`,getToken:r}),queryKey:["commerceOrganizationRevenueQuery",e,t]}),"commerceOrganizationStatementsQuery",0,(e,t,{getToken:r})=>(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/commerce/payers/organizations/${t}/statements`,getToken:r}),queryKey:["commerceOrganizationStatements",e,t]}),"commerceOrganizationSubscriptionItemsQuery",0,(e,r,{page:c,limit:a=t.PAGE_SIZE,getToken:i})=>(0,n.queryOptions)({queryFn:async()=>{let t=new URLSearchParams;return t.set("limit",String(a)),t.set("offset",String((c-1)*a)),(0,s.request)({path:`/v1/instances/${e}/commerce/payers/organizations/${r}/subscription_items?${t}`,getToken:i})},queryKey:["commerceOrganizationSubscriptionItems",e,r,c,a]}),"commercePayeesQuery",0,(e,{getToken:t})=>(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/commerce/payees`,getToken:t}),queryKey:["commercePayees",e]}),"commercePayerStatementsQuery",0,(e,t,{page:r,limit:c=10,query:a="",getToken:i})=>(0,n.queryOptions)({queryFn:async()=>{let n=new URLSearchParams;return n.set("limit",String(c)),n.set("offset",String((r-1)*c)),a&&n.set("query",a),(0,s.request)({path:`/v1/instances/${e}/commerce/payers/${t}/statements`,getToken:i})},queryKey:["commercePayerStatements",e,t,r,c,a]}),"commercePayerSubscriptionQuery",0,(e,t,{getToken:r})=>(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/commerce/payers/${t}/subscription`,getToken:r}),queryKey:["commercePayerSubscription",e,t]}),"commercePlanPricesQuery",0,(e,{planId:t,getToken:r})=>(0,n.queryOptions)({queryFn:async()=>{let n=new URLSearchParams;return n.set("plan_id",t),(0,s.request)({path:`/v1/instances/${e}/billing/prices?${n}`,getToken:r})},queryKey:["commercePlanPrices",e,t]}),"commercePlansQuery",0,(e,{payerType:t,getToken:r})=>(0,n.queryOptions)({queryFn:async()=>{let n=new URLSearchParams;return n.set("payer_type",t),(0,s.request)({path:`/v1/instances/${e}/commerce/plans?${n}`,getToken:r})},queryKey:["commercePlans",e,t]}),"commerceProductsWithPlansQuery",0,(e,{getToken:t})=>(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/commerce/products`,getToken:t}),queryKey:["commerceProductsWithPlans",e]}),"commerceRemoveFeaturesFromPlan",0,(e,t,r,{getToken:n})=>(0,s.request)({data:r,method:"DELETE",path:`/v1/instances/${e}/commerce/plans/${t}/features`,getToken:n}),"commerceSpecificPaymentAttemptQuery",0,(e,t,{getToken:r})=>(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/commerce/payment_attempts/${t}`,getToken:r}),queryKey:["commercePaymentAttempt",e,t]}),"commerceSpecificPlanQuery",0,(e,t,{getToken:r})=>(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/commerce/plans/${t}`,getToken:r}),queryKey:["commercePlan",e,t]}),"commerceSpecificStatementQuery",0,(e,t,{getToken:r})=>(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/commerce/statements/${t}`,getToken:r}),queryKey:["commerceStatement",e,t]}),"commerceStatementPaymentAttemptsQuery",0,(e,r,{page:c,limit:a=t.PAGE_SIZE,getToken:i})=>(0,n.queryOptions)({queryFn:async()=>{let t=new URLSearchParams;return t.set("limit",String(a)),t.set("offset",String((c-1)*a)),(0,s.request)({path:`/v1/instances/${e}/commerce/statements/${r}/payment_attempts?${t}`,getToken:i})},queryKey:["commerceStatementPaymentAttempts",e,r,c,a]}),"commerceSubscriptionItemsQuery",0,(e,{page:t,limit:c=10,query:a="",filters:i=[],getToken:m})=>(0,n.queryOptions)({queryFn:async()=>{let n=new URLSearchParams;return n.set("include","plan"),n.set("limit",String(c)),n.set("offset",String((t-1)*c)),a&&n.set("query",a),(0,r.addFiltersToSearchParams)(n,i),(0,s.request)({path:`/v1/instances/${e}/commerce/subscription_items?${n}`,getToken:m})},queryKey:["commerceSubscriptionItems",e,t,c,a,(0,r.queryKeyFromFilters)(i)]}),"commerceUserPaymentAttemptsQuery",0,(e,r,{page:c,limit:a=t.PAGE_SIZE,getToken:i})=>(0,n.queryOptions)({queryFn:async()=>{let t=new URLSearchParams;return t.set("limit",String(a)),t.set("offset",String((c-1)*a)),(0,s.request)({path:`/v1/instances/${e}/commerce/payers/user/${r}/payment_attempts?${t}`,getToken:i})},queryKey:["commerceUserPaymentAttempts",e,r,c,a]}),"commerceUserRevenueQuery",0,(e,t,{getToken:r})=>(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/commerce/payers/user/${t}/revenue`,getToken:r}),queryKey:["commerceUserRevenueQuery",e,t]}),"commerceUserStatementsQuery",0,(e,t,{getToken:r})=>(0,n.queryOptions)({queryFn:async()=>(0,s.request)({path:`/v1/instances/${e}/commerce/payers/user/${t}/statements`,getToken:r}),queryKey:["commerceUserStatements",e,t]}),"commerceUserSubscriptionItemsQuery",0,(e,t,{page:r,limit:c=10,getToken:a})=>(0,n.queryOptions)({queryFn:async()=>{let n=new URLSearchParams;return n.set("limit",String(c)),n.set("offset",String((r-1)*c)),(0,s.request)({path:`/v1/instances/${e}/commerce/payers/user/${t}/subscription_items?${n}`,getToken:a})},queryKey:["commerceUserSubscriptionItems",e,t,r,c]})])},982893,e=>{"use strict";var t=e.i(73677),r=e.i(521322),s=e.i(706102),n=e.i(894701);function c(e){let c,a=(0,r.c)(3),{children:i}=e,m=!(0,s.useHasPermission)("config:manage");return a[0]!==i||a[1]!==m?(c=(0,t.jsx)(n.ForceReadOnlyProvider,{value:m,children:i}),a[0]=i,a[1]=m,a[2]=c):c=a[2],c}e.s(["Providers",()=>c])},533416,e=>{"use strict";var t=e.i(73677),r=e.i(521322),s=e.i(466314),n=e.i(924289),c=e.i(861160),a=e.i(709697),i=e.i(272676),m=e.i(105026),o=e.i(935466),u=e.i(412939),y=e.i(685262),p=e.i(109821),l=e.i(33735),h=e.i(758040),d=e.i(104477),q=e.i(927800),_=e.i(683471),S=e.i(162863);function g(e){let n,a,p,l,q,S,g=(0,r.c)(18),{children:$}=e,f=(0,o.useFeatureFlag)("per_org_roles_enabled"),{isStaffMode:b}=(0,c.useStaffContext)(),x=(0,_.usePathname)(),{getToken:O}=(0,h.useAuth)(),{instanceId:F}=(0,u.useTypedParams)();g[0]!==O||g[1]!==F?(n=(0,s.commercePayeesQuery)(F,{getToken:O}),g[0]=O,g[1]=F,g[2]=n):n=g[2];let{data:R}=(0,d.useQuery)(n);g[3]!==O||g[4]!==F?(a=(0,s.billingSettingsCommerceStatusQuery)(F,{getToken:O}),g[3]=O,g[4]=F,g[5]=a):a=g[5];let{data:U}=(0,d.useQuery)(a);g[6]!==U?.stripe_account_restricted||g[7]!==R?.data?(p=function({hasRequirementsDue:e,isStripeRestricted:t}){return{hasUpdates:!1,hasBillingIssue:(e||t)??!1}}({hasRequirementsDue:R?.data?.some(v),isStripeRestricted:U?.stripe_account_restricted}),g[6]=U?.stripe_account_restricted,g[7]=R?.data,g[8]=p):p=g[8];let K=p;if(g[9]!==f||g[10]!==b||g[11]!==x){var T;let e;T={roleSets:f,staffMode:b},e=e=>({...e,href:(0,y.to)(x,{page:(0,m.getRolesHref)(e,T),clearSearch:!0})}),l=m.CONFIGURE_ROUTES.map(t=>({label:t.label,items:t.items.filter(e=>"items"in e||(0,m.shouldInclude)(e.condition,T)).map(t=>"items"in t?{...t,items:t.items.filter(e=>(0,m.shouldInclude)(e.condition,T)).map(e)}:e(t))})),g[9]=f,g[10]=b,g[11]=x,g[12]=l}else l=g[12];let E=l;return g[13]===Symbol.for("react.memo_cache_sentinel")?(q=(0,t.jsx)(P,{}),g[13]=q):q=g[13],g[14]!==$||g[15]!==K||g[16]!==E?(S=(0,t.jsx)(i.AppLayout,{aboveNav:q,sideNavigation:E,notificationConditions:K,children:$}),g[14]=$,g[15]=K,g[16]=E,g[17]=S):S=g[17],S}function v(e){return!0===e.requirements_due}function P(){let e,s,c,i,m,o=(0,r.c)(7),u=(0,n.useCommandMenuStore)($);o[0]!==u?(e=(0,p.mergeModalTriggerOnPress)(u),o[0]=u,o[1]=e):e=o[1];let y=e,h="u">typeof navigator&&/mac(os|intosh)/i.test(navigator.userAgent);return o[2]===Symbol.for("react.memo_cache_sentinel")?(s=(0,q.cx)("mb-7 flex w-full items-center justify-between rounded-[.375rem] px-2.5 text-ceramic-body-2 text-ceramic-dimmed transition dark:text-ceramic-gray-700","bg-ceramic-white dark:bg-ceramic-gray-1100","ring-1 ring-[#191c21]/[.12] dark:ring-inset dark:ring-[#3d3d4a]/[.88]","shadow-[0_2px_2px_-1px_theme(colors.ceramic.black/.06),0_4px_4px_-2px_theme(colors.ceramic.black/.04)] dark:shadow-[0_2px_2px_-1px_theme(colors.ceramic.black/.16),0_4px_4px_-2px_theme(colors.ceramic.black/.24)]","hover:shadow-[0_2px_2px_-1px_theme(colors.ceramic.black/.1),0_4px_4px_-2px_theme(colors.ceramic.black/.06)] hover:ring-[#191c21]/[.24] dark:hover:shadow-[0_2px_2px_-1px_theme(colors.ceramic.black/.32),0_4px_4px_-2px_theme(colors.ceramic.black/.32)] dark:hover:ring-ceramic-gray/48","data-[focus-visible]:-outline-ceramic-focus-[3px]"),o[2]=s):s=o[2],o[3]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"flex items-center self-stretch",children:(0,t.jsx)(l.MagnifyingGlassIcon,{className:"size-4 ceramic-icon-stroke-secondary"})}),(0,t.jsx)("span",{className:"self-stretch px-2.5 py-1.5",children:"Find..."})]}),o[3]=c):c=o[3],o[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsxs)("kbd",{className:"mt-0.25 -mr-1 flex w-min items-center gap-0.5",children:[(0,t.jsx)(a.Kbd,{binding:"mod"}),(0,t.jsx)(a.Kbd,{binding:"K"})]}),o[4]=i):i=o[4],o[5]!==y?(m=(0,t.jsxs)(S.Button,{"aria-keyshortcuts":h?"Meta+K":"Control+K",onPress:y,className:s,children:[c,i]}),o[5]=y,o[6]=m):m=o[6],m}function $(e){return e.open}e.s(["ConfigureLayout",()=>g],533416)}]);