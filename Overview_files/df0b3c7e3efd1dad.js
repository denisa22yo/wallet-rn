(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,617765,567112,e=>{"use strict";let a=[["United States","us","1","(...) ...-....",100],["United Kingdom","gb","44",".... ......",100],["India","in","91",".....-.....",100],["Canada","ca","1","(...) ...-....",100],["Germany","de","49","... .......",100],["France","fr","33",". .. .. .. ..",100],["Russia","ru","7","... ...-..-..",100],["Afghanistan","af","93"],["Albania","al","355"],["Algeria ","dz","213"],["American Samoa","as","1684"],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1264"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54"],["Armenia","am","374"],["Aruba","aw","297"],["Australia","au","61","... ... ..."],["Austria","at","43"],["Azerbaijan","az","994"],["Bahamas","bs","1242"],["Bahrain","bh","973"],["Bangladesh","bd","880"],["Barbados","bb","1246"],["Belarus","by","375"],["Belgium","be","32","... .. .. .."],["Belize","bz","501"],["Benin","bj","229"],["Bermuda","bm","1441"],["Bhutan","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina","ba","387"],["Botswana","bw","267"],["Brazil","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1284"],["Brunei","bn","673"],["Bulgaria","bg","359"],["Burkina Faso","bf","226"],["Burundi","bi","257"],["Cambodia","kh","855"],["Cameroon","cm","237"],["Cape Verde","cv","238"],["Caribbean Netherlands","bq","599"],["Cayman Islands","ky","1345"],["Central African Republic","cf","236"],["Chad","td","235"],["Chile","cl","56"],["China","cn","86","...-....-...."],["Colombia","co","57"],["Comoros","km","269"],["Congo","cd","243"],["Congo","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506","....-...."],["Côte d’Ivoire","ci","225"],["Croatia","hr","385"],["Cuba","cu","53"],["Curaçao","cw","599"],["Cyprus","cy","357"],["Czech Republic","cz","420"],["Denmark","dk","45",".. .. .. .."],["Djibouti","dj","253"],["Dominica","dm","1767"],["Dominican Republic","do","1","(...) ...-....",100],["Ecuador","ec","593"],["Egypt","eg","20"],["El Salvador","sv","503","....-...."],["Equatorial Guinea","gq","240"],["Eritrea","er","291"],["Estonia","ee","372"],["Ethiopia","et","251"],["Falkland Islands","fk","500"],["Faroe Islands","fo","298"],["Fiji","fj","679"],["Finland","fi","358",".. ... .. .."],["French Guiana","gf","594"],["French Polynesia","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia","ge","995"],["Ghana","gh","233"],["Gibraltar","gi","350"],["Greece","gr","30","... ......."],["Greenland","gl","299"],["Grenada","gd","1473"],["Guadeloupe","gp","590"],["Guam","gu","1671"],["Guatemala","gt","502","....-...."],["Guinea","gn","224"],["Guinea-Bissau","gw","245"],["Guyana","gy","592"],["Haiti","ht","509","....-...."],["Honduras","hn","504"],["Hong Kong","hk","852",".... ...."],["Hungary","hu","36"],["Iceland","is","354","... ...."],["Indonesia","id","62"],["Iran","ir","98"],["Iraq","iq","964"],["Ireland","ie","353",".. ......."],["Israel","il","972"],["Italy","it","39","... ......"],["Jamaica","jm","1876"],["Japan","jp","81","... .. ...."],["Jordan","jo","962"],["Kazakhstan","kz","7","... ...-..-.."],["Kenya","ke","254"],["Kiribati","ki","686"],["Kuwait","kw","965"],["Kyrgyzstan","kg","996"],["Laos","la","856"],["Latvia","lv","371"],["Lebanon","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya","ly","218"],["Liechtenstein","li","423"],["Lithuania","lt","370"],["Luxembourg","lu","352"],["Macau","mo","853"],["Macedonia","mk","389"],["Madagascar","mg","261"],["Malawi","mw","265"],["Malaysia","my","60","..-....-...."],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania","mr","222"],["Mauritius","mu","230"],["Mexico","mx","52"],["Micronesia","fm","691"],["Moldova","md","373"],["Monaco","mc","377"],["Mongolia","mn","976"],["Montenegro","me","382"],["Montserrat","ms","1664"],["Morocco","ma","212"],["Mozambique","mz","258"],["Myanmar","mm","95"],["Namibia","na","264"],["Nauru","nr","674"],["Nepal","np","977"],["Netherlands","nl","31",".. ........"],["New Caledonia","nc","687"],["New Zealand","nz","64","...-...-...."],["Nicaragua","ni","505"],["Niger","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea","kp","850"],["Northern Mariana Islands","mp","1670"],["Norway","no","47","... .. ..."],["Oman","om","968"],["Pakistan","pk","92","...-......."],["Palau","pw","680"],["Palestine","ps","970"],["Panama","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru","pe","51"],["Philippines","ph","63","... ...."],["Poland","pl","48","...-...-..."],["Portugal","pt","351"],["Puerto Rico","pr","1","(...) ...-....",100],["Qatar","qa","974"],["Réunion","re","262"],["Romania","ro","40"],["Rwanda","rw","250"],["Saint Barthélemy","bl","590"],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Martin","mf","590"],["Saint Pierre and Miquelon","pm","508"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["São Tomé and Príncipe","st","239"],["Saudi Arabia","sa","966"],["Senegal","sn","221"],["Serbia","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65","....-...."],["Sint Maarten","sx","1721"],["Slovakia","sk","421"],["Slovenia","si","386"],["Solomon Islands","sb","677"],["Somalia","so","252"],["South Africa","za","27"],["South Korea","kr","82"],["South Sudan","ss","211"],["Spain","es","34","... ... ..."],["Sri Lanka","lk","94"],["Sudan","sd","249"],["Suriname","sr","597"],["Swaziland","sz","268"],["Sweden","se","46",".. ... .. .."],["Switzerland","ch","41",".. ... .. .."],["Syria","sy","963"],["Taiwan","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia","tn","216"],["Turkey","tr","90","... ... .. .."],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1649"],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1340"],["Uganda","ug","256"],["Ukraine","ua","380"],["United Arab Emirates","ae","971"],["Uruguay","uy","598"],["Uzbekistan","uz","998"],["Vanuatu","vu","678"],["Vatican City","va","39",".. .... ...."],["Venezuela","ve","58"],["Vietnam","vn","84"],["Wallis and Futuna","wf","681"],["Yemen","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"]],n=new Set(["907","205","251","256","334","479","501","870","480","520","602","623","928","209","213","310","323","408","415","510","530","559","562","619","626","650","661","707","714","760","805","818","831","858","909","916","925","949","951","303","719","970","203","860","202","302","239","305","321","352","386","407","561","727","772","813","850","863","904","941","954","229","404","478","706","770","912","808","319","515","563","641","712","208","217","309","312","618","630","708","773","815","847","219","260","317","574","765","812","316","620","785","913","270","502","606","859","225","318","337","504","985","413","508","617","781","978","301","410","207","231","248","269","313","517","586","616","734","810","906","989","218","320","507","612","651","763","952","314","417","573","636","660","816","228","601","662","406","252","336","704","828","910","919","701","308","402","603","201","609","732","856","908","973","505","575","702","775","212","315","516","518","585","607","631","716","718","845","914","216","330","419","440","513","614","740","937","405","580","918","503","541","215","412","570","610","717","724","814","401","803","843","864","605","423","615","731","865","901","931","210","214","254","281","325","361","409","432","512","713","806","817","830","903","915","936","940","956","972","979","435","801","276","434","540","703","757","804","802","206","253","360","425","509","262","414","608","715","920","304","307"]),r={ca:new Set(["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]),us:n,do:new Set(["809","829","849"]),pr:new Set(["787","939"])},i=([e,a,n,r="",i=0])=>({code:n,iso:a,name:e,pattern:r,priority:i}),t=a.reduce((e,a)=>e.set(a[1],i(a)),new Map),s=a.reduce((e,a)=>{let n=a[2],r=i(a);return e.get(n)?e.get(n).push(r):e.set(n,[r]),e},new Map);function o(e,a){if(!e||!a)return e;let n=Array.from(l(e));if(0===n.length)return"";let r="",i=0;for(let e=0;e<a.length&&i<n.length;e++)"."===a[e]?(r+=n[i],i++):(r+=a[e],e===a.length-1&&i<n.length&&(r+=n.slice(i).join("")));return i<n.length&&(r+=n.slice(i).join("")),r}function l(e){return(e||"").replace(/[^\d]/g,"")}function d(e){let a=l(e),n=function(e,a="us"){let n=l(e);if(!n||n.length<4)return a;if(n.startsWith("1")){for(let e of["us","ca","do","pr"])if(function(e,a){if(!e||!t.get(e)||!a)return!1;let n=a[0],i=a.substring(1,4);return n===t.get(e)?.code&&a.length-1===((t.get(e)?.pattern||"").match(/\./g)||[]).length&&r[e].has(i)}(e,n))return e}return function(e){let a=l(e),n=[];for(let e of[4,3,2,1]){let r=a.substring(0,e),i=s.get(r)||[];i.length&&n.push(...i)}let r=t.get("us"),i=n.sort(u)[0]||r,o=a.slice(i?.code.length||0);return{country:i,number:o}}(n).country.iso}(a),i=t.get(n)?.pattern||"",d=t.get(n)?.code||"",c=a.slice(d.length),m=o(c,i),g=`+${d} ${m}`;return{code:d,formattedNumber:m,formattedNumberWithCode:g,iso:n,number:c,pattern:i}}e.s(["CodeToCountriesMap",0,s,"IsoToCountryMap",0,t,"SubAreaCodeSets",0,r],567112);let u=(e,a)=>a.priority-e.priority;e.s(["extractDigits",()=>l,"formatPhoneNumber",()=>o,"parsePhoneString",()=>d],617765)},704522,e=>{"use strict";var a=e.i(720796),n=e.i(982942);e.s(["createOrganizationRole",0,(e,n,{getToken:r})=>(0,a.request)({data:n,method:"POST",path:`/v1/instances/${e}/organization_roles`,getToken:r}),"deleteOrganizationRole",0,(e,n,{getToken:r})=>(0,a.request)({method:"DELETE",path:`/v1/instances/${e}/organization_roles/${n}`,getToken:r}),"organizationRoleQuery",0,(e,r,{getToken:i})=>(0,n.queryOptions)({queryFn:()=>(0,a.request)({method:"GET",path:`/v1/instances/${e}/organization_roles/${r}`,getToken:i}),queryKey:["organizationRole",e,r]}),"organizationRolesQuery",0,(e,{limit:r=50,query:i="",orderBy:t="name",getToken:s})=>{let o=new URLSearchParams;return o.set("limit",String(r)),o.set("order_by",t),i&&o.set("query",i),(0,n.queryOptions)({queryFn:()=>(0,a.request)({path:`/v1/instances/${e}/organization_roles?${o}`,getToken:s}),queryKey:["organizationRoles",e,i,t,r]})},"patchOrganizationRole",0,(e,n,r,{getToken:i})=>(0,a.request)({data:r,method:"PATCH",path:`/v1/instances/${e}/organization_roles/${n}`,getToken:i})])},774926,e=>{"use strict";let a=(e,a)=>{let n=e.role_set_migration;return!!n&&"role_removal"===n.trigger_type&&n.source_role_set_id===e.id&&Object.keys(n.mappings).includes(a.key)},n="role_set:",r=e=>e.startsWith(n)?e.slice(n.length):e,i=e=>{let a=e.role_set_migration;return!!a&&"roleset_deletion"===a.trigger_type&&a.source_role_set_id===e.id};function t(e,a){let n=new Map(e.map(e=>[e.key,e])),r=new Map(a.map(e=>[e.key,e])),i=e.filter(e=>!r.has(e.key)),t=i.filter(e=>e.has_members);return{needsReassignment:e.some(e=>e.has_members),needsRemapping:t.length>0,removedRoles:i.map(e=>e.key),affectedRoles:t.map(e=>e.key),preservedRoles:a.filter(e=>n.has(e.key)).map(e=>e.key),addedRoles:a.filter(e=>!n.has(e.key)).map(e=>e.key)}}function s(e,a,n){let r=new Map(e.map(e=>[e.key,e])),i=new Map(a.map(e=>[e.key,e])),t=Object.values(n);return Array.from(new Set([...e.map(e=>e.key),...a.filter(e=>!t.includes(e.key)).map(e=>e.key)])).map(e=>{let a=r.get(e),t=i.get(n[e])||i.get(e);return{key:e,currentRole:a?{key:a.key,name:a.name}:null,newRole:t?{key:t.key,name:t.name}:null,membersCount:a?.members_count??0}})}e.s(["calculateRoleSetReassignmentDiff",()=>t,"reassignmentItems",()=>s,"roleSetSlug",0,r,"toOrganizationRoleSet",0,(e,n)=>{var t,s;let o;return{...e,slug:r(e.key),isMigrating:(t=e,s=n,!!(o=t.role_set_migration)&&(i(t)||"org_update"===o.trigger_type&&o.organization_id===s||"role_removal"===o.trigger_type&&o.source_role_set_id===t.id)),isDeletable:!e.role_set_migration,roles:e.roles.map(r=>({...r,isMigrating:((e,n,r)=>{if(a(e,n))return!0;let i=e.role_set_migration;return!!i&&"org_update"===i.trigger_type&&i.dest_role_set_id===e.id&&i.organization_id===r&&Object.entries(i.mappings).some(([e,a])=>e!==a&&a===n.key)})(e,r,n),isRemovable:!e.role_set_migration}))}},"toRoleSet",0,e=>({...e,slug:r(e.key),isMigrating:i(e),isDeletable:!e.role_set_migration,roles:e.roles.map(n=>({...n,isMigrating:a(e,n),isRemovable:!e.role_set_migration}))})],774926)},633220,e=>{"use strict";var a=e.i(73677),n=e.i(521322),r=e.i(820041),i=e.i(689994),t=e.i(433270),s=e.i(412939),o=e.i(247854),l=e.i(70038),d=e.i(503666),u=e.i(357707),c=e.i(276409),m=e.i(758040),g=e.i(364890),h=e.i(158819),p=e.i(630763);function b(e){return"pending"===e.status}function y(e){return e.organization_id}function f(e){return{...e,errorMap:{}}}function x(e){return{label:e.name,id:e.key,isMigrating:"isMigrating"in e&&e.isMigrating}}function v(){return(0,a.jsx)(c.Spinner,{size:"sm"})}e.s(["OrganizationField",0,e=>{let o,l,d,u,c,h=(0,n.c)(22),{form:x,fieldName:v,label:S,optional:j}=e,C=void 0===S?"Organization":S,{getToken:_}=(0,m.useAuth)(),{instanceId:k,userId:z}=(0,s.useTypedParams)(),M=!z;h[0]!==_||h[1]!==k||h[2]!==M||h[3]!==z?(o=(0,i.disableSuspenseQuery)(M,(0,r.listUserOrganizationInvitationsQuery)(k,z,{getToken:_})),h[0]=_,h[1]=k,h[2]=M,h[3]=z,h[4]=o):o=h[4];let{data:q}=(0,g.useSuspenseQuery)(o),w=q?.data;e:{let e;if(!w){let e;h[5]===Symbol.for("react.memo_cache_sentinel")?(e=[],h[5]=e):e=h[5],l=e;break e}h[6]!==w?(e=w.filter(b).map(y),h[6]=w,h[7]=e):e=h[7],l=e}let P=l;return h[8]!==j?(d=j?void 0:{onSubmit:p.default.string().min(1,"Please select an organization")},h[8]=j,h[9]=d):d=h[9],h[10]!==P||h[11]!==v||h[12]!==x||h[13]!==C||h[14]!==j||h[15]!==z?(u=e=>(0,a.jsx)(t.SelectOrganization,{id:e.name,value:e.state.value,label:C,isOptional:j,excludeOrganizationIds:P,filterByUserId:z,onChange:a=>{e.handleChange(a),x.setFieldMeta(v,f)},errors:e.state.meta.errors}),h[10]=P,h[11]=v,h[12]=x,h[13]=C,h[14]=j,h[15]=z,h[16]=u):u=h[16],h[17]!==v||h[18]!==x.Field||h[19]!==d||h[20]!==u?(c=(0,a.jsx)(x.Field,{name:v,validators:d,children:u}),h[17]=v,h[18]=x.Field,h[19]=d,h[20]=u,h[21]=c):c=h[21],c},"RoleField",0,e=>{let r,i,t=(0,n.c)(10),{form:s,fieldName:c,label:m,optional:g,organizationRoles:p,domainsDefaultRole:b}=e,y=void 0===m?"Role":m;return t[0]!==b||t[1]!==c||t[2]!==y||t[3]!==g||t[4]!==p?(r=e=>(0,a.jsxs)(u.SelectField,{id:c,label:y,isOptional:g,name:c,placeholder:"Select...",selectedKey:e.state.value,onSelectionChange:a=>e.handleChange(a),children:[(0,a.jsx)(l.Button,{}),(0,a.jsx)(d.Popover,{children:(0,a.jsx)(d.ListBox,{items:p.map(x),children:e=>(0,a.jsx)(d.ListBoxItem,{isDisabled:e.isMigrating,children:(0,a.jsxs)("span",{className:"flex items-center gap-x-2",children:[(0,a.jsx)(h.Text,{slot:"label",className:"truncate",children:e.label}),e.isMigrating?(0,a.jsx)(o.Badge,{variant:"dashed",icon:v,children:"Migrating"}):e.id===b?(0,a.jsx)(o.Badge,{variant:"secondary",children:"Default"}):null]})})})})]}),t[0]=b,t[1]=c,t[2]=y,t[3]=g,t[4]=p,t[5]=r):r=t[5],t[6]!==c||t[7]!==s.Field||t[8]!==r?(i=(0,a.jsx)(s.Field,{name:c,children:r}),t[6]=c,t[7]=s.Field,t[8]=r,t[9]=i):i=t[9],i}])},703556,e=>{"use strict";var a=e.i(538040),n=e.i(720796),r=e.i(982942);e.s(["createNewOrganizationMembership",0,(e,a,r,{getToken:i})=>(0,n.request)({data:r,method:"POST",path:`/v1/instances/${e}/organizations/${a}/memberships`,getToken:i}),"deleteSpecificUserOrganizationMembership",0,(e,a,r,{getToken:i})=>(0,n.request)({method:"DELETE",path:`/v1/instances/${e}/organizations/${r}/memberships/${a}`,getToken:i}),"membershipsQuery",0,(e,i,{page:t,limit:s=10,query:o="",orderBy:l="-created_at",filters:d=[],getToken:u})=>(0,r.queryOptions)({queryFn:()=>((e,r,{page:i,limit:t=10,query:s="",orderBy:o="-created_at",filters:l=[],getToken:d})=>{let u=new URLSearchParams;return u.set("limit",String(t)),u.set("offset",String((i-1)*t)),u.set("order_by",o),s&&u.set("query",s),(0,a.addFiltersToSearchParams)(u,l),(0,n.request)({path:`/v1/instances/${e}/organizations/${r}/memberships?${u}`,getToken:d})})(e,i,{page:t,limit:s,query:o,orderBy:l,getToken:u,filters:d}),queryKey:["memberships",e,i,t,s,o,l,(0,a.queryKeyFromFilters)(d)]}),"patchOrganizationMembership",0,(e,a,r,i,{getToken:t})=>(0,n.request)({data:i,method:"PATCH",path:`/v1/instances/${e}/organizations/${a}/memberships/${r}`,getToken:t}),"specificUserOrganizationMembershipsQuery",0,(e,a,{getToken:i})=>(0,r.queryOptions)({queryFn:()=>(0,n.request)({path:`/v1/instances/${e}/users/${a}/organization_memberships?limit=500`,getToken:i}),queryKey:["userSpecificOrganizationMemberships",e,a]})])},315648,e=>{"use strict";var a=e.i(73677),n=e.i(521322),r=e.i(567112),i=e.i(617765),t=e.i(70038),s=e.i(503666),o=e.i(357707),l=e.i(706537),d=e.i(184260),u=e.i(806348),c=e.i(556372),m=e.i(504479);let g=Array.from(r.IsoToCountryMap.values()).map(e=>({...e,id:e.iso,label:e.name}));function h(e){let r,h,f,x,v,S,j,C,_,k,z,M,q=(0,n.c)(34);q[0]!==e?({value:x,onChange:h,isDisabled:r,...f}=e,q[0]=e,q[1]=r,q[2]=h,q[3]=f,q[4]=x):(r=q[1],h=q[2],f=q[3],x=q[4]);let[w,P]=d.default.useState("us");q[5]!==w?(v=g.find(e=>e.iso===w)||g[0],q[5]=w,q[6]=v):v=q[6];let F=v,[T,A]=d.default.useState("");q[7]!==x?(S=()=>{if(null!=x){let{iso:e,formattedNumber:a}=(0,i.parsePhoneString)(String(x));P(e),A(a)}else A("")},q[7]=x,q[8]=S):S=q[8],q[9]!==F||q[10]!==x?(j=[x,F],q[9]=F,q[10]=x,q[11]=j):j=q[11],d.default.useEffect(S,j),q[12]!==h||q[13]!==F.code||q[14]!==F.pattern?(C=e=>{let a=(0,i.extractDigits)(e),n=(0,i.formatPhoneNumber)(a,F.pattern);A(n);let r=n?`+${F.code} ${n}`:"";h?.(r)},q[12]=h,q[13]=F.code,q[14]=F.pattern,q[15]=C):C=q[15];let B=C;q[16]!==T||q[17]!==h?(_=e=>{P(e.iso);let a=(0,i.extractDigits)(T),n=(0,i.formatPhoneNumber)(a,e.pattern);A(n);let r=n?`+${e.code} ${n}`:"";h?.(r)},q[16]=T,q[17]=h,q[18]=_):_=q[18];let I=_,[O,R]=(0,c.useMeasure)();return q[19]!==I||q[20]!==r||q[21]!==w||q[22]!==R.width||q[23]!==F.code?(k=(0,a.jsx)(y,{children:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m.SearchableSelectField,{items:g,isDisabled:r,selectedKey:w,className:"contents rounded-[inherit]",onSelectionChange:I,children:[(0,a.jsx)(y,{children:n=>{let{className:r,...i}=n;return(0,a.jsx)(t.Button,{...(0,u.mergeProps)(i,e,{variant:"primary",iconPosition:"end",className:"w-auto"}),children:(0,a.jsx)(o.SelectValue,{children:b})})}}),(0,a.jsx)(s.Popover,{placement:"bottom start",style:{width:`${R.width}px`},children:(0,a.jsx)(m.SearchableSelectOptions,{items:g,children:p})})]}),(0,a.jsxs)("span",{className:"ml-2",children:["+",F.code]})]})}),q[19]=I,q[20]=r,q[21]=w,q[22]=R.width,q[23]=F.code,q[24]=k):k=q[24],q[25]!==O||q[26]!==k?(z=(0,a.jsx)(l.Input,{ref:O,start:k}),q[25]=O,q[26]=k,q[27]=z):z=q[27],q[28]!==B||q[29]!==r||q[30]!==T||q[31]!==f||q[32]!==z?(M=(0,a.jsx)(l.TextField,{isDisabled:r,value:T,onChange:B,...f,children:z}),q[28]=B,q[29]=r,q[30]=T,q[31]=f,q[32]=z,q[33]=M):M=q[33],M}function p(e){return(0,a.jsxs)("span",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsxs)("span",{className:"text-ceramic-body-2 text-ceramic-secondary",children:["+",e.code]})]})}function b(e){let{selectedItems:a}=e,[n]=a;return n?.iso.toUpperCase()}function y({children:e}){return e((0,d.use)(t.ButtonPropsContext))}e.s(["PhoneField",()=>h])},791804,e=>{"use strict";var a=e.i(73677),n=e.i(521322),r=e.i(633220),i=e.i(411048),t=e.i(56804),s=e.i(703556),o=e.i(315648),l=e.i(548011),d=e.i(721376),u=e.i(412939),c=e.i(685262),m=e.i(247854),g=e.i(70038),h=e.i(744444),p=e.i(995304),b=e.i(109821),y=e.i(503666),f=e.i(357707),x=e.i(276409),v=e.i(706537),S=e.i(275630),j=e.i(874624),C=e.i(758040),_=e.i(438439),k=e.i(104477),z=e.i(237206),M=e.i(683471),q=e.i(184260),w=e.i(158819),P=e.i(873236),F=e.i(774926);let T=(0,q.createContext)(void 0);function A(e){let r,t,o,m,g,h,p,y,f,x,v,j,k,q,w,P,F,A,O,R=(0,n.c)(66),{children:N,attributes:$,legalConsentEnabled:D,organizationsEnabled:K,domainsDefaultRole:E,organizationRoles:L,organizationId:U}=e,{getToken:G}=(0,C.useAuth)(),{instanceId:Q}=(0,u.useTypedParams)(),H=(0,M.useRouter)(),V=(0,M.usePathname)(),{close:W}=(0,b.useDialog)(),J=(0,z.useQueryClient)();R[0]!==G||R[1]!==Q?(r=e=>(0,i.createUser)(Q,e,{getToken:G}),R[0]=G,R[1]=Q,R[2]=r):r=R[2],R[3]!==Q||R[4]!==J?(t=async()=>{await Promise.all([J.invalidateQueries({queryKey:["instance",Q]}),J.invalidateQueries({queryKey:["users",Q]}),J.invalidateQueries({queryKey:["usersWithoutCount",Q]}),J.invalidateQueries({queryKey:["usersCount",Q]})])},R[3]=Q,R[4]=J,R[5]=t):t=R[5];let{mutateAsync:Z}=(0,_.useMutation)({mutationFn:r,onSuccess:t,onError:e=>{e instanceof l.HTTPError&&422===e.code&&e.globalErrors?.[0]?.meta?.param_names?.includes("legal_accepted_at")&&es.setFieldMeta("legal_accepted_at",I)}});R[6]!==G||R[7]!==Q?(o=e=>{let{userId:a,organizationId:n,role:r}=e;return(0,s.createNewOrganizationMembership)(Q,n,{role:r,user_Id:a},{getToken:G})},R[6]=G,R[7]=Q,R[8]=o):o=R[8],R[9]!==W?(m=e=>{S.toast.error((0,l.getToastErrorMessage)(e,"Created user successfully, but failed to add user to organization.")),W()},R[9]=W,R[10]=m):m=R[10],R[11]!==Q||R[12]!==U||R[13]!==J?(g=async e=>{let{user_id:a}=e;await Promise.all([J.invalidateQueries({queryKey:["userSpecificOrganizationMemberships",Q,a]}),J.invalidateQueries({queryKey:["organizations"]}),J.invalidateQueries({queryKey:["memberships",Q]}),J.invalidateQueries({queryKey:["organizationRoleSet",Q,U]})])},R[11]=Q,R[12]=U,R[13]=J,R[14]=g):g=R[14],R[15]!==o||R[16]!==m||R[17]!==g?(h={mutationFn:o,onError:m,onSuccess:g},R[15]=o,R[16]=m,R[17]=g,R[18]=h):h=R[18];let{mutateAsync:Y}=(0,_.useMutation)(h),{email_address:X,first_name:ee,last_name:ea,phone_number:en,password:er,username:ei}=$;R[19]!==ee.enabled?(p=ee.enabled&&{first_name:""},R[19]=ee.enabled,R[20]=p):p=R[20],R[21]!==ea.enabled?(y=ea.enabled&&{last_name:""},R[21]=ea.enabled,R[22]=y):y=R[22],R[23]!==X.enabled?(f=X.enabled&&{email_address:""},R[23]=X.enabled,R[24]=f):f=R[24],R[25]!==ei.enabled?(x=ei.enabled&&{username:""},R[25]=ei.enabled,R[26]=x):x=R[26],R[27]!==en.enabled?(v=en.enabled&&{phone_number:""},R[27]=en.enabled,R[28]=v):v=R[28],R[29]!==er.enabled||R[30]!==er.required?(j=er.enabled&&er.required&&{password:"",skip_password_checks:!1},R[29]=er.enabled,R[30]=er.required,R[31]=j):j=R[31],R[32]!==D?(k=D&&{skip_legal_checks:!1,legal_accepted_at:!1},R[32]=D,R[33]=k):k=R[33],R[34]!==U||R[35]!==K?(q=K&&{organization:U||""},R[34]=U,R[35]=K,R[36]=q):q=R[36],R[37]!==E||R[38]!==L?(w=L&&{role:E||(L[0]?.key??"")},R[37]=E,R[38]=L,R[39]=w):w=R[39],R[40]!==x||R[41]!==v||R[42]!==j||R[43]!==k||R[44]!==q||R[45]!==w||R[46]!==p||R[47]!==y||R[48]!==f?(P={...p,...y,...f,...x,...v,...j,...k,...q,...w},R[40]=x,R[41]=v,R[42]=j,R[43]=k,R[44]=q,R[45]=w,R[46]=p,R[47]=y,R[48]=f,R[49]=P):P=R[49];let et=P;R[50]!==U||R[51]!==K||R[52]!==V||R[53]!==H?(F={onComplete:()=>{if(K&&U){let e=(0,c.to)(V,{page:`/organizations/${U}`,search:new URLSearchParams("org_tab=members")});V!==e&&H.push(e)}},ignoreError:B},R[50]=U,R[51]=K,R[52]=V,R[53]=H,R[54]=F):F=R[54];let es=(0,d.useDialogForm)({defaultValues:et,onSubmit:async e=>{let{value:a}=e,{email_address:n,phone_number:r,legal_accepted_at:i,...t}=es.parseDirtyValues(a),s={...t};n&&(s.email_address=[n]),r&&(s.phone_number=[r]),i&&(s.legal_accepted_at=new Date().toISOString());let o=await Z(s);K&&o.id&&a.role&&(a.organization||U)&&await Y({userId:o.id,organizationId:a.organization||U,role:a.role})}},F);R[55]!==$||R[56]!==E||R[57]!==es||R[58]!==D||R[59]!==U||R[60]!==L||R[61]!==K?(A={form:es,attributes:$,legalConsentEnabled:D,organizationsEnabled:K,organizationRoles:L,prefilledOrganization:U,domainsDefaultRole:E},R[55]=$,R[56]=E,R[57]=es,R[58]=D,R[59]=U,R[60]=L,R[61]=K,R[62]=A):A=R[62];let eo=A;return R[63]!==N||R[64]!==eo?(O=(0,a.jsx)(T,{value:eo,children:N}),R[63]=N,R[64]=eo,R[65]=O):O=R[65],O}function B(e){return"form_data_missing"===e.code}function I(e){return{...e,errorMap:{...e.errorMap,onSubmit:"You must accept the legal documents or skip the legal consent check to create a user"}}}function O(){let e=q.default.useContext(T);if(void 0===e)throw Error("useCreateUserContext must be used within a CreateUserProvider");return e}function R(){let e,i,t,s,l,d,u,c,b=(0,n.c)(42),{form:x,attributes:S,legalConsentEnabled:j,organizationsEnabled:C,organizationRoles:_,prefilledOrganization:k,domainsDefaultRole:z}=O(),{Field:M}=x,{email_address:q,first_name:F,last_name:T,phone_number:A,password:B,username:I}=S;return b[0]!==M||b[1]!==F.enabled||b[2]!==F.required||b[3]!==T?(e=F.enabled&&T.enabled&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[F.enabled&&(0,a.jsx)(M,{name:"first_name",validators:{onChangeAsync:P.z.string().min(+!!F.required,"First name is required"),onChangeAsyncDebounceMs:300},children:e=>(0,a.jsx)(v.TextField,{name:e.name,label:"First name",isOptional:!F.required,value:e.state.value,onChange:e.handleChange,errors:e.state.meta.errors})}),T.enabled&&(0,a.jsx)(M,{name:"last_name",validators:{onChangeAsync:P.z.string().min(+!!T.required,"Last name is required"),onChangeAsyncDebounceMs:300},children:e=>(0,a.jsx)(v.TextField,{name:e.name,label:"Last name",isOptional:!T.required,value:e.state.value,onChange:e.handleChange,errors:e.state.meta.errors})})]}),b[0]=M,b[1]=F.enabled,b[2]=F.required,b[3]=T,b[4]=e):e=b[4],b[5]!==M||b[6]!==q.enabled||b[7]!==q.required?(i=q.enabled&&(0,a.jsx)(M,{name:"email_address",validators:{onChangeAsync:P.z.string().min(+!!q.required,"Email address is required"),onChangeAsyncDebounceMs:300},children:e=>(0,a.jsx)(v.TextField,{name:e.name,type:"email",label:"Email",placeholder:"name@example.com",isOptional:!q.required,value:e.state.value,onChange:e.handleChange,errors:e.state.meta.errors})}),b[5]=M,b[6]=q.enabled,b[7]=q.required,b[8]=i):i=b[8],b[9]!==M||b[10]!==I.enabled||b[11]!==I.required?(t=I.enabled&&(0,a.jsx)(M,{name:"username",validators:{onChangeAsync:P.z.string().min(+!!I.required,"Username is required"),onChangeAsyncDebounceMs:300},children:e=>(0,a.jsx)(v.TextField,{name:e.name,label:"Username",isOptional:!I.required,value:e.state.value,onChange:e.handleChange,errors:e.state.meta.errors})}),b[9]=M,b[10]=I.enabled,b[11]=I.required,b[12]=t):t=b[12],b[13]!==M||b[14]!==A.enabled||b[15]!==A.required?(s=A.enabled&&(0,a.jsx)(M,{name:"phone_number",validators:{onChangeAsync:P.z.string().min(+!!A.required,"Phone number is required"),onChangeAsyncDebounceMs:300},children:e=>(0,a.jsx)(o.PhoneField,{label:"Phone number",name:e.name,isOptional:!A.required,onChange:a=>{e.handleChange(a)},errors:e.state.meta.errors})}),b[13]=M,b[14]=A.enabled,b[15]=A.required,b[16]=s):s=b[16],b[17]!==M||b[18]!==x||b[19]!==B.enabled||b[20]!==B.required?(l=B.enabled&&B.required&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M,{name:"password",validators:{onChangeAsync:P.z.string().min(+!!B.required,"Password is required"),onChangeAsyncDebounceMs:300},children:e=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.TextField,{name:e.name,label:"Password",isOptional:!B.required,value:e.state.value,onChange:e.handleChange,errors:e.state.meta.errors,children:(0,a.jsx)(E,{})})})}),(0,a.jsx)(M,{name:"skip_password_checks",children:e=>(0,a.jsx)(h.CheckboxGroup,{errors:e.state.meta.errors,children:(0,a.jsx)(h.CheckboxField,{name:e.name,label:"Ignore password policies",description:"If checked, password policies will not be enforced on this password.",isSelected:e.state.value,onChange:a=>{x.setFieldMeta("password",K),e.handleChange(a)}})})})]}),b[17]=M,b[18]=x,b[19]=B.enabled,b[20]=B.required,b[21]=l):l=b[21],b[22]!==M||b[23]!==z||b[24]!==x||b[25]!==_||b[26]!==C||b[27]!==k?(d=C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{}),!k&&(0,a.jsx)(r.OrganizationField,{form:x,fieldName:"organization",label:"Add to organization",optional:!0}),_?(0,a.jsx)(M,{name:"role",validators:{onChangeAsync:P.z.string().min(1,"Please select a role"),onChangeAsyncDebounceMs:300},children:e=>(0,a.jsxs)(f.SelectField,{label:"Role",placeholder:"Select...",selectedKey:e.state.value,onSelectionChange:a=>e.handleChange(a),errors:e.state.meta.errors,children:[(0,a.jsx)(g.Button,{}),(0,a.jsx)(y.Popover,{children:(0,a.jsx)(y.ListBox,{children:_.map(e=>(0,a.jsx)(y.ListBoxItem,{id:e.key,isDisabled:"isMigrating"in e&&e.isMigrating,children:(0,a.jsxs)("span",{className:"flex items-center gap-x-2",children:[(0,a.jsx)(w.Text,{slot:"label",className:"truncate",children:e.name}),"isMigrating"in e&&e.isMigrating?(0,a.jsx)(m.Badge,{variant:"dashed",icon:D,children:"Migrating"}):e.key===z?(0,a.jsx)(m.Badge,{variant:"secondary",children:"Default"}):null]})},e.key))})})]})}):(0,a.jsx)(x.Subscribe,{selector:$,children:e=>(0,a.jsx)(p.Collapsible,{children:e&&(0,a.jsx)(M,{name:"role",validators:{onChangeAsync:P.z.string().min(1,"Please select a role"),onChangeAsyncDebounceMs:300},children:n=>(0,a.jsx)(Q,{label:"Role",organizationId:e,selectedKey:n.state.value,onSelectionChange:e=>n.handleChange(e),errors:n.state.meta.errors})})})})]}),b[22]=M,b[23]=z,b[24]=x,b[25]=_,b[26]=C,b[27]=k,b[28]=d):d=b[28],b[29]!==M||b[30]!==x||b[31]!==j?(u=j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("hr",{}),(0,a.jsx)(M,{name:"legal_accepted_at",children:e=>(0,a.jsxs)(h.CheckboxGroup,{errors:e.state.meta.errors,children:[(0,a.jsx)(M,{name:"skip_legal_checks",children:e=>(0,a.jsx)(h.CheckboxField,{name:e.name,label:"Skip legal consent check",description:"If checked, legal consent check will not be enforced on this user.",isSelected:e.state.value,onChange:a=>{x.setFieldMeta("legal_accepted_at",N),e.handleChange(a)}})}),(0,a.jsx)(h.CheckboxField,{name:e.name,label:"Mark as having accepted legal documents",description:"If checked, the user will be marked as having accepted the legal documents.",isSelected:e.state.value,onChange:a=>e.handleChange(a)})]})})]}),b[29]=M,b[30]=x,b[31]=j,b[32]=u):u=b[32],b[33]!==x.formProps||b[34]!==e||b[35]!==i||b[36]!==t||b[37]!==s||b[38]!==l||b[39]!==d||b[40]!==u?(c=(0,a.jsxs)("form",{...x.formProps,autoComplete:"off",className:"space-y-5",children:[e,i,t,s,l,d,u]}),b[33]=x.formProps,b[34]=e,b[35]=i,b[36]=t,b[37]=s,b[38]=l,b[39]=d,b[40]=u,b[41]=c):c=b[41],c}function N(e){return{...e,errorMap:{}}}function $(e){return e.values.organization}function D(){return(0,a.jsx)(x.Spinner,{size:"sm"})}function K(e){return{...e,errorMap:{...e.errorMap,onSubmit:void 0}}}function E(e){let r,i,t,s,o=(0,n.c)(11);o[0]!==e?({...r}=e,o[0]=e,o[1]=r):r=o[1];let[l,d]=(0,q.useState)(!1),u=l?"text":"password";o[2]!==l?(i=()=>d(!l),o[2]=l,o[3]=i):i=o[3];let c=l?"Hide password":"Show password";return o[4]!==i||o[5]!==c?(t=(0,a.jsx)(g.ToggleButton,{icon:j.EyeIcon,onPress:i,variant:"secondary","aria-label":c}),o[4]=i,o[5]=c,o[6]=t):t=o[6],o[7]!==r||o[8]!==u||o[9]!==t?(s=(0,a.jsx)(v.Input,{type:u,end:t,...r}),o[7]=r,o[8]=u,o[9]=t,o[10]=s):s=o[10],s}function L(){let{form:e}=O();return e.notices}function U(){let e,r,i=(0,n.c)(5),{form:t}=O();return i[0]!==t.submitButtonProps?(e=e=>(0,a.jsx)(g.Button,{...t.submitButtonProps,"data-test-cansubmit":e,"data-testid":"create-user",pendingAriaLabel:"Creating user",children:"Create user"}),i[0]=t.submitButtonProps,i[1]=e):e=i[1],i[2]!==t.Subscribe||i[3]!==e?(r=(0,a.jsx)(b.DialogFooter,{button:(0,a.jsx)(t.Subscribe,{selector:G,children:e})}),i[2]=t.Subscribe,i[3]=e,i[4]=r):r=i[4],r}function G(e){return e.canSubmit}function Q(e){let r,i,s,o,l,d,c,h,p,b,x,v,S=(0,n.c)(30);S[0]!==e?({organizationId:i,onSelectionChange:r,...s}=e,S[0]=e,S[1]=r,S[2]=i,S[3]=s):(r=S[1],i=S[2],s=S[3]);let{getToken:j}=(0,C.useAuth)(),{instanceId:_}=(0,u.useTypedParams)();S[4]!==j||S[5]!==_||S[6]!==i?(o=(0,t.organizationRoleSetQuery)(_,i,{getToken:j}),S[4]=j,S[5]=_,S[6]=i,S[7]=o):o=S[7];let z=!!i;S[8]!==o||S[9]!==z?(l={...o,select:F.toRoleSet,enabled:z},S[8]=o,S[9]=z,S[10]=l):l=S[10];let{data:M}=(0,k.useQuery)(l);S[11]!==M?.roles?(d=M?.roles??[],S[11]=M?.roles,S[12]=d):d=S[12];let P=d,T=(0,q.useRef)("");if(S[13]!==r||S[14]!==i||S[15]!==M?(c=()=>{M&&T.current!==i&&(r?.(M.default_role?.key??""),T.current=i)},h=[M,r,i],S[13]=r,S[14]=i,S[15]=M,S[16]=c,S[17]=h):(c=S[16],h=S[17]),(0,q.useEffect)(c,h),S[18]===Symbol.for("react.memo_cache_sentinel")?(p=(0,a.jsx)(g.Button,{}),S[18]=p):p=S[18],S[19]!==M?.default_role?.key||S[20]!==P){let e;S[22]!==M?.default_role?.key?(e=e=>(0,a.jsx)(y.ListBoxItem,{id:e.key,isDisabled:e.isMigrating,children:(0,a.jsxs)("span",{className:"flex items-center gap-x-2",children:[(0,a.jsx)(w.Text,{slot:"label",className:"truncate",children:e.name}),e.isMigrating?(0,a.jsx)(m.Badge,{variant:"dashed",icon:H,children:"Migrating"}):e.key===M?.default_role?.key?(0,a.jsx)(m.Badge,{variant:"secondary",children:"Default"}):null]})},e.key),S[22]=M?.default_role?.key,S[23]=e):e=S[23],b=P.map(e),S[19]=M?.default_role?.key,S[20]=P,S[21]=b}else b=S[21];return S[24]!==b?(x=(0,a.jsx)(y.Popover,{children:(0,a.jsx)(y.ListBox,{children:b})}),S[24]=b,S[25]=x):x=S[25],S[26]!==r||S[27]!==s||S[28]!==x?(v=(0,a.jsxs)(f.SelectField,{...s,onSelectionChange:r,children:[p,x]}),S[26]=r,S[27]=s,S[28]=x,S[29]=v):v=S[29],v}function H(){return(0,a.jsx)(x.Spinner,{size:"sm"})}e.s(["CreateUserFooter",()=>U,"CreateUserForm",()=>R,"CreateUserNotices",()=>L,"CreateUserProvider",()=>A,"OrganizationRolesSelect",()=>Q])},291419,e=>{"use strict";var a=e.i(720796),n=e.i(982942);e.s(["createOrganizationInvitation",0,(e,n,r,{getToken:i})=>(0,a.request)({data:r,method:"POST",path:`/v1/instances/${e}/organizations/${n}/invitations`,getToken:i}),"organizationInvitationsQuery",0,(e,r,{page:i,limit:t=10,statuses:s=["pending"],getToken:o})=>{let l=new URLSearchParams;return l.set("limit",String(t)),l.set("offset",String((i-1)*t)),s.forEach(e=>{"all"!==e&&l.append("status",e)}),(0,n.queryOptions)({queryFn:()=>(0,a.request)({method:"GET",path:`/v1/instances/${e}/organizations/${r}/invitations?${l}`,getToken:o}),queryKey:["organizationInvitations",e,r,i,t,s]})},"revokeOrganizationInvitation",0,(e,n,r,{getToken:i})=>(0,a.request)({method:"POST",path:`/v1/instances/${e}/organizations/${n}/invitations/${r}/revoke`,getToken:i,data:{}})])}]);