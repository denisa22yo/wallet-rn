(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,870716,e=>{"use strict";var t=e.i(521322),r=e.i(411048),a=e.i(466314),i=e.i(588526),n=e.i(8007),l=e.i(843752),o=e.i(412939),s=e.i(758040),c=e.i(223597);function d(){let e,d,m,p,g,f,x,y,v,b,_,S=(0,t.c)(43),{getToken:j}=(0,s.useAuth)(),{instanceId:w}=(0,o.useTypedParams)(),C=(0,l.useCurrentInstance)();S[0]!==j||S[1]!==w?(e=(0,r.extendedInstanceQuery)(w,{getToken:j}),S[0]=j,S[1]=w,S[2]=e):e=S[2],S[3]!==j||S[4]!==w||S[5]!==C.active_domain.id?(d=(0,i.domainStatusQuery)(w,C.active_domain.id,{getToken:j}),S[3]=j,S[4]=w,S[5]=C.active_domain.id,S[6]=d):d=S[6],S[7]!==j||S[8]!==w?(m=(0,r.userSettingsQuery)(w,{getToken:j}),S[7]=j,S[8]=w,S[9]=m):m=S[9],S[10]!==j||S[11]!==w?(p=(0,a.billingSettingsQuery)(w,{getToken:j}),S[10]=j,S[11]=w,S[12]=p):p=S[12],S[13]!==j||S[14]!==w?(g=(0,a.billingSettingsCommerceStatusQuery)(w,{getToken:j}),S[13]=j,S[14]=w,S[15]=g):g=S[15],S[16]!==e||S[17]!==d||S[18]!==m||S[19]!==p||S[20]!==g?(f={queries:[e,d,m,p,g]},S[16]=e,S[17]=d,S[18]=m,S[19]=p,S[20]=g,S[21]=f):f=S[21];let[k,T,O,N,P]=(0,c.useSuspenseQueries)(f),{data:E}=k,{data:R}=T,{data:D}=O,{data:B}=N,{data:I}=P;S[22]!==D.social?(x=Object.values(D.social).filter(h),S[22]=D.social,S[23]=x):x=S[23];let A=x,L=A.length>0,M=A.every(u);S[24]!==L||S[25]!==M?(y={hasOauthProviders:L,isOauthConfigComplete:M},S[24]=L,S[25]=M,S[26]=y):y=S[26];let{hasOauthProviders:F,isOauthConfigComplete:$}=y,z=R.dns?.status===n.Statuses.Complete,U=!R.ssl||!1===R.ssl.required||R.ssl.status===n.Statuses.Complete,H=!R.mail||!1===R.mail.required||R.mail.status===n.Statuses.Complete;S[27]!==z||S[28]!==H||S[29]!==U?(v=[z,U,H].filter(Boolean),S[27]=z,S[28]=H,S[29]=U,S[30]=v):v=S[30];let Q=v.length,K=3===Q;S[31]!==Q||S[32]!==K?(b={completedDomainSteps:Q,isDomainSetupComplete:K},S[31]=Q,S[32]=K,S[33]=b):b=S[33];let{completedDomainSteps:q,isDomainSetupComplete:V}=b,G=E.has_users,Y=V&&$,W=B.get_started&&I.stripe_account_active;return S[34]!==B.get_started||S[35]!==q||S[36]!==F||S[37]!==G||S[38]!==W||S[39]!==Y||S[40]!==V||S[41]!==$?(_={hasOauthProviders:F,isOauthConfigComplete:$,completedDomainSteps:q,isDomainSetupComplete:V,isConfigured:Y,hasUsers:G,hasBillingEnabled:B.get_started,isBillingSetupComplete:W},S[34]=B.get_started,S[35]=q,S[36]=F,S[37]=G,S[38]=W,S[39]=Y,S[40]=V,S[41]=$,S[42]=_):_=S[42],_}function u(e){let{client_id:t,client_secret:r}=e;return t&&r}function h(e){return!!e&&e.enabled}e.s(["DOMAIN_SETUP_TOTAL_STEPS",0,3,"useDeploymentStatus",()=>d])},334949,e=>{"use strict";var t=e.i(521322),r=e.i(706102),a=e.i(412939),i=e.i(798418),n=e.i(419551),l=e.i(283204),o=e.i(870716);let s=(0,l.create)(e=>({byId:{},setDismissed:(t,r)=>e(e=>({byId:{...e.byId,[t]:r}}))}));function c(){let e,l,c,u,h,m=(0,t.c)(26),{instanceId:p}=(0,a.useTypedParams)(),{isLoaded:g}=(0,n.useUser)(),{hasOauthProviders:f,isOauthConfigComplete:x,completedDomainSteps:y,hasUsers:v,isConfigured:b,hasBillingEnabled:_,isBillingSetupComplete:S}=(0,o.useDeploymentStatus)(),j=(0,r.useHasPermission)("config:manage"),{isBannerContainerDismissed:w,dismissBannerContainer:C,undismissBannerContainer:k}=(0,i.useUnsafeMetadata)(),T=`banner-container:deployment-checklist:finalize-setup:${p}`,O=s(e=>e.byId[T]),N=s(d),P=!b&&j,E=P&&(g||void 0!==O),R=O??(E&&w(T)),D=+!!f+o.DOMAIN_SETUP_TOTAL_STEPS+ +!!_,B=(f&&x?1:0)+y+(_&&S?1:0),I=Math.max(D-B,0),A=E&&!R,L=E&&R;return m[0]!==T||m[1]!==N?(e=()=>N(T,!0),m[0]=T,m[1]=N,m[2]=e):e=m[2],m[3]!==C||m[4]!==T||m[5]!==N?(l=async()=>{N(T,!0);try{await C(T)}catch{N(T,!1)}},m[3]=C,m[4]=T,m[5]=N,m[6]=l):l=m[6],m[7]!==T||m[8]!==N||m[9]!==k?(c=async()=>{N(T,!1);try{await k(T)}catch{N(T,!0)}},m[7]=T,m[8]=N,m[9]=k,m[10]=c):c=m[10],m[11]!==B||m[12]!==I||m[13]!==D?(u={total:D,completed:B,remaining:I},m[11]=B,m[12]=I,m[13]=D,m[14]=u):u=m[14],m[15]!==T||m[16]!==v||m[17]!==b||m[18]!==P||m[19]!==A||m[20]!==L||m[21]!==e||m[22]!==l||m[23]!==c||m[24]!==u?(h={dismissId:T,isEligible:P,showChecklist:A,showRestoreCallout:L,optimisticDismiss:e,dismissChecklist:l,restoreChecklist:c,isConfigured:b,hasUsers:v,setupSteps:u},m[15]=T,m[16]=v,m[17]=b,m[18]=P,m[19]=A,m[20]=L,m[21]=e,m[22]=l,m[23]=c,m[24]=u,m[25]=h):h=m[25],h}function d(e){return e.setDismissed}e.s(["useDeploymentChecklistVisibility",()=>c])},446708,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(536656),i=e.i(131681),n=e.i(706102),l=e.i(685262),o=e.i(247854),s=e.i(70038),c=e.i(995304),d=e.i(894701);e.i(953300);var u=e.i(819970),h=e.i(199613),m=e.i(4078),p=e.i(141226),g=e.i(103910),f=e.i(462180),x=e.i(683471),y=e.i(870716),v=e.i(334949);function b(){let e,b,_=(0,r.c)(13),{isOauthConfigComplete:S,completedDomainSteps:j,isDomainSetupComplete:w,isConfigured:C,isBillingSetupComplete:k,hasBillingEnabled:T}=(0,y.useDeploymentStatus)(),O=(0,x.usePathname)(),N=(0,n.useHasPermission)("config:manage"),{showChecklist:P,dismissChecklist:E}=(0,v.useDeploymentChecklistVisibility)();return _[0]!==j||_[1]!==E||_[2]!==T||_[3]!==N||_[4]!==k||_[5]!==C||_[6]!==w||_[7]!==S||_[8]!==O||_[9]!==P?(e=!C&&N&&P&&(0,t.jsx)(a.BannerContainer,{className:"mt-8",title:"Finalize setup",description:"Finish these steps to deploy your app to production",button:(0,t.jsx)(d.ForceReadOnlyProvider,{value:!1,children:(0,t.jsx)(s.Button,{"aria-label":"Dismiss",variant:"secondary",emphasis:"low",size:"xl",icon:u.XIcon,className:"mb-auto",onPress:()=>void E()})}),children:(0,t.jsxs)(a.BannerContainer.Row,{children:[!S&&(0,t.jsxs)(i.BannerCard,{icon:(0,t.jsx)(g.SsoIcon,{}),title:"Setup social connection credentials",description:"Setup custom OAuth2 credentials for enabled service providers",badge:(0,t.jsx)(o.Badge,{variant:S?"positive":"secondary",icon:S?m.CheckmarkCircleIcon:void 0,className:"whitespace-nowrap",children:S?"1/1 Complete":"0/1 Complete"}),children:[(0,t.jsx)(s.Button,{variant:S?"secondary":"primary",size:"sm",emphasis:"high",href:(0,l.to)(O,{page:"/user-authentication/sso-connections"}),children:"Configure"}),(0,t.jsx)(s.Button,{variant:"secondary",emphasis:"none",size:"md",icon:h.ArrowRightIcon,href:"https://clerk.com/docs/guides/configure/auth-strategies/social-connections/overview",target:"_blank",rel:"noopener",children:"View docs"})]}),!k&&T&&(0,t.jsxs)(i.BannerCard,{icon:(0,t.jsx)(f.StripeBillingIcon,{}),title:"Configure your Stripe account",description:"Connect a new Stripe account to Clerk to start collecting payments and billing your customers.",badge:(0,t.jsx)(o.Badge,{variant:k?"positive":"secondary",icon:k?m.CheckmarkCircleIcon:void 0,className:"whitespace-nowrap",children:k?"1/1 Complete":"0/1 Complete"}),children:[(0,t.jsx)(s.Button,{variant:k?"secondary":"primary",size:"sm",emphasis:"high",href:(0,l.to)(O,{page:"/billing/settings"}),children:"Configure"}),(0,t.jsx)(s.Button,{variant:"secondary",emphasis:"none",size:"md",icon:h.ArrowRightIcon,href:"https://clerk.com/docs/guides/billing/overview",target:"_blank",rel:"noopener",children:"View docs"})]}),!w&&(0,t.jsxs)(i.BannerCard,{icon:(0,t.jsx)(p.GlobeIcon,{}),title:"Connect domains",description:"Setup the necessary CNAME records for your hosting provider",badge:(0,t.jsx)(o.Badge,{variant:w?"positive":"secondary",icon:w?m.CheckmarkCircleIcon:void 0,className:"whitespace-nowrap",children:w?`${y.DOMAIN_SETUP_TOTAL_STEPS}/${y.DOMAIN_SETUP_TOTAL_STEPS} Complete`:`${j}/${y.DOMAIN_SETUP_TOTAL_STEPS} Complete`}),children:[(0,t.jsx)(s.Button,{variant:w?"secondary":"primary",size:"sm",emphasis:"high",href:(0,l.to)(O,{page:"/domains"}),children:"Configure"}),(0,t.jsx)(s.Button,{variant:"secondary",emphasis:"none",size:"md",icon:h.ArrowRightIcon,href:"https://clerk.com/docs/guides/development/deployment/production#dns-records",target:"_blank",rel:"noopener",children:"View docs"})]})]})}),_[0]=j,_[1]=E,_[2]=T,_[3]=N,_[4]=k,_[5]=C,_[6]=w,_[7]=S,_[8]=O,_[9]=P,_[10]=e):e=_[10],_[11]!==e?(b=(0,t.jsx)(c.Collapsible,{children:e}),_[11]=e,_[12]=b):b=_[12],b}e.s(["Content",()=>b])},886527,e=>{"use strict";var t=e.i(720796),r=e.i(921007),a=e.i(982942);e.s(["cumulativeOrganizationSignUpsQuery",0,(e,{getToken:r,interval:i})=>{let n=new URLSearchParams({interval:i});return(0,a.queryOptions)({queryFn:()=>(0,t.request)({method:"GET",path:`v1/instances/${e}/analytics/organization_activity/cumulative_signups?${n.toString()}`,getToken:r}),queryKey:["cumulativeOrganizationSignUps",e,i]})},"cumulativeSignUpsQuery",0,(e,{getToken:r,interval:i})=>{let n=new URLSearchParams({interval:i});return(0,a.queryOptions)({queryFn:()=>(0,t.request)({method:"GET",path:`v1/instances/${e}/analytics/user_activity/cumulative_signups?${n.toString()}`,getToken:r}),queryKey:["cumulativeSignUps",e,i]})},"growthQuery",0,(e,{getToken:r,start:i,end:n,interval:l,ignoreIncompleteIntervals:o})=>{let s=new URLSearchParams;i&&s.set("start",i),n&&s.set("end",n),l&&s.set("interval",l);let c=s.toString();return o&&(c+=(c?"&":"")+"ignore_incomplete_intervals"),(0,a.queryOptions)({queryFn:()=>(0,t.request)({method:"GET",path:`/v1/instances/${e}/analytics/growth?${c}`,getToken:r}),queryKey:["growthQuery",e,i,n,l,o]})},"organizationActivityQuery",0,(e,{getToken:r,kind:i,interval:n,since:l,until:o,ignoreIncompleteIntervals:s})=>{let c=new URLSearchParams({since:l,interval:n,...o&&{until:o}}).toString();return s&&(c+="&ignore_incomplete_intervals"),(0,a.queryOptions)({queryFn:()=>(0,t.request)({method:"GET",path:`v1/instances/${e}/analytics/organization_activity/${i}?${c}`,getToken:r}),queryKey:["organizationActivity",e,i,n,l,o,s]})},"organizationCohortQuery",0,(e,i,n,{getToken:l,limit:o=10,page:s=1,cohortStatuses:c=[],orderBy:d=""})=>{let u=new URLSearchParams({start:i,interval:n,limit:o.toString(),offset:String((s-1)*o)});return c.forEach(e=>{u.append("cohort_status",e)}),d&&u.append("order_by",d),(0,a.queryOptions)({queryFn:()=>(0,t.request)({method:"GET",path:`/v1/instances/${e}/organization_cohorts?${u.toString()}`,getToken:l}),placeholderData:r.keepPreviousData,queryKey:["organizationCohort",e,i,n,o,s,c,d]})},"organizationGrowthQuery",0,(e,{getToken:r,start:i,end:n,interval:l,ignoreIncompleteIntervals:o})=>{let s=new URLSearchParams;i&&s.set("start",i),n&&s.set("end",n),l&&s.set("interval",l);let c=s.toString();return o&&(c+=(c?"&":"")+"ignore_incomplete_intervals"),(0,a.queryOptions)({queryFn:()=>(0,t.request)({method:"GET",path:`/v1/instances/${e}/analytics/organization_growth?${c}`,getToken:r}),queryKey:["organizationGrowthQuery",e,i,n,l,o]})},"organizationRetentionQuery",0,(e,{getToken:i,interval:n,periods:l})=>{let o=new URLSearchParams({interval:n});return void 0!==l&&o.set("periods",String(l)),(0,a.queryOptions)({queryFn:()=>(0,t.request)({method:"GET",path:`v1/instances/${e}/analytics/organization_retention?${o.toString()}`,getToken:i}),queryKey:["organizationRetention",e,n,l],placeholderData:r.keepPreviousData})},"overviewIntervalFilterOptionsQuery",0,(e,{getToken:r})=>(0,a.queryOptions)({queryFn:()=>(0,t.request)({method:"GET",path:`/v1/instances/${e}/analytics/intervals`,getToken:r}),queryKey:["overviewIntervalFilterOptions",e]}),"userActivityQuery",0,(e,{getToken:r,kind:i,interval:n,since:l,until:o,ignoreIncompleteIntervals:s})=>{let c=new URLSearchParams({since:l,interval:n,...o&&{until:o}}).toString();return s&&(c+="&ignore_incomplete_intervals"),(0,a.queryOptions)({queryFn:()=>(0,t.request)({method:"GET",path:`v1/instances/${e}/analytics/user_activity/${i}?${c}`,getToken:r}),queryKey:["userActivity",e,i,n,l,o,s]})},"userCohortQuery",0,(e,i,n,{getToken:l,limit:o=10,page:s=1,cohortStatuses:c=[],orderBy:d=""})=>{let u=new URLSearchParams({start:i,interval:n,limit:o.toString(),offset:String((s-1)*o)});return c.forEach(e=>{u.append("cohort_status",e)}),d&&u.append("order_by",d),(0,a.queryOptions)({queryFn:()=>(0,t.request)({method:"GET",path:`/v1/instances/${e}/user_cohorts?${u.toString()}`,getToken:l}),placeholderData:r.keepPreviousData,queryKey:["userCohort",e,i,n,o,s,c,d]})},"userRetentionQuery",0,(e,{getToken:i,interval:n,periods:l})=>{let o=new URLSearchParams({interval:n});return void 0!==l&&o.set("periods",String(l)),(0,a.queryOptions)({queryFn:()=>(0,t.request)({method:"GET",path:`v1/instances/${e}/analytics/user_retention?${o.toString()}`,getToken:i}),queryKey:["userRetention",e,n,l],placeholderData:r.keepPreviousData})}])},81232,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(886527),i=e.i(855127),n=e.i(336821),l=e.i(412939),o=e.i(663843),s=e.i(70038),c=e.i(995304),d=e.i(111316),u=e.i(503666),h=e.i(133717),m=e.i(357707),p=e.i(894701),g=e.i(492239),f=e.i(78388),x=e.i(758040),y=e.i(419551),v=e.i(223597),b=e.i(927800),_=e.i(494766),S=e.i(90253),j=e.i(180161),w=e.i(870716),C=e.i(784931),k=e.i(334949),T=e.i(721376),O=e.i(109821),N=e.i(16589),P=e.i(706537),E=e.i(275630),R=e.i(169842),D=e.i(746264),B=e.i(438439);function I(){let e,a,i,n=(0,r.c)(8),{openDialog:l,dialogs:o}=(0,R.useDialogs)();return n[0]!==l?(e=(0,t.jsx)(s.Button,{variant:"secondary",size:"lg",icon:D.SpeechBubbleIcon,onPress:()=>l((0,t.jsx)(A,{})),className:"min-[1100px]:hidden"}),n[0]=l,n[1]=e):e=n[1],n[2]!==l?(a=(0,t.jsx)(s.Button,{variant:"secondary",iconPosition:"start",size:"lg",icon:D.SpeechBubbleIcon,onPress:()=>l((0,t.jsx)(A,{})),className:"max-[1100px]:hidden",children:"Feedback"}),n[2]=l,n[3]=a):a=n[3],n[4]!==o||n[5]!==e||n[6]!==a?(i=(0,t.jsxs)(t.Fragment,{children:[e,a,o]}),n[4]=o,n[5]=e,n[6]=a,n[7]=i):i=n[7],i}function A(e){let a,i,n,l=(0,r.c)(5);return l[0]!==e?({...a}=e,l[0]=e,l[1]=a):a=l[1],l[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(L,{}),l[2]=i):i=l[2],l[3]!==a?(n=(0,t.jsx)(O.Dialog,{size:"sm",...a,children:i}),l[3]=a,l[4]=n):n=l[4],n}function L(){let e,a,i,n,l,o,c,d,u,h,m,p,g=(0,r.c)(23),{user:f}=(0,y.useUser)();g[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:U},g[0]=e):e=g[0];let{mutateAsync:x}=(0,B.useMutation)(e);g[1]===Symbol.for("react.memo_cache_sentinel")?(a={feedback:"",canContact:"yes"},g[1]=a):a=g[1],g[2]!==x||g[3]!==f?(i={defaultValues:a,onSubmit:async e=>{let{value:t}=e;if(!f)throw Error("User not authenticated");return await x({userId:f.id,userEmail:f.emailAddresses[0]?.emailAddress,feedback:t.feedback,canContact:t.canContact}),!0}},g[2]=x,g[3]=f,g[4]=i):i=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(n={fallbackErrorMessage:"Failed to send feedback",onComplete:z},g[5]=n):n=g[5];let v=(0,T.useDialogForm)(i,n);g[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)(O.DialogHeader,{title:"Leave feedback"}),g[6]=l):l=g[6],g[7]===Symbol.for("react.memo_cache_sentinel")?(o={onChangeAsync:$,onChangeAsyncDebounceMs:300},g[7]=o):o=g[7],g[8]!==v.Field?(c=(0,t.jsx)(O.DialogBody,{children:(0,t.jsxs)(O.DialogSection,{className:"space-y-4",children:[(0,t.jsx)(v.Field,{name:"feedback",validators:o,children:F}),(0,t.jsx)(v.Field,{name:"canContact",children:M})]})}),g[8]=v.Field,g[9]=c):c=g[9],g[10]!==v.notices||g[11]!==c?(d=(0,t.jsxs)(O.DialogContent,{children:[l,c,v.notices]}),g[10]=v.notices,g[11]=c,g[12]=d):d=g[12];let b="ERROR"===v.stage?"Try again":"Submit feedback";return g[13]!==v.submitButtonProps||g[14]!==b?(u=(0,t.jsx)(s.Button,{variant:"primary",...v.submitButtonProps,children:b}),g[13]=v.submitButtonProps,g[14]=b,g[15]=u):u=g[15],g[16]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)(s.Button,{variant:"secondary",slot:"close",children:"Cancel"}),g[16]=h):h=g[16],g[17]!==u?(m=(0,t.jsx)(O.DialogFooter,{button:u,secondaryButton:h}),g[17]=u,g[18]=m):m=g[18],g[19]!==v.formProps||g[20]!==m||g[21]!==d?(p=(0,t.jsxs)("form",{...v.formProps,children:[d,m]}),g[19]=v.formProps,g[20]=m,g[21]=d,g[22]=p):p=g[22],p}function M(e){return(0,t.jsxs)(N.RadioGroup,{label:"Is it ok if our team reaches out to you?",value:e.state.value,onChange:t=>e.handleChange(t),children:[(0,t.jsx)(N.Radio,{value:"yes",label:"Yes"}),(0,t.jsx)(N.Radio,{value:"no",label:"No"})]})}function F(e){return(0,t.jsx)(P.TextField,{label:"Let us know how we can improve this dashboard",name:e.name,value:e.state.value,onChange:e.handleChange,onBlur:e.handleBlur,errors:e.state.meta.errors,autoFocus:!0,children:(0,t.jsx)(P.TextArea,{rows:4,placeholder:"Type feedback here..."})})}function $(e){let{value:t}=e;if(!t||t.length<1)return"Feedback is required"}function z(){E.toast.success("Thank you for your feedback!")}async function U(e){let t=await fetch("/api/productlane/overview-feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e?.error||"Failed to submit feedback")}return t.json()}var H=e.i(348261);function Q(e){let a,i,n,l,o,c=(0,r.c)(9),{ignoreIncompletePeriods:d,onToggleIgnoreIncompletePeriods:h}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(s.Button,{icon:H.Cog6TeethIcon,variant:"secondary",emphasis:"high",size:"lg","aria-label":"Overview settings"}),c[0]=a):a=c[0],c[1]!==d?(i=d?[]:["show-incomplete"],c[1]=d,c[2]=i):i=c[2],c[3]!==h?(n=e=>{h(!e.has("show-incomplete"))},c[3]=h,c[4]=n):n=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)(u.MenuItem,{id:"show-incomplete",label:"Show incomplete period",description:"Show the current period with incomplete data"}),c[5]=l):l=c[5],c[6]!==i||c[7]!==n?(o=(0,t.jsxs)(u.MenuTrigger,{children:[a,(0,t.jsx)(u.Popover,{placement:"bottom left",className:"max-w-[13.8125rem]",children:(0,t.jsx)(u.Menu,{selectionMode:"multiple",selectedKeys:i,onSelectionChange:n,children:l})})]}),c[6]=i,c[7]=n,c[8]=o):o=c[8],o}function K(e){let o,h,g,f,T,O,N,P,E,R,D,B,A,L,M,F,$,z,U,H,K,Y,W,Z,X,J,ee=(0,r.c)(77),{sections:et}=e,{instanceId:er}=(0,l.useTypedParams)(),{getToken:ea}=(0,x.useAuth)(),{user:ei}=(0,y.useUser)(),en=(0,n.useServerTimestamp)();ee[0]===Symbol.for("react.memo_cache_sentinel")?(o={history:"push"},ee[0]=o):o=ee[0];let{interval:el,dateRange:eo,setParams:es,instance:ec,ignoreIncompletePeriods:ed}=(0,C.useOverviewSearchParams)(o);ee[1]===Symbol.for("react.memo_cache_sentinel")?(h=_.parseAsInteger.withDefault(1),ee[1]=h):h=ee[1];let[,eu]=(0,_.useQueryState)("cohortPage",h);ee[2]!==ea||ee[3]!==er?(g=(0,i.organizationSettingsQuery)(er,{getToken:ea}),ee[2]=ea,ee[3]=er,ee[4]=g):g=ee[4],ee[5]!==ea||ee[6]!==er?(f=(0,a.overviewIntervalFilterOptionsQuery)(er,{getToken:ea}),ee[5]=ea,ee[6]=er,ee[7]=f):f=ee[7],ee[8]!==g||ee[9]!==f?(T={queries:[g,f]},ee[8]=g,ee[9]=f,ee[10]=T):T=ee[10];let[eh,em]=(0,v.useSuspenseQueries)(T),{data:ep}=eh,{data:eg}=em,{isConfigured:ef,hasUsers:ex}=(0,w.useDeploymentStatus)();ee[11]!==ei?(O=async function(e){if(!ei)return;let t=ei.unsafeMetadata||{},r={...t.overviewPreferences||{},...e};await ei.update({unsafeMetadata:{...t,overviewPreferences:r}})},ee[11]=ei,ee[12]=O):O=ee[12];let ey=O,{isShown:ev,dismiss:eb,availableUpdatesCount:e_}=(0,j.useAvailableUpdates)(),eS=ef&&ev&&e_>0,{showRestoreCallout:ej}=(0,k.useDeploymentChecklistVisibility)();if(ee[13]!==eS||ee[14]!==e_||ee[15]!==eb?(N=eS&&(0,t.jsx)("div",{className:"pb-4 pt-6",children:(0,t.jsx)(j.AvailableUpdatesBanner,{onDismiss:eb,availableUpdatesCount:e_})}),ee[13]=eS,ee[14]=e_,ee[15]=eb,ee[16]=N):N=ee[16],ee[17]!==N?(P=(0,t.jsx)(c.Collapsible,{children:N}),ee[17]=N,ee[18]=P):P=ee[18],ee[19]===Symbol.for("react.memo_cache_sentinel")?(E=(0,b.cx)("sticky top-12 z-20 w-full border-b border-ceramic-bg-separator bg-ceramic-main py-6","shadow-[4px_0px_0,-4px_0px_0] shadow-ceramic-white dark:shadow-ceramic-gray-1400"),ee[19]=E):E=ee[19],ee[20]===Symbol.for("react.memo_cache_sentinel")?(R=(0,t.jsx)("h1",{className:"text-ceramic-heading-4 text-ceramic-primary",children:"Overview"}),ee[20]=R):R=ee[20],ee[21]!==es?(D=e=>void es({ignoreIncompletePeriods:e}),ee[21]=es,ee[22]=D):D=ee[22],ee[23]!==ed||ee[24]!==D?(B=(0,t.jsx)(Q,{ignoreIncompletePeriods:ed,onToggleIgnoreIncompletePeriods:D}),ee[23]=ed,ee[24]=D,ee[25]=B):B=ee[25],ee[26]!==ef?(A=ef&&(0,t.jsx)(I,{}),ee[26]=ef,ee[27]=A):A=ee[27],ee[28]!==ej?(L=ej&&(0,t.jsx)(G,{}),ee[28]=ej,ee[29]=L):L=ee[29],ee[30]!==L?(M=(0,t.jsx)(c.Collapsible,{className:"max-[960px]:hidden",children:L}),ee[30]=L,ee[31]=M):M=ee[31],ee[32]!==B||ee[33]!==A||ee[34]!==M?(F=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[B,A,M]}),ee[32]=B,ee[33]=A,ee[34]=M,ee[35]=F):F=ee[35],ee[36]!==ef||ee[37]!==ep?($=ef&&(0,t.jsx)(V,{isOrganizationsEnabled:ep.enabled,className:"flex-1 min-[700px]:hidden"}),ee[36]=ef,ee[37]=ep,ee[38]=$):$=ee[38],ee[39]!==F||ee[40]!==$?(z=(0,t.jsxs)("div",{className:"flex w-full items-center gap-3 min-[700px]:w-auto",children:[R,(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-2 min-[700px]:flex-none",children:[F,$]})]}),ee[39]=F,ee[40]=$,ee[41]=z):z=ee[41],ee[42]!==eo||ee[43]!==ex||ee[44]!==ec||ee[45]!==el||ee[46]!==eg||ee[47]!==ef||ee[48]!==en||ee[49]!==eu||ee[50]!==es||ee[51]!==ey?(U=(ef||ex)&&(0,t.jsx)(p.ForceReadOnlyProvider,{value:!1,children:(0,t.jsxs)("div",{className:"flex w-full flex-wrap items-center gap-2 min-[700px]:flex-nowrap min-[700px]:justify-end min-[700px]:gap-4",children:[(0,t.jsx)(d.DatePicker,{placement:"bottom left",value:eo.split("/").map(Number),onChange:async(e,t)=>{let r=e.join("/");await Promise.all([es({dateRange:r,cohortStart:null}),eu(1),ey({presetRange:t??void 0,dateRange:t?void 0:r})])},createdAt:ec.created_at,minDate:ec.created_at,maxDate:en}),(0,t.jsxs)(m.Select,{className:"flex flex-1 items-center gap-4 min-[700px]:flex-none",id:"interval",selectedKey:el,onSelectionChange:async e=>{await Promise.all([es({interval:e,cohortStart:null}),eu(1),ey({interval:e})])},children:[(0,t.jsx)(S.Label,{htmlFor:"interval",className:"text-ceramic-label-2 text-ceramic-primary max-xl:hidden",children:"Interval"}),(0,t.jsx)(s.Button,{className:"w-full flex-1"}),(0,t.jsx)(u.Popover,{placement:"bottom right",children:(0,t.jsx)(u.ListBox,{items:eg.intervals,children:q})})]})]})}),ee[42]=eo,ee[43]=ex,ee[44]=ec,ee[45]=el,ee[46]=eg,ee[47]=ef,ee[48]=en,ee[49]=eu,ee[50]=es,ee[51]=ey,ee[52]=U):U=ee[52],ee[53]!==ef||ee[54]!==ep?(H=ef&&(0,t.jsx)(V,{isOrganizationsEnabled:ep.enabled,className:"max-[700px]:hidden"}),ee[53]=ef,ee[54]=ep,ee[55]=H):H=ee[55],ee[56]!==z||ee[57]!==U||ee[58]!==H?(K=(0,t.jsxs)("div",{className:"flex flex-col items-start gap-4 min-[700px]:flex-row",children:[z,U,H]}),ee[56]=z,ee[57]=U,ee[58]=H,ee[59]=K):K=ee[59],ee[60]!==ej?(Y=ej&&(0,t.jsx)(G,{className:"mt-4"}),ee[60]=ej,ee[61]=Y):Y=ee[61],ee[62]!==Y?(W=(0,t.jsx)(c.Collapsible,{className:"min-[960px]:hidden",children:Y}),ee[62]=Y,ee[63]=W):W=ee[63],ee[64]!==K||ee[65]!==W?(Z=(0,t.jsxs)("header",{className:E,children:[K,W]}),ee[64]=K,ee[65]=W,ee[66]=Z):Z=ee[66],ee[67]!==ef||ee[68]!==et){let e;ee[70]!==ef||ee[71]!==et.length?(e=(e,r)=>"deploymentChecklist"===e.id&&ef?null:(0,t.jsxs)("section",{className:(0,b.cx)({"space-y-6":r!==et.length-1&&"deploymentChecklist"!==e.id}),children:[e.header&&(0,t.jsx)("header",{className:"mt-6",children:(0,t.jsx)("h3",{className:"text-ceramic-heading-5 text-ceramic-primary",children:e.header})}),e.children]},r),ee[70]=ef,ee[71]=et.length,ee[72]=e):e=ee[72],X=et.map(e),ee[67]=ef,ee[68]=et,ee[69]=X}else X=ee[69];return ee[73]!==P||ee[74]!==Z||ee[75]!==X?(J=(0,t.jsxs)("div",{className:"relative isolate -mt-6",children:[P,Z,X]}),ee[73]=P,ee[74]=Z,ee[75]=X,ee[76]=J):J=ee[76],J}function q(e){return(0,t.jsx)(u.ListBoxItem,{id:e.interval,textValue:e.name,children:e.name})}function V(e){let a,i,n,l,o,s,c,d=(0,r.c)(14),{isOrganizationsEnabled:u,className:m}=e,{view:p,setParams:g}=(0,C.useOverviewSearchParams)();d[0]===Symbol.for("react.memo_cache_sentinel")?(a=_.parseAsInteger.withDefault(1),d[0]=a):a=d[0];let[,f]=(0,_.useQueryState)("cohortPage",a);return u?(d[1]!==m?(i=(0,b.cx)(m),d[1]=m,d[2]=i):i=d[2],d[3]!==p?(n=[p],d[3]=p,d[4]=n):n=d[4],d[5]!==f||d[6]!==g?(l=e=>{Promise.all([g({view:e.values().next().value}),f(1)])},d[5]=f,d[6]=g,d[7]=l):l=d[7],d[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)(h.SegmentControlItem,{id:"users",children:"Users"}),s=(0,t.jsx)(h.SegmentControlItem,{id:"orgs",children:"Orgs"}),d[8]=o,d[9]=s):(o=d[8],s=d[9]),d[10]!==i||d[11]!==n||d[12]!==l?(c=(0,t.jsxs)(h.SegmentControl,{className:i,selectedKeys:n,onSelectionChange:l,children:[o,s]}),d[10]=i,d[11]=n,d[12]=l,d[13]=c):c=d[13],c):null}function G(e){let a,i,n,l,c=(0,r.c)(10),{className:d}=e,{restoreChecklist:u,setupSteps:h}=(0,k.useDeploymentChecklistVisibility)();return c[0]!==d?(a=(0,b.cx)(d),c[0]=d,c[1]=a):a=c[1],c[2]!==u?(i=(0,t.jsx)(s.Button,{icon:g.ArrowRightTopIcon,iconPosition:"end",onPress:()=>void u(),children:"Expand"}),c[2]=u,c[3]=i):i=c[3],c[4]!==h.remaining||c[5]!==i?(n=(0,t.jsxs)(o.Banner,{variant:"info",size:"sm",isDismissible:!1,icon:f.InformationCircleIcon,secondaryButton:i,children:[h.remaining," setup tasks remaining"]}),c[4]=h.remaining,c[5]=i,c[6]=n):n=c[6],c[7]!==a||c[8]!==n?(l=(0,t.jsx)("div",{className:a,children:n}),c[7]=a,c[8]=n,c[9]=l):l=c[9],l}e.s(["OverviewContent",()=>K],81232)},14066,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(494766),i=e.i(184260),n=e.i(784931);function l(e){return{cohortStart:(e.cohortStart??"")||null,cohortStatuses:Array.from(new Set(e.cohortStatuses??[])).sort()}}let o={cohortStart:null,cohortStatuses:[]},s=i.default.createContext(null);function c(){let e=i.default.useContext(s);if(!e)throw Error("useCohortTableControllerContext must be used within CohortTableControllerProvider");return e}function d(e){let c,d,m,p,g,f,x,y,v=(0,r.c)(20),{children:b}=e,{cohortStart:_,cohortStatuses:S,setParams:j}=(0,n.useOverviewSearchParams)();v[0]!==_||v[1]!==S?(c=l({cohortStart:_,cohortStatuses:S}),v[0]=_,v[1]=S,v[2]=c):c=v[2];let w=c;v[3]===Symbol.for("react.memo_cache_sentinel")?(d=a.parseAsInteger.withDefault(1),v[3]=d):d=v[3];let[,C]=(0,a.useQueryState)("cohortPage",d);v[4]===Symbol.for("react.memo_cache_sentinel")?(m={isCohortDataFetching:!1},v[4]=m):m=v[4];let[k,T]=i.default.useState(m);v[5]!==C||v[6]!==j?(p=e=>{let t=l(e);j({cohortStart:t.cohortStart??null,cohortStatuses:t.cohortStatuses}),C(1),T(h)},v[5]=C,v[6]=j,v[7]=p):p=v[7];let O=p;v[8]!==C||v[9]!==j?(g=()=>{j({cohortStart:null,cohortStatuses:[]}),C(1),T(u)},v[8]=C,v[9]=j,v[10]=g):g=v[10];let N=g;v[11]===Symbol.for("react.memo_cache_sentinel")?(f=e=>{T(t=>t.isCohortDataFetching===e?t:{...t,isCohortDataFetching:e})},v[11]=f):f=v[11];let P=f,E=w.cohortStart?k.isCohortDataFetching?"updating":"open":"closed",R=w.cohortStart?w:o;v[12]!==N||v[13]!==O||v[14]!==E||v[15]!==R?(x={uiSelectionForChart:R,stage:E,select:O,requestDeselect:N,setIsCohortDataFetching:P},v[12]=N,v[13]=O,v[14]=E,v[15]=R,v[16]=x):x=v[16];let D=x;return v[17]!==b||v[18]!==D?(y=(0,t.jsx)(s,{value:D,children:b}),v[17]=b,v[18]=D,v[19]=y):y=v[19],y}function u(e){return e.isCohortDataFetching?{...e,isCohortDataFetching:!1}:e}function h(e){return e.isCohortDataFetching?{...e,isCohortDataFetching:!1}:e}e.s(["CohortTableControllerProvider",()=>d,"useCohortTableControllerContext",()=>c])},821737,e=>{"use strict";e.s(["ACTIVE_COHORT_STATUSES",0,["first_active","retained","reactivated"],"CHURNED_COHORT_STATUSES",0,["first_active_churned","retained_churned","reactivated_churned"],"ORG_COHORTS_LIMIT_OPTIONS",0,[5,10,15,20,100],"ORG_COHORTS_PAGE_SIZE",0,5])},432975,e=>{"use strict";var t=e.i(927800);let r={cardClassName:(0,t.cx)("z-0","-mx-1 -mb-1 mt-1 !rounded-none bg-transparent !p-0","[--table-body-rounded:0px] [--table-cell-bg:var(--table-bg)]","[&_[data-slot=table-card-body-bg]]:after:!rounded-none","[&_[data-slot=table-card-body-bg]]:after:bg-[--table-bg]","[&_[data-slot=table-card-body-border]]:before:!rounded-none","[&_[data-slot=table-card-body-border]]:after:!rounded-none","[&_[data-slot=table-card-body-border]]:after:border-0"),bodyClassName:(0,t.cx)("!shadow-none","[&_tr:last-child]:border-b"),rowClassName:(0,t.cx)("border-b","border-ceramic-bg-separator","bg-ceramic-gray-50","dark:bg-ceramic-gray-1500")};e.s(["EMBEDDED_COHORT_TABLE_STYLES",0,r])},91147,971908,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(912847),i=e.i(247854),n=e.i(988456),l=e.i(822380),o=e.i(536977),s=e.i(494766),c=e.i(432975);let d=[{id:"org_cohort",label:"Org cohort",isRowHeader:!0,allowsSorting:!1,className:"w-[40%]"},{id:"metric",label:"Status",allowsSorting:!0},{id:"members_count",label:"Members",allowsSorting:!1},{id:"created_at",label:"Created",allowsSorting:!1}];e.s(["ORG_COHORT_TABLE_COLUMNS",0,d],971908);var u=e.i(821737);function h(e){let i,n,o=(0,r.c)(3),{headers:s}=e,u=void 0===s?d:s;return o[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(a.TablePaginatedFooterSkeleton,{}),o[0]=i):i=o[0],o[1]!==u?(n=(0,t.jsx)(l.TableCardSkeleton,{className:c.EMBEDDED_COHORT_TABLE_STYLES.cardClassName,footer:i,children:(0,t.jsxs)(l.Table,{hasActions:!0,children:[(0,t.jsx)(l.TableHeader,{columns:u}),(0,t.jsx)(m,{headers:u,items:null})]})}),o[1]=u,o[2]=n):n=o[2],n}function m(e){let a,d,h,m,p,g,f=(0,r.c)(17),{headers:x,items:y}=e;f[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.parseAsInteger.withDefault(u.ORG_COHORTS_PAGE_SIZE),f[0]=a):a=f[0];let[v]=(0,s.useQueryState)("cohortLimit",a),b=Math.max(1,Math.min(v,100));f[1]!==y?(d=y??[],f[1]=y,f[2]=d):d=f[2];let _=d;if(f[3]!==b||f[4]!==_){let e;f[6]!==_?(e=(e,t)=>{let r=_[t]??null;return{id:r&&!r.deleted&&"organization_id"in r?r.organization_id:`org-cohort-skeleton-${t}`,value:r}},f[6]=_,f[7]=e):e=f[7],h=Array.from({length:b},e),f[3]=b,f[4]=_,f[5]=h}else h=f[5];let S=h;return f[8]!==x||f[9]!==b?(m=[x,b],f[8]=x,f[9]=b,f[10]=m):m=f[10],f[11]!==x?(p=e=>{let r=e.value,a=null===r||!0===r.deleted;return(0,t.jsx)(l.TableRow,{className:c.EMBEDDED_COHORT_TABLE_STYLES.rowClassName,columns:x,actionsCell:(0,t.jsx)(l.TableActionCellSkeleton,{}),children:e=>{switch(e.id){case"org_cohort":return(0,t.jsx)(l.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Skeleton,{className:"size-10 shrink-0 rounded"}),(0,t.jsxs)("div",{className:"flex w-full min-w-0 max-w-64 flex-col gap-1 lg:max-w-72 xl:max-w-96",children:[(0,t.jsx)(n.Skeleton,{className:"w-fit max-w-full text-ceramic-label-2",children:a||!r?.name?"Organization Name":r.name||"Organization"}),(0,t.jsx)(n.Skeleton,{className:"w-fit max-w-full text-ceramic-body-2",children:a||!r?.slug?"org-slug":r.slug})]})]})});case"metric":return(0,t.jsx)(l.TableCell,{children:(0,t.jsx)(i.BadgeSkeleton,{children:a||!r?.metric?"Retained":r.metric})});case"members_count":return(0,t.jsx)(l.TableCell,{children:(0,t.jsx)(n.Skeleton,{className:"text-ceramic-body-2",children:a||void 0===r.members_count?"999":String(r.members_count)})});case"created_at":return(0,t.jsx)(l.TableCell,{children:(0,t.jsx)(n.Skeleton,{className:"text-ceramic-body-2",children:a||!r?.created_at?"January 1, 2024":(0,o.formatDate)(r.created_at)})});default:return(0,t.jsx)(l.TableCell,{children:(0,t.jsx)(n.Skeleton,{className:"text-ceramic-body-2",children:"-"})})}}})},f[11]=x,f[12]=p):p=f[12],f[13]!==S||f[14]!==m||f[15]!==p?(g=(0,t.jsx)(l.TableBody,{className:c.EMBEDDED_COHORT_TABLE_STYLES.bodyClassName,items:S,dependencies:m,children:p}),f[13]=S,f[14]=m,f[15]=p,f[16]=g):g=f[16],g}e.s(["OrgCohortTableSkeleton",()=>h,"OrgCohortTableSkeletonBody",()=>m],91147)},334581,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(886527),i=e.i(912847),n=e.i(385991),l=e.i(114183),o=e.i(229903),s=e.i(412939),c=e.i(758040),d=e.i(431129),u=e.i(104477),h=e.i(237206),m=e.i(184260),p=e.i(625248),g=e.i(14066),f=e.i(784931),x=e.i(821737),y=e.i(361803),v=e.i(685262),b=e.i(662714),_=e.i(247854),S=e.i(70038),j=e.i(228069),w=e.i(363143),C=e.i(822380),k=e.i(596464),T=e.i(603203),O=e.i(683471),N=e.i(432975),P=e.i(971908),E=e.i(91147);let R={first_active:(0,t.jsx)(_.Badge,{variant:"positive",children:"New Organization"}),first_active_churned:(0,t.jsx)(_.Badge,{variant:"secondary",children:"New Organization Churned"}),retained:(0,t.jsx)(_.Badge,{variant:"positive",children:"Retained"}),retained_churned:(0,t.jsx)(_.Badge,{variant:"secondary",children:"Retained Churned"}),reactivated:(0,t.jsx)(_.Badge,{variant:"positive",children:"Reactivated"}),reactivated_churned:(0,t.jsx)(_.Badge,{variant:"secondary",children:"Reactivated Churned"})};function D(e){let a,i,n,l,o,s=(0,r.c)(17),{showFallback:c,sortDescriptor:d,onSortChange:u,...h}=e,m=(0,O.usePathname)(),p="children"in h&&!("error"in h),g="children"in h?h.children:void 0,f="data"in h?h.data.map(I):[],{OrganizationsActionMenu:x,organizationsActionsDialogs:S}=(0,y.useOrganizationsActionMenu)(),w=p&&g;return s[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(C.TableHeader,{columns:P.ORG_COHORT_TABLE_COLUMNS}),s[0]=a):a=s[0],s[1]!==x||s[2]!==f||s[3]!==m||s[4]!==h||s[5]!==c?(i="error"in h?(0,t.jsx)(C.TableBody,{className:"!rounded-none",items:[],dependencies:[P.ORG_COHORT_TABLE_COLUMNS],renderEmptyState:()=>(0,t.jsx)(L,{resetErrorBoundary:h.resetErrorBoundary})}):c?(0,t.jsx)(E.OrgCohortTableSkeletonBody,{headers:P.ORG_COHORT_TABLE_COLUMNS,items:"data"in h?h.data:null}):(0,t.jsx)(C.TableBody,{className:N.EMBEDDED_COHORT_TABLE_STYLES.bodyClassName,items:f,dependencies:[P.ORG_COHORT_TABLE_COLUMNS],renderEmptyState:B,children:e=>{let r=e.value,a=null===r||!0===r.deleted,i=r?.metric;return(0,t.jsx)(C.TableRow,{className:N.EMBEDDED_COHORT_TABLE_STYLES.rowClassName,columns:P.ORG_COHORT_TABLE_COLUMNS,href:a?void 0:(0,v.to)(m,{page:`/organizations/${r.organization_id}`,back_page:"overview"}),actionsCell:a?void 0:(0,t.jsx)(C.ActionsCell,{children:(0,t.jsx)(x,{orgId:r.organization_id,orgName:r.name})}),children:e=>{switch(e.id){case"org_cohort":return(0,t.jsx)(C.TableCell,{children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.Avatar,{fallback:"organization",alt:"",width:40,height:40,className:"size-10"}),(0,t.jsx)("div",{className:"flex w-full min-w-0 max-w-64 flex-col gap-1 lg:max-w-72 xl:max-w-96",children:(0,t.jsx)("span",{className:"truncate text-ceramic-label-2 text-ceramic-dimmed",children:"Deleted organization"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.Avatar,{unoptimized:!0,fallback:"organization",alt:`Profile picture of ${r.name||"organization"}`,src:r.image_url,width:40,height:40,className:"size-10"}),(0,t.jsxs)("div",{className:"flex w-full min-w-0 max-w-64 flex-col gap-1 lg:max-w-72 xl:max-w-96",children:[(0,t.jsx)("span",{className:"truncate text-ceramic-label-2",children:r.name||"Unknown organization"}),(0,t.jsx)("span",{className:"truncate text-ceramic-body-2 text-ceramic-secondary",children:r.slug})]})]})})});case"metric":return(0,t.jsx)(C.TableCell,{children:i?R[i]??(0,t.jsx)(_.Badge,{variant:"secondary",children:i}):(0,t.jsx)("span",{className:a?"text-ceramic-dimmed":"text-ceramic-secondary",children:"—"})});case"members_count":return(0,t.jsx)(C.TableCell,{className:a?"text-ceramic-dimmed":"text-ceramic-secondary",children:a?"—":r.members_count});case"created_at":return(0,t.jsx)(C.TableCell,{className:a?"text-ceramic-dimmed":"text-ceramic-secondary",children:a?"—":(0,t.jsx)(j.Date,{date:r.created_at,format:{month:"long"}})});default:return(0,t.jsx)(C.TableCell,{className:"text-ceramic-body-2",children:a?"":"-"})}}})}}),s[1]=x,s[2]=f,s[3]=m,s[4]=h,s[5]=c,s[6]=i):i=s[6],s[7]!==u||s[8]!==d||s[9]!==i?(n=(0,t.jsxs)(C.Table,{hasActions:!0,sortDescriptor:d,onSortChange:u,children:[a,i]}),s[7]=u,s[8]=d,s[9]=i,s[10]=n):n=s[10],s[11]!==w||s[12]!==n?(l=(0,t.jsx)(C.TableCard,{className:N.EMBEDDED_COHORT_TABLE_STYLES.cardClassName,footer:w,children:n}),s[11]=w,s[12]=n,s[13]=l):l=s[13],s[14]!==S||s[15]!==l?(o=(0,t.jsxs)(t.Fragment,{children:[l,S]}),s[14]=S,s[15]=l,s[16]=o):o=s[16],o}function B(){return(0,t.jsx)(A,{})}function I(e,t){return{id:e&&!e.deleted&&"organization_id"in e?e.organization_id:`deleted-${t}`,value:e}}function A(){let e,a=(0,r.c)(1);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(w.Empty,{icon:k.UserDottedCircleIcon,title:"No orgs found in this cohort",description:"Try selecting a different cohort"}),a[0]=e):e=a[0],e}function L(e){let a,i=(0,r.c)(2),{resetErrorBoundary:n}=e;return i[0]!==n?(a=(0,t.jsx)(w.Empty,{icon:T.ExclamationTriangleIcon,title:"Something went wrong",description:"Could not fetch organization cohorts",button:(0,t.jsx)(S.Button,{onPress:()=>{n?n():window.location.reload()},children:"Try again"})}),i[0]=n,i[1]=a):a=i[1],a}var M=e.i(898428);let F={page:M.parseAsInteger.withDefault(1),limit:M.parseAsInteger.withDefault(x.ORG_COHORTS_PAGE_SIZE),order_by:M.parseAsString.withDefault("")};(0,M.createSearchParamsCache)(F,{urlKeys:{page:"cohortPage",limit:"cohortLimit",order_by:"cohortOrderBy"}});var $=e.i(536977);e.i(946202);var z=e.i(215314);function U(){let e,l,y,v,b,_,S,j=(0,r.c)(27),{setIsCohortDataFetching:w}=(0,g.useCohortTableControllerContext)(),{getToken:C}=(0,c.useAuth)(),{instanceId:k}=(0,s.useTypedParams)(),{dateRange:T,cohortStart:O,interval:N,cohortStatuses:P}=(0,f.useOverviewSearchParams)();j[0]===Symbol.for("react.memo_cache_sentinel")?(e={searchParamsParsers:F,urlKeys:{page:"cohortPage",limit:"cohortLimit",order_by:"cohortOrderBy"}},j[0]=e):e=j[0];let{params:E,deferredParams:R,setParams:B}=(0,o.useTableSearchParams)(e),{formattedStart:I,formattedEnd:A}=(0,p.parseDateRange)(T),{data:L}=(0,u.useQuery)((0,a.organizationGrowthQuery)(k,{getToken:C,start:I,end:A,interval:N})),{start:M,effectiveCohortStatuses:U}=function({growthData:e,cohortStart:t,cohortStatuses:r,formattedEnd:a}){let i=e?.at?.(-1)?.start??null,n=t||i,l=n?(0,$.formatISODate)(new z.UTCDate(n)):a||(0,$.formatISODate)(new z.UTCDate),o=t?(0,$.formatISODate)(new z.UTCDate(t)):null,s=i?(0,$.formatISODate)(new z.UTCDate(i)):null,c=!o||o===s;return{start:l,effectiveCohortStatuses:!c||r.length>0?r:[...x.ACTIVE_COHORT_STATUSES],isViewingMostRecentInterval:c}}({growthData:L?.data,cohortStart:O,cohortStatuses:P,formattedEnd:A}),V=(0,h.useQueryClient)(),G=(0,a.organizationCohortQuery)(k,M,N,{page:R.page,limit:R.limit,cohortStatuses:U,orderBy:R.order_by,getToken:C}),Y=`${M}|${N}|${U.join(",")}`,W=(0,m.useRef)(null),Z=(0,d.useIsFetching)({queryKey:G.queryKey})>0;if(j[1]!==O||j[2]!==Z||j[3]!==Y||j[4]!==w?(l=()=>{if(!O)return;let e=W.current;Z&&Y!==e?w(!0):Z||(w(!1),W.current=Y)},y=[O,Z,Y,w],j[1]=O,j[2]=Z,j[3]=Y,j[4]=w,j[5]=l,j[6]=y):(l=j[5],y=j[6]),(0,m.useEffect)(l,y),!O)return null;let X=n.ErrorBoundary,J=G.queryKey.join(",");return j[7]!==G.queryKey||j[8]!==V?(v=()=>{V.removeQueries({queryKey:G.queryKey})},j[7]=G.queryKey,j[8]=V,j[9]=v):v=j[9],j[10]!==E.limit||j[11]!==E.page?(b=e=>{let{error:r,resetErrorBoundary:a}=e;return(0,t.jsx)(D,{showFallback:!1,sortDescriptor:{column:"metric",direction:"descending"},onSortChange:K,error:r,resetErrorBoundary:a,children:(0,t.jsx)(i.TablePaginatedFooter,{count:0,limit:E.limit,page:E.page,onLimitChange:Q,onPageChange:H,limitOptions:x.ORG_COHORTS_LIMIT_OPTIONS})})},j[10]=E.limit,j[11]=E.page,j[12]=b):b=j[12],j[13]!==U||j[14]!==C||j[15]!==k||j[16]!==N||j[17]!==B||j[18]!==M||j[19]!==E?(_=(0,t.jsx)(q,{instanceId:k,getToken:C,start:M,interval:N,cohortStatuses:U,params:E,setParams:B}),j[13]=U,j[14]=C,j[15]=k,j[16]=N,j[17]=B,j[18]=M,j[19]=E,j[20]=_):_=j[20],j[21]!==X||j[22]!==J||j[23]!==v||j[24]!==b||j[25]!==_?(S=(0,t.jsx)(X,{resetOnChangeQuery:J,onError:v,fallbackRender:b,children:_}),j[21]=X,j[22]=J,j[23]=v,j[24]=b,j[25]=_,j[26]=S):S=j[26],S}function H(){}function Q(){}function K(){}function q(e){let n,o,s,c,d,u,h,m=(0,r.c)(32),{instanceId:p,getToken:f,start:y,interval:v,cohortStatuses:b,params:_,setParams:S}=e,{stage:j}=(0,g.useCohortTableControllerContext)();m[0]!==b||m[1]!==f||m[2]!==p||m[3]!==v||m[4]!==y?(n=e=>(0,a.organizationCohortQuery)(p,y,v,{page:e.page,limit:e.limit,cohortStatuses:b,orderBy:e.order_by,getToken:f}),m[0]=b,m[1]=f,m[2]=p,m[3]=v,m[4]=y,m[5]=n):n=m[5];let w=n;m[6]!==_||m[7]!==w||m[8]!==S?(o={rowsQueryFn:w,selectRows:W,params:_,filters:void 0,setParams:S},m[6]=_,m[7]=w,m[8]=S,m[9]=o):o=m[9];let{data:C,totalCount:k,showFallback:T,setPage:O,setLimit:N,sortDescriptor:P,handleSortChange:E}=(0,l.useTableQuery)(o),R=T||"updating"===j;return m[10]!==E||m[11]!==j?(s="updating"===j?Y:E,m[10]=E,m[11]=j,m[12]=s):s=m[12],m[13]!==N||m[14]!==j?(c="updating"===j?G:N,m[13]=N,m[14]=j,m[15]=c):c=m[15],m[16]!==O||m[17]!==j?(d="updating"===j?V:O,m[16]=O,m[17]=j,m[18]=d):d=m[18],m[19]!==_.limit||m[20]!==_.page||m[21]!==c||m[22]!==d||m[23]!==k?(u=(0,t.jsx)(i.TablePaginatedFooter,{count:k,limit:_.limit,page:_.page,onLimitChange:c,onPageChange:d,limitOptions:x.ORG_COHORTS_LIMIT_OPTIONS}),m[19]=_.limit,m[20]=_.page,m[21]=c,m[22]=d,m[23]=k,m[24]=u):u=m[24],m[25]!==C||m[26]!==P||m[27]!==R||m[28]!==s||m[29]!==u||m[30]!==k?(h=(0,t.jsx)(D,{showFallback:R,sortDescriptor:P,onSortChange:s,data:C,count:k,children:u}),m[25]=C,m[26]=P,m[27]=R,m[28]=s,m[29]=u,m[30]=k,m[31]=h):h=m[31],h}function V(){}function G(){}function Y(){}function W(e){return e.data}e.s(["Content",()=>U],334581)},77012,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(247854),i=e.i(188528),n=e.i(492239),l=e.i(927800),o=e.i(184260);let s=o.default.memo(function(e){let a,i,n,o,s,u,h,p=(0,r.c)(18),{label:g,metrics:f,items:x,className:y,banner:v}=e;return p[0]!==y?(a=(0,l.cx)("rounded-md bg-ceramic-white px-2 py-1.5 text-ceramic-primary shadow-[0px_32px_72px_-12px_theme(colors.ceramic.black/0.2),0px_16px_32px_-6px_theme(colors.ceramic.black/0.2)] ring-1 ring-[rgba(25,28,33,0.06)] dark:bg-ceramic-gray-1500",y),p[0]=y,p[1]=a):a=p[1],p[2]!==g?(i=(0,t.jsx)("div",{className:"text-ceramic-label-2 text-ceramic-primary has-[+ul]:pb-2",children:g}),p[2]=g,p[3]=i):i=p[3],p[4]!==f?(n=f&&(0,t.jsxs)("ul",{className:"space-y-1.5 py-2","aria-label":"Metrics",children:[f.value&&(0,t.jsx)(c,{metric:f.value}),f.deviation&&(0,t.jsx)(d,{metric:f.deviation})]}),p[4]=f,p[5]=n):n=p[5],p[6]!==x?(o=x&&x.length>0&&(0,t.jsx)("ul",{className:"space-y-1.5 pt-2","aria-label":"Items",children:x.map(m)}),p[6]=x,p[7]=o):o=p[7],p[8]!==i||p[9]!==n||p[10]!==o?(s=(0,t.jsxs)("div",{className:"divide-y divide-ceramic-bg-separator",children:[i,n,o]}),p[8]=i,p[9]=n,p[10]=o,p[11]=s):s=p[11],p[12]!==v?(u=v&&(0,t.jsx)("div",{className:"pt-2",children:v}),p[12]=v,p[13]=u):u=p[13],p[14]!==a||p[15]!==s||p[16]!==u?(h=(0,t.jsxs)("div",{className:a,children:[s,u]}),p[14]=a,p[15]=s,p[16]=u,p[17]=h):h=p[17],h}),c=e=>{let i,n,l,s,c=(0,r.c)(14),{metric:d}=e;if(o.default.isValidElement(d.value)){let e,r;return c[0]!==d.key?(e=(0,t.jsx)("span",{className:"text-ceramic-label-2 text-ceramic-primary",children:d.key}),c[0]=d.key,c[1]=e):e=c[1],c[2]!==d.value||c[3]!==e?(r=(0,t.jsxs)("li",{className:"flex items-center justify-between gap-8",children:[e,d.value]}),c[2]=d.value,c[3]=e,c[4]=r):r=c[4],r}c[5]!==d.key?(i=(0,t.jsx)("span",{className:"text-ceramic-label-2 text-ceramic-primary",children:d.key}),c[5]=d.key,c[6]=i):i=c[6];let u=Number(d.value);return c[7]!==u?(n=u.toLocaleString(),c[7]=u,c[8]=n):n=c[8],c[9]!==n?(l=(0,t.jsx)(a.Badge,{variant:"secondary",emphasis:"low",children:n}),c[9]=n,c[10]=l):l=c[10],c[11]!==i||c[12]!==l?(s=(0,t.jsxs)("li",{className:"flex items-center justify-between gap-8",children:[i,l]}),c[11]=i,c[12]=l,c[13]=s):s=c[13],s},d=e=>{let l,s,c,d,u=(0,r.c)(16),{metric:h}=e;if(o.default.isValidElement(h.value)){let e,r;return u[0]!==h.key?(e=(0,t.jsx)("span",{className:"text-ceramic-label-2 text-ceramic-primary",children:h.key}),u[0]=h.key,u[1]=e):e=u[1],u[2]!==h.value||u[3]!==e?(r=(0,t.jsxs)("li",{className:"flex items-center justify-between gap-8",children:[e,h.value]}),u[2]=h.value,u[3]=e,u[4]=r):r=u[4],r}let m=Number(h.value),p=m<0,g=m>0;u[5]!==h.key?(l=(0,t.jsx)("span",{className:"text-ceramic-label-2 text-ceramic-primary",children:h.key}),u[5]=h.key,u[6]=l):l=u[6];let f=p?"negative":g?"positive":"secondary",x=p?i.ArrowRightBottomIcon:g?n.ArrowRightTopIcon:void 0;return u[7]!==m?(s=m.toLocaleString(void 0,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:1}),u[7]=m,u[8]=s):s=u[8],u[9]!==f||u[10]!==x||u[11]!==s?(c=(0,t.jsx)(a.Badge,{variant:f,icon:x,iconPosition:"end",children:s}),u[9]=f,u[10]=x,u[11]=s,u[12]=c):c=u[12],u[13]!==l||u[14]!==c?(d=(0,t.jsxs)("li",{className:"flex items-center justify-between gap-8",children:[l,c]}),u[13]=l,u[14]=c,u[15]=d):d=u[15],d},u=e=>{let a,i=(0,r.c)(2),{color:n}=e;return i[0]!==n?(a=(0,t.jsx)("svg",{width:"12",height:"2",viewBox:"0 0 12 2",fill:"none","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M1 1H11",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"1.5 2.5"})}),i[0]=n,i[1]=a):a=i[1],a},h=e=>{let a,i,n,o,s,c=(0,r.c)(13),{item:d}=e;return c[0]!==d.color||c[1]!==d.shape?(a="dashed-line"===d.shape?(0,t.jsx)(u,{color:d.color}):(0,t.jsx)("span",{style:{backgroundColor:d.color},className:(0,l.cx)("block rounded-full",{circle:"size-1.5",line:"h-0.5 w-3"}[d.shape]),"aria-hidden":"true"}),c[0]=d.color,c[1]=d.shape,c[2]=a):a=c[2],c[3]!==d.key?(i=(0,t.jsx)("span",{className:"text-ceramic-body-3 text-ceramic-primary",children:d.key}),c[3]=d.key,c[4]=i):i=c[4],c[5]!==a||c[6]!==i?(n=(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[a,i]}),c[5]=a,c[6]=i,c[7]=n):n=c[7],c[8]!==d.value?(o=(0,t.jsx)("span",{className:"text-ceramic-label-3 text-ceramic-primary",children:d.value}),c[8]=d.value,c[9]=o):o=c[9],c[10]!==n||c[11]!==o?(s=(0,t.jsxs)("li",{className:"flex items-center justify-between gap-8",children:[n,o]}),c[10]=n,c[11]=o,c[12]=s):s=c[12],s};function m(e,r){return(0,t.jsx)(h,{item:e},e.key?.toString()||`item-${r}`)}e.s(["ChartTooltip",0,s])},457392,179475,456951,29258,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(485596),i=e.i(995304),n=e.i(544959),l=e.i(959369),o=e.i(14066);let s={type:"spring",visualDuration:.28,bounce:0},c=l.motion.create(a.CardFooter);function d(e){let d,u,h=(0,r.c)(8),{children:m,hintText:p,hintIcon:g}=e,{stage:f}=(0,o.useCohortTableControllerContext)(),x="open"===f||"updating"===f,y="closed"===f;return h[0]!==m||h[1]!==g||h[2]!==p||h[3]!==y||h[4]!==x?(d=y?(0,t.jsx)(c,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:s,children:(0,t.jsx)(a.CardNotice,{icon:g??n.CursorIcon,children:p})},"cohort-hint"):x?(0,t.jsx)(l.motion.div,{initial:{y:-128},animate:{y:0},exit:{y:-128},transition:s,children:m},"cohort-table"):null,h[0]=m,h[1]=g,h[2]=p,h[3]=y,h[4]=x,h[5]=d):d=h[5],h[6]!==d?(u=(0,t.jsx)(i.Collapsible,{duration:.28,clip:!0,children:d}),h[6]=d,h[7]=u):u=h[7],u}e.s(["AnimatedCohortTableSlot",()=>d],457392);var u=e.i(536977);e.i(946202);var h=e.i(215314);function m(e){let t,a,i,n,l=(0,r.c)(8),{growthData:o,cohortStart:s,fallbackDate:c}=e;e:{if(!o||0===o.length){t=null;break e}for(let e=o.length-1;e>=0;e--){let r=o[e];if(r.active>0){t=r.start;break e}}t=o[o.length-1]?.start??null}let d=t;t:{let e=s||d;if(e){let t;l[0]!==e?(t=(0,u.formatISODate)(new h.UTCDate(e)),l[0]=e,l[1]=t):t=l[1],a=t;break t}a=c}let m=a;l[2]!==s?(i=e=>!s||e===s,l[2]=s,l[3]=i):i=l[3];let p=i;return l[4]!==m||l[5]!==p||l[6]!==d?(n={mostRecentInterval:d,formattedStart:m,isActiveBar:p},l[4]=m,l[5]=p,l[6]=d,l[7]=n):n=l[7],n}e.s(["useMostRecentInterval",()=>m],179475);var p=e.i(431560),g=e.i(136855),f=e.i(927800),x=e.i(230902),y=e.i(987077),v=e.i(184260),b=e.i(162863),_=e.i(197055),S=e.i(458789),j=e.i(109461),w=e.i(52026),C=e.i(873713),k=e.i(982641),T=e.i(546822),O=e.i(981408),N=e.i(450613),P=e.i(942327),E=e.i(625248),R=e.i(784931),D=e.i(787802),B=e.i(77012);let I=e=>D.tickFormatter.format(e);function A(e){let a,i,n,l,o,s,c,d,u,m,p,g,b,D,B,A,K,q,V,G,Y,W,Z,X,J,ee,et,er,ea,ei,en=(0,r.c)(92),{height:el,data:eo,metadata:es,colors:ec,tooltipMetrics:ed,stackOrder:eu,activeBar:eh,onPositiveClick:em,onNegativeClick:ep,activePositiveBars:eg,activeNegativeBars:ef}=e,ex=void 0===el?500:el,ey=(0,y.useReducedMotion)(),{interval:ev,view:eb}=(0,R.useOverviewSearchParams)(),e_=(0,v.useRef)(null);en[0]!==ev?(a=e=>"month"===ev?(0,x.format)(new h.UTCDate(e),"MMM"):(0,x.format)(new h.UTCDate(e),"MMM d"),en[0]=ev,en[1]=a):a=en[1];let eS=a;if(en[2]!==ec||en[3]!==es){let e;en[5]!==ec?(e=e=>({key:e.key,name:e.name,description:e.description,color:ec[e.key]?.color??"#8884d8"}),en[5]=ec,en[6]=e):e=en[6],i=es.filter(U).map(e),en[2]=ec,en[3]=es,en[4]=i}else i=en[4];let ej=i;e:{let e;if(!eu?.length){n=ej;break e}if(en[7]!==ej||en[8]!==eu){let t=new Map(ej.map(z)),r=new Set(eu);for(let a of(e=eu.map(e=>t.get(e)).filter(Boolean),ej))r.has(a.key)||e.push(a);en[7]=ej,en[8]=eu,en[9]=e}else e=en[9];n=e}let ew=n;en[10]!==eo||en[11]!==ew?(l=function(e,t,r){var a;let i,{minValue:n,maxValue:l}=function(e,t){let r=1/0,a=-1/0;if(!e?.length||0===t.length)return{minValue:0,maxValue:1};for(let i of e){let e=0,n=0;for(let r of t){let t=Number(i[r]);Number.isFinite(t)&&0!==t&&(t>0?e+=t:n+=t)}e>a&&(a=e),n<r&&(r=n)}return Number.isFinite(r)||(r=0),Number.isFinite(a)||(a=1),0===r&&0===a&&(a=1),{minValue:r,maxValue:a}}(e,t),o=(0,E.createLinearScale)([n,l]),s=o.domain();return r.ensureZeroVisible&&(s=function(e){let[t,r]=e;return t>0&&(t=0),r<0&&(r=0),[t,r]}(s)),r.symmetricAroundZero&&(s=[-(i=Math.max(Math.abs((a=s)[0]),Math.abs(a[1]))),i]),{domain:(o=(o=o.domain(s)).nice(r.approxTickCount)).domain(),ticks:o.ticks(r.approxTickCount)}}(eo,ew.map($),{approxTickCount:5,ensureZeroVisible:!0,symmetricAroundZero:!1}),en[10]=eo,en[11]=ew,en[12]=l):l=en[12];let{domain:eC,ticks:ek}=l;en[13]!==eC[0]||en[14]!==eC[1]?(o={min:eC[0],max:eC[1]},en[13]=eC[0],en[14]=eC[1],en[15]=o):o=en[15],en[16]!==o||en[17]!==ek?(s={computedYAxisDomain:o,computedYAxisTicks:ek},en[16]=o,en[17]=ek,en[18]=s):s=en[18];let{computedYAxisDomain:eT,computedYAxisTicks:eO}=s;t:{let e;if(!eo?.length){let e;en[19]===Symbol.for("react.memo_cache_sentinel")?(e={},en[19]=e):e=en[19],c=e;break t}en[20]!==eo||en[21]!==ew?(e={},eo.forEach((t,r)=>{let a={},i=ew.filter(e=>{let r=Number(t[e.key]);return Number.isFinite(r)&&r>0}),n=ew.filter(e=>{let r=Number(t[e.key]);return Number.isFinite(r)&&r<0}),l=i[i.length-1]?.key,o=n[n.length-1]?.key;for(let e of ew){let r=Number(t[e.key]),s="translateY(0)";if(Number.isFinite(r)&&r<0){let t=n.findIndex(t=>t.key===e.key);s=`translateY(${.1875+.125*t}rem)`}else if(Number.isFinite(r)&&r>0){let t=i.findIndex(t=>t.key===e.key);s=`translateY(-${.1875+.125*t}rem)`}a[e.key]={transform:s,radius:e.key===l||e.key===o?[4,4,2,2]:3}}e[r]=a}),en[20]=eo,en[21]=ew,en[22]=e):e=en[22],c=e}let eN=c,eP=!!em||!!ep;en[23]!==eo||en[24]!==eP||en[25]!==ep||en[26]!==em||en[27]!==ew?(d=e=>{if(!eP||!e||"number"!=typeof e.activeTooltipIndex)return;let t=e.activePayload?.[0]?.payload,r="string"==typeof e.activeLabel?eo?.find(t=>t.start===e.activeLabel):void 0,a=t??r;if(!a?.start)return;let i=ew.some(e=>{let t=Number(a[e.key]);return Number.isFinite(t)&&t>0}),n=ew.some(e=>{let t=Number(a[e.key]);return Number.isFinite(t)&&t<0}),l=e_.current??(i&&!n?"positive":!i&&n?"negative":"positive");"negative"===l&&ep&&n?ep(a):"positive"===l&&em&&i||em&&i?em(a):ep&&n&&ep(a)},en[23]=eo,en[24]=eP,en[25]=ep,en[26]=em,en[27]=ew,en[28]=d):d=en[28];let eE=d;en[29]!==eT||en[30]!==ej||en[31]!==ev||en[32]!==ed||en[33]!==eb?(u=e=>{let{payload:r,active:a,coordinate:i,viewBox:n}=e;if(!a||!r?.length||!i||!n||!r.some(F))return null;let l=r.some(M),o=r.some(L),s=null;if(l&&o){let e=n&&"number"==typeof n.y&&"number"==typeof n.height&&Number.isFinite(n.height)&&!(n.height<=0)?{y:n.y,height:n.height}:null;if(!e)return null;let{min:t,max:r}=eT,a=function(e,t,r){if(!r||!Number.isFinite(r.height)||r.height<=0)return 0;let a=t.max-t.min||1;return r.y+(t.max-0)/a*r.height}(0,{min:t,max:r},e),l=Math.max(4,Math.round(.015*e.height)),o=(i.y??0)-a;Math.abs(o)<=l?s=e_.current:e_.current=s=o<0?"positive":"negative"}else l?(s="positive",e_.current="positive"):o&&(s="negative",e_.current="negative");return(0,t.jsx)(Q,{chartView:eb,payload:r,interval:ev,filteredMeta:ej,tooltipMetrics:ed,hoveredSection:s})},en[29]=eT,en[30]=ej,en[31]=ev,en[32]=ed,en[33]=eb,en[34]=u):u=en[34];let eR=u,eD=eP&&"[&_.recharts-surface]:cursor-pointer";en[35]!==eD?(m=(0,f.cx)("relative w-full","h-[--bar-chart-height]","[--x-axis-reference-line-color:theme(colors.ceramic.gray.1200)] dark:[--x-axis-reference-line-color:theme(colors.ceramic.gray.500)]","[--cartesian-grid-stroke-color:theme(colors.ceramic.gray.300)] dark:[--cartesian-grid-stroke-color:theme(colors.ceramic.gray.1000)]","[--axis-tick-color:theme(colors.ceramic.secondary)]",eD),en[35]=eD,en[36]=m):m=en[36];let eB=`${ex/16}rem`;en[37]!==eB?(p={"--bar-chart-height":eB},en[37]=eB,en[38]=p):p=en[38],en[39]!==eo?.length?(g=!eo?.length&&(0,t.jsx)("div",{className:"absolute inset-0 grid place-items-center text-ceramic-secondary",children:"No data for the selected range"}),en[39]=eo?.length,en[40]=g):g=en[40],en[41]===Symbol.for("react.memo_cache_sentinel")?(b={left:16,right:16,bottom:20},en[41]=b):b=en[41],en[42]===Symbol.for("react.memo_cache_sentinel")?(D=()=>{e_.current=null},B=(0,t.jsx)(j.CartesianGrid,{vertical:!1,strokeDasharray:"1 3",strokeLinecap:"round",strokeWidth:1,stroke:"var(--cartesian-grid-stroke-color)"}),en[42]=D,en[43]=B):(D=en[42],B=en[43]),en[44]===Symbol.for("react.memo_cache_sentinel")?(A={fill:"var(--axis-tick-color)"},en[44]=A):A=en[44],en[45]!==eS?(K=(0,t.jsx)(N.XAxis,{axisLine:!1,dataKey:"start",tickLine:!1,tick:A,tickMargin:16,interval:"equidistantPreserveStart",className:"text-ceramic-body-4",tickFormatter:eS}),en[45]=eS,en[46]=K):K=en[46],en[47]===Symbol.for("react.memo_cache_sentinel")?(q={fill:"var(--axis-tick-color)"},en[47]=q):q=en[47],en[48]!==eT.max||en[49]!==eT.min?(V=[eT.min,eT.max],en[48]=eT.max,en[49]=eT.min,en[50]=V):V=en[50],en[51]!==eO||en[52]!==V?(G=(0,t.jsx)(P.YAxis,{axisLine:!1,tickMargin:32,minTickGap:32,tickLine:!1,tick:q,className:"text-ceramic-body-4",tickFormatter:I,domain:V,ticks:eO,allowDataOverflow:!0}),en[51]=eO,en[52]=V,en[53]=G):G=en[53],en[54]===Symbol.for("react.memo_cache_sentinel")?(Y={y:88},W={fill:"#d1d5db",opacity:.15},en[54]=Y,en[55]=W):(Y=en[54],W=en[55]);let eI=!ey;if(en[56]!==eR||en[57]!==eI?(Z=(0,t.jsx)(O.Tooltip,{offset:20,position:Y,cursor:W,isAnimationActive:eI,animationDuration:0,content:eR}),en[56]=eR,en[57]=eI,en[58]=Z):Z=en[58],en[59]===Symbol.for("react.memo_cache_sentinel")?(X={paddingBottom:4},en[59]=X):X=en[59],en[60]!==ej?(J=(0,t.jsx)(C.Legend,{verticalAlign:"top",wrapperStyle:X,content:(0,t.jsx)(H,{filteredMeta:ej})}),en[60]=ej,en[61]=J):J=en[61],en[62]!==eh||en[63]!==ef||en[64]!==eg||en[65]!==eN||en[66]!==eo||en[67]!==ew){let e;en[69]!==eh||en[70]!==ef||en[71]!==eg||en[72]!==eN||en[73]!==eo?(e=e=>(0,t.jsx)(_.Bar,{isAnimationActive:!1,dataKey:e.key,fill:e.color,stackId:"stack",maxBarSize:32,children:eo?.map((r,a)=>{let i=Number(r?.[e.key]),n=Number.isFinite(i)&&i>0,l=Number.isFinite(i)&&i<0,o=!eh||eh(r),s=!!eg&&n,c=!!ef&&l,d=!eg&&!ef,u=eN?.[a]?.[e.key];return(0,t.jsx)(w.Cell,{fill:o&&(s||c||d)?e.color:`color-mix(in srgb, ${e.color} 50%, var(--ceramic-bg-main))`,style:{transform:u?.transform},radius:u?.radius},a)})},e.key),en[69]=eh,en[70]=ef,en[71]=eg,en[72]=eN,en[73]=eo,en[74]=e):e=en[74],ee=ew.map(e),en[62]=eh,en[63]=ef,en[64]=eg,en[65]=eN,en[66]=eo,en[67]=ew,en[68]=ee}else ee=en[68];return en[75]===Symbol.for("react.memo_cache_sentinel")?(et=(0,t.jsx)(k.ReferenceLine,{y:0,strokeWidth:2,stroke:"var(--x-axis-reference-line-color)"}),en[75]=et):et=en[75],en[76]!==eo||en[77]!==eE||en[78]!==K||en[79]!==G||en[80]!==Z||en[81]!==J||en[82]!==ee?(er=(0,t.jsxs)(S.BarChart,{data:eo,stackOffset:"sign",margin:b,onClick:eE,onMouseLeave:D,children:[B,K,G,Z,J,ee,et]}),en[76]=eo,en[77]=eE,en[78]=K,en[79]=G,en[80]=Z,en[81]=J,en[82]=ee,en[83]=er):er=en[83],en[84]!==ex||en[85]!==er?(ea=(0,t.jsx)("div",{className:"absolute inset-0 isolate flex size-full items-center justify-center",children:(0,t.jsx)(T.ResponsiveContainer,{debounce:200,width:"100%",height:ex,children:er})}),en[84]=ex,en[85]=er,en[86]=ea):ea=en[86],en[87]!==m||en[88]!==p||en[89]!==g||en[90]!==ea?(ei=(0,t.jsxs)("div",{className:m,style:p,role:"img","aria-label":"Stacked bar chart showing positive and negative contributors over time",children:[g,ea]}),en[87]=m,en[88]=p,en[89]=g,en[90]=ea,en[91]=ei):ei=en[91],ei}function L(e){return"number"==typeof e.value&&e.value<0}function M(e){return"number"==typeof e.value&&e.value>0}function F(e){return"number"==typeof e.value&&0!==e.value}function $(e){return e.key}function z(e){return[e.key,e]}function U(e){return"start"!==e.key}let H=v.default.memo(e=>{let a,i,n=(0,r.c)(4),{filteredMeta:l}=e;return n[0]!==l?(a=l.map(K),n[0]=l,n[1]=a):a=n[1],n[2]!==a?(i=(0,t.jsx)("div",{className:"flex flex-col-reverse justify-between gap-2 px-1 pb-8 pt-5 md:flex-row md:gap-8",children:(0,t.jsx)("div",{className:"flex flex-1 flex-wrap items-center gap-2 md:gap-6 lg:gap-8",children:a})}),n[2]=a,n[3]=i):i=n[3],i});H.displayName="ChartLegend";let Q=v.default.memo(e=>{let a,i,n,l,o,s,c,d,u,m,p=(0,r.c)(31),{chartView:f,payload:y,interval:v,filteredMeta:b,tooltipMetrics:_,hoveredSection:S}=e;if(!y?.length||!y[0]?.payload)return null;let j=y[0].payload.start;p[0]!==v||p[1]!==j?(a=((e,t)=>{let r=new h.UTCDate(e);switch(t){case"day":return(0,x.format)(r,"MMMM do, yyyy");case"week":return`Week of ${(0,x.format)(r,"MMMM do, yyyy")}`;default:return(0,x.format)(r,"MMMM yyyy")}})(j,v),p[0]=v,p[1]=j,p[2]=a):a=p[2];let w=a;if(p[3]!==f||p[4]!==b||p[5]!==w||p[6]!==S||p[7]!==v||p[8]!==y||p[9]!==_){d=Symbol.for("react.early_return_sentinel");e:{let e,t,r=S?y.filter(e=>{if("number"!=typeof e.value)return!1;let t=String(e.dataKey||"").includes("_churned");return"positive"===S?e.value>0||0===e.value&&!t:e.value<0||0===e.value&&t}):y;if(0===r.length||!r.some(q)){d=null;break e}let a=new Map(r.map(V));p[17]!==b?(e=b.some(G),p[17]=b,p[18]=e):e=p[18];let u=e,h=r.some(Y),m=y[0]?.payload;p[19]!==m||p[20]!==v?(t=m&&!(0,E.isPeriodComplete)(m,v),p[19]=m,p[20]=v,p[21]=t):t=p[21];let g=t;l=u&&(h||g),n=h?`Churned ${f} were active last period but did not return this period`:`Churned ${f} will be calculated when this period is complete`,i=B.ChartTooltip,o=w,s=_?_({payload:r}):void 0,c=b.map(e=>{let t=a.get(e.key);return t&&void 0!==t.value?{key:e.name,color:t.color,value:"number"==typeof t.value?t.value.toLocaleString("en-US"):void 0,shape:"circle"}:null}).filter(W)}p[3]=f,p[4]=b,p[5]=w,p[6]=S,p[7]=v,p[8]=y,p[9]=_,p[10]=i,p[11]=n,p[12]=l,p[13]=o,p[14]=s,p[15]=c,p[16]=d}else i=p[10],n=p[11],l=p[12],o=p[13],s=p[14],c=p[15],d=p[16];return d!==Symbol.for("react.early_return_sentinel")?d:(p[22]!==n||p[23]!==l?(u=l?(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-sm bg-ceramic-gray-50 p-2 ring-1 ring-inset ring-ceramic-gray-700/12 dark:bg-ceramic-gray-1200",children:[(0,t.jsx)(g.InformationCircleIcon,{className:"size-4 text-ceramic-secondary"}),(0,t.jsx)("p",{className:"max-w-[12.5rem] text-pretty text-ceramic-body-4 text-ceramic-secondary",children:n})]}):null,p[22]=n,p[23]=l,p[24]=u):u=p[24],p[25]!==i||p[26]!==o||p[27]!==s||p[28]!==c||p[29]!==u?(m=(0,t.jsx)(i,{label:o,metrics:s,items:c,className:"min-w-[16.0625rem]",banner:u}),p[25]=i,p[26]=o,p[27]=s,p[28]=c,p[29]=u,p[30]=m):m=p[30],m)});function K(e){return(0,t.jsxs)(p.TooltipTrigger,{delay:150,children:[(0,t.jsx)(p.Tooltip,{offset:6,children:e.description}),(0,t.jsxs)(b.Button,{className:"flex cursor-help items-center gap-2 rounded-sm px-1 py-px transition-colors data-[hovered]:bg-ceramic-gray-100 dark:data-[hovered]:bg-ceramic-gray-1200",children:[(0,t.jsx)("div",{role:"none",className:"size-1.5 shrink-0 rounded-full",style:{backgroundColor:e.color}}),(0,t.jsx)("span",{className:"text-ceramic-body-3 text-ceramic-secondary",children:e.name})]})]},e.key)}function q(e){return"number"==typeof e.value}function V(e){return[e.dataKey,e]}function G(e){return String(e.key||"").includes("_churned")}function Y(e){return e.dataKey.includes("_churned")&&"number"==typeof e.value}function W(e){return null!==e}function Z(e){let t,a,i,n,l,s,c=(0,r.c)(27),{positiveStatuses:d,negativeStatuses:u}=e,{uiSelectionForChart:h,select:m,requestDeselect:p}=(0,o.useCohortTableControllerContext)();c[0]!==h.cohortStart||c[1]!==h.cohortStatuses?(t=(e,t)=>h.cohortStart===t&&h.cohortStatuses.length>0&&h.cohortStatuses.every(t=>e.includes(t)),c[0]=h.cohortStart,c[1]=h.cohortStatuses,c[2]=t):t=c[2];let g=t;e:{let e;if(!h.cohortStart){a=!1;break e}c[3]!==g||c[4]!==d||c[5]!==h.cohortStart?(e=g(d,h.cohortStart),c[3]=g,c[4]=d,c[5]=h.cohortStart,c[6]=e):e=c[6],a=e}let f=a;t:{let e;if(!h.cohortStart){i=!1;break t}c[7]!==g||c[8]!==u||c[9]!==h.cohortStart?(e=g(u,h.cohortStart),c[7]=g,c[8]=u,c[9]=h.cohortStart,c[10]=e):e=c[10],i=e}let x=i;c[11]!==g||c[12]!==d||c[13]!==p||c[14]!==m?(n=e=>{g(d,e.start)?p():m({cohortStart:e.start,cohortStatuses:[...d]})},c[11]=g,c[12]=d,c[13]=p,c[14]=m,c[15]=n):n=c[15];let y=n;c[16]!==g||c[17]!==u||c[18]!==p||c[19]!==m?(l=e=>{g(u,e.start)?p():m({cohortStart:e.start,cohortStatuses:[...u]})},c[16]=g,c[17]=u,c[18]=p,c[19]=m,c[20]=l):l=c[20];let v=l;return c[21]!==x||c[22]!==f||c[23]!==v||c[24]!==y||c[25]!==h?(s={uiSelectionForChart:h,activePositiveBars:f,activeNegativeBars:x,onPositiveClick:y,onNegativeClick:v},c[21]=x,c[22]=f,c[23]=v,c[24]=y,c[25]=h,c[26]=s):s=c[26],s}Q.displayName="TooltipContent",e.s(["BarChartStacked",()=>A],456951),e.s(["useCohortBarSelection",()=>Z],29258)},468261,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(886527),i=e.i(61210),n=e.i(412939),l=e.i(758040),o=e.i(364890),s=e.i(494766),c=e.i(915279),d=e.i(625248),u=e.i(457392),h=e.i(14066),m=e.i(870716),p=e.i(179475),g=e.i(784931),f=e.i(787802),x=e.i(456951),y=e.i(964973),v=e.i(29258),b=e.i(821737);function _(){let e,i,s,c,u,h,m,_,S,j=(0,r.c)(35);j[0]===Symbol.for("react.memo_cache_sentinel")?(e={positiveStatuses:b.ACTIVE_COHORT_STATUSES,negativeStatuses:b.CHURNED_COHORT_STATUSES},j[0]=e):e=j[0];let{uiSelectionForChart:w,activePositiveBars:C,activeNegativeBars:k,onPositiveClick:T,onNegativeClick:O}=(0,v.useCohortBarSelection)(e),{instanceId:N}=(0,n.useTypedParams)(),{getToken:P}=(0,l.useAuth)(),{interval:E,dateRange:R,ignoreIncompletePeriods:D}=(0,g.useOverviewSearchParams)(),{formattedStart:B,formattedEnd:I}=(0,d.parseDateRange)(R),{colors:A,stackOrder:L}=(0,y.useBarChartStackedConfig)("active"),{data:M}=(0,o.useSuspenseQuery)((0,a.organizationGrowthQuery)(N,{getToken:P,start:B,end:I,interval:E,ignoreIncompleteIntervals:D})),F=M.data,$=M.meta,z=w.cohortStart??"";j[1]!==F||j[2]!==I||j[3]!==z?(i={growthData:F,cohortStart:z,fallbackDate:I},j[1]=F,j[2]=I,j[3]=z,j[4]=i):i=j[4];let{isActiveBar:U}=(0,p.useMostRecentInterval)(i);j[5]!==A?(s=Object.keys(A),j[5]=A,j[6]=s):s=j[6];let H=s;if(j[7]!==F||j[8]!==E){let e;j[10]!==E?(e=e=>{let t=(0,d.isPeriodComplete)(e,E),r={start:e.start,first_active:e.first_active,reactivated:e.reactivated,retained:e.retained,active:e.active,active_change:e.active_change};return t?{...r,first_active_churned:e.first_active_churned,reactivated_churned:e.reactivated_churned,retained_churned:e.retained_churned}:r},j[10]=E,j[11]=e):e=j[11],c=F.map(e),j[7]=F,j[8]=E,j[9]=c}else c=j[9];if(j[12]!==$||j[13]!==H){let e;j[15]!==H?(e=e=>H.includes(e.key),j[15]=H,j[16]=e):e=j[16],u=$.filter(e),j[12]=$,j[13]=H,j[14]=u}else u=j[14];j[17]!==c||j[18]!==u?(h={data:c,metadata:u},j[17]=c,j[18]=u,j[19]=h):h=j[19];let Q=h;return j[20]!==E?(m=e=>{let{payload:t}=e;if(!t?.[0]?.payload)return;let r=t[0].payload,a=(0,d.isPeriodComplete)(r,E);return{value:{key:"Active orgs",value:r.active??0},deviation:a?{key:`From ${f.tooltipIntervalTextMap[E]}`,value:r.active_change??0}:void 0}},j[20]=E,j[21]=m):m=j[21],j[22]!==U?(_=e=>U(e.start),j[22]=U,j[23]=_):_=j[23],j[24]!==k||j[25]!==C||j[26]!==Q.data||j[27]!==Q.metadata||j[28]!==A||j[29]!==O||j[30]!==T||j[31]!==L||j[32]!==m||j[33]!==_?(S=(0,t.jsx)("div",{children:(0,t.jsx)(x.BarChartStacked,{metadata:Q.metadata,data:Q.data,colors:A,stackOrder:L,tooltipMetrics:m,onPositiveClick:T,onNegativeClick:O,activePositiveBars:C,activeNegativeBars:k,activeBar:_})}),j[24]=k,j[25]=C,j[26]=Q.data,j[27]=Q.metadata,j[28]=A,j[29]=O,j[30]=T,j[31]=L,j[32]=m,j[33]=_,j[34]=S):S=j[34],S}let S=["first_active"],j=["first_active_churned"];function w(){let e,i,s,c,u,h,m,b,_,w=(0,r.c)(34);w[0]===Symbol.for("react.memo_cache_sentinel")?(e={positiveStatuses:S,negativeStatuses:j},w[0]=e):e=w[0];let{uiSelectionForChart:C,activePositiveBars:k,activeNegativeBars:T,onPositiveClick:O,onNegativeClick:N}=(0,v.useCohortBarSelection)(e),{instanceId:P}=(0,n.useTypedParams)(),{getToken:E}=(0,l.useAuth)(),{interval:R,dateRange:D,ignoreIncompletePeriods:B}=(0,g.useOverviewSearchParams)(),{formattedStart:I,formattedEnd:A}=(0,d.parseDateRange)(D),{colors:L}=(0,y.useBarChartStackedConfig)("new"),{data:M}=(0,o.useSuspenseQuery)((0,a.organizationGrowthQuery)(P,{getToken:E,start:I,end:A,interval:R,ignoreIncompleteIntervals:B})),F=M.data,$=M.meta,z=C.cohortStart??"";w[1]!==A||w[2]!==F||w[3]!==z?(i={growthData:F,cohortStart:z,fallbackDate:A},w[1]=A,w[2]=F,w[3]=z,w[4]=i):i=w[4];let{isActiveBar:U}=(0,p.useMostRecentInterval)(i);w[5]!==L?(s=Object.keys(L),w[5]=L,w[6]=s):s=w[6];let H=s;if(w[7]!==R||w[8]!==F){let e;w[10]!==R?(e=e=>{let t=(0,d.isPeriodComplete)(e,R),r={start:e.start,first_active:e.first_active,first_active_change:e.first_active_change};return t?{...r,first_active_churned:e.first_active_churned}:r},w[10]=R,w[11]=e):e=w[11],c=F.map(e),w[7]=R,w[8]=F,w[9]=c}else c=w[9];if(w[12]!==H||w[13]!==$){let e;w[15]!==H?(e=e=>H.includes(e.key),w[15]=H,w[16]=e):e=w[16],u=$.filter(e),w[12]=H,w[13]=$,w[14]=u}else u=w[14];w[17]!==c||w[18]!==u?(h={data:c,metadata:u},w[17]=c,w[18]=u,w[19]=h):h=w[19];let Q=h;return w[20]!==R?(m=e=>{let{payload:t}=e;if(!t?.[0]?.payload)return;let r=t[0].payload,a=(0,d.isPeriodComplete)(r,R);return{value:{key:"New orgs",value:r.first_active??0},deviation:a?{key:`From ${f.tooltipIntervalTextMap[R]}`,value:r.first_active_change??0}:void 0}},w[20]=R,w[21]=m):m=w[21],w[22]!==U?(b=e=>U(e.start),w[22]=U,w[23]=b):b=w[23],w[24]!==T||w[25]!==k||w[26]!==Q.data||w[27]!==Q.metadata||w[28]!==L||w[29]!==N||w[30]!==O||w[31]!==m||w[32]!==b?(_=(0,t.jsx)("div",{children:(0,t.jsx)(x.BarChartStacked,{metadata:Q.metadata,colors:L,data:Q.data,tooltipMetrics:m,onPositiveClick:O,onNegativeClick:N,activePositiveBars:k,activeNegativeBars:T,activeBar:b})}),w[24]=T,w[25]=k,w[26]=Q.data,w[27]=Q.metadata,w[28]=L,w[29]=N,w[30]=O,w[31]=m,w[32]=b,w[33]=_):_=w[33],_}let C=["reactivated"],k=["reactivated_churned"];function T(){let e,i,s,c,u,h,m,b,_,S=(0,r.c)(34);S[0]===Symbol.for("react.memo_cache_sentinel")?(e={positiveStatuses:C,negativeStatuses:k},S[0]=e):e=S[0];let{uiSelectionForChart:j,activePositiveBars:w,activeNegativeBars:T,onPositiveClick:O,onNegativeClick:N}=(0,v.useCohortBarSelection)(e),{instanceId:P}=(0,n.useTypedParams)(),{getToken:E}=(0,l.useAuth)(),{interval:R,dateRange:D,ignoreIncompletePeriods:B}=(0,g.useOverviewSearchParams)(),{formattedStart:I,formattedEnd:A}=(0,d.parseDateRange)(D),{colors:L}=(0,y.useBarChartStackedConfig)("reactivated"),{data:M}=(0,o.useSuspenseQuery)((0,a.organizationGrowthQuery)(P,{getToken:E,start:I,end:A,interval:R,ignoreIncompleteIntervals:B})),F=M.data,$=M.meta,z=j.cohortStart??"";S[1]!==A||S[2]!==F||S[3]!==z?(i={growthData:F,cohortStart:z,fallbackDate:A},S[1]=A,S[2]=F,S[3]=z,S[4]=i):i=S[4];let{isActiveBar:U}=(0,p.useMostRecentInterval)(i);S[5]!==L?(s=Object.keys(L),S[5]=L,S[6]=s):s=S[6];let H=s;if(S[7]!==R||S[8]!==F){let e;S[10]!==R?(e=e=>{let t=(0,d.isPeriodComplete)(e,R),r={start:e.start,reactivated:e.reactivated,reactivated_change:e.reactivated_change};return t?{...r,reactivated_churned:e.reactivated_churned}:r},S[10]=R,S[11]=e):e=S[11],c=F.map(e),S[7]=R,S[8]=F,S[9]=c}else c=S[9];if(S[12]!==H||S[13]!==$){let e;S[15]!==H?(e=e=>H.includes(e.key),S[15]=H,S[16]=e):e=S[16],u=$.filter(e),S[12]=H,S[13]=$,S[14]=u}else u=S[14];S[17]!==c||S[18]!==u?(h={data:c,metadata:u},S[17]=c,S[18]=u,S[19]=h):h=S[19];let Q=h;return S[20]!==R?(m=e=>{let{payload:t}=e;if(!t?.[0]?.payload)return;let r=t[0].payload,a=(0,d.isPeriodComplete)(r,R);return{value:{key:"Reactivated orgs",value:r.reactivated??0},deviation:a?{key:`From ${f.tooltipIntervalTextMap[R]}`,value:r.reactivated_change??0}:void 0}},S[20]=R,S[21]=m):m=S[21],S[22]!==U?(b=e=>U(e.start),S[22]=U,S[23]=b):b=S[23],S[24]!==T||S[25]!==w||S[26]!==Q.data||S[27]!==Q.metadata||S[28]!==L||S[29]!==N||S[30]!==O||S[31]!==m||S[32]!==b?(_=(0,t.jsx)("div",{children:(0,t.jsx)(x.BarChartStacked,{metadata:Q.metadata,colors:L,data:Q.data,tooltipMetrics:m,onPositiveClick:O,onNegativeClick:N,activePositiveBars:w,activeNegativeBars:T,activeBar:b})}),S[24]=T,S[25]=w,S[26]=Q.data,S[27]=Q.metadata,S[28]=L,S[29]=N,S[30]=O,S[31]=m,S[32]=b,S[33]=_):_=S[33],_}let O=["retained"],N=["retained_churned"];function P(){let e,i,s,c,u,h,m,b,_,S=(0,r.c)(34);S[0]===Symbol.for("react.memo_cache_sentinel")?(e={positiveStatuses:O,negativeStatuses:N},S[0]=e):e=S[0];let{uiSelectionForChart:j,activePositiveBars:w,activeNegativeBars:C,onPositiveClick:k,onNegativeClick:T}=(0,v.useCohortBarSelection)(e),{instanceId:P}=(0,n.useTypedParams)(),{getToken:E}=(0,l.useAuth)(),{interval:R,dateRange:D,ignoreIncompletePeriods:B}=(0,g.useOverviewSearchParams)(),{formattedStart:I,formattedEnd:A}=(0,d.parseDateRange)(D),{colors:L}=(0,y.useBarChartStackedConfig)("retained"),{data:M}=(0,o.useSuspenseQuery)((0,a.organizationGrowthQuery)(P,{getToken:E,start:I,end:A,interval:R,ignoreIncompleteIntervals:B})),F=M.data,$=M.meta,z=j.cohortStart??"";S[1]!==A||S[2]!==F||S[3]!==z?(i={growthData:F,cohortStart:z,fallbackDate:A},S[1]=A,S[2]=F,S[3]=z,S[4]=i):i=S[4];let{isActiveBar:U}=(0,p.useMostRecentInterval)(i);S[5]!==L?(s=Object.keys(L),S[5]=L,S[6]=s):s=S[6];let H=s;if(S[7]!==R||S[8]!==F){let e;S[10]!==R?(e=e=>{let t=(0,d.isPeriodComplete)(e,R),r={start:e.start,retained:e.retained,retained_change:e.retained_change};return t?{...r,retained_churned:e.retained_churned}:r},S[10]=R,S[11]=e):e=S[11],c=F.map(e),S[7]=R,S[8]=F,S[9]=c}else c=S[9];if(S[12]!==H||S[13]!==$){let e;S[15]!==H?(e=e=>H.includes(e.key),S[15]=H,S[16]=e):e=S[16],u=$.filter(e),S[12]=H,S[13]=$,S[14]=u}else u=S[14];S[17]!==c||S[18]!==u?(h={data:c,metadata:u},S[17]=c,S[18]=u,S[19]=h):h=S[19];let Q=h;return S[20]!==R?(m=e=>{let{payload:t}=e;if(!t?.[0]?.payload)return;let r=t[0].payload,a=(0,d.isPeriodComplete)(r,R);return{value:{key:"Retained orgs",value:r.retained??0},deviation:a?{key:`From ${f.tooltipIntervalTextMap[R]}`,value:r.retained_change??0}:void 0}},S[20]=R,S[21]=m):m=S[21],S[22]!==U?(b=e=>U(e.start),S[22]=U,S[23]=b):b=S[23],S[24]!==C||S[25]!==w||S[26]!==Q.data||S[27]!==Q.metadata||S[28]!==L||S[29]!==T||S[30]!==k||S[31]!==m||S[32]!==b?(_=(0,t.jsx)("div",{children:(0,t.jsx)(x.BarChartStacked,{metadata:Q.metadata,colors:L,data:Q.data,tooltipMetrics:m,onPositiveClick:k,onNegativeClick:T,activePositiveBars:w,activeNegativeBars:C,activeBar:b})}),S[24]=C,S[25]=w,S[26]=Q.data,S[27]=Q.metadata,S[28]=L,S[29]=T,S[30]=k,S[31]=m,S[32]=b,S[33]=_):_=S[33],_}e.i(988456);var E=e.i(927800),R=e.i(291474);function D(e){let a,i,n,l,o=(0,r.c)(11),{fallbackOverlay:s,resetErrorBoundary:c,chartHeight:d,onDisableIncompletePeriods:u}=e,h="no-complete-periods"!==s&&"pointer-events-none select-none";return o[0]!==h?(a=(0,E.cx)("mt-6 rounded-3xl bg-ceramic-gray-50 p-1 dark:bg-ceramic-gray-1500",h),o[0]=h,o[1]=a):a=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,E.cx)("rounded-2xl bg-ceramic-main","shadow-[0_0_0_1px_rgba(25,28,33,0.04),0_1px_2px_rgba(25,28,33,0.06),0px_0px_2px_theme(colors.ceramic.black/0.08)]","dark:shadow-[inset_0_0_1px_1px_theme(colors.ceramic.white/0.01),0_0_0_1px_theme(colors.ceramic.black/0.2),0_0_3px_theme(colors.ceramic.black/0.2),0px_1px_3px_theme(colors.ceramic.black/0.4)]"),o[2]=i):i=o[2],o[3]!==d||o[4]!==s||o[5]!==u||o[6]!==c?(n=(0,t.jsx)("div",{className:i,children:"error"===s?(0,t.jsx)(R.StackedBarChartFallback,{fallbackOverlay:"error",resetErrorBoundary:c,chartHeight:d}):"no-complete-periods"===s?(0,t.jsx)(R.StackedBarChartFallback,{fallbackOverlay:"no-complete-periods",chartHeight:d,onDisableIncompletePeriods:u}):(0,t.jsx)(R.StackedBarChartFallback,{fallbackOverlay:"not-configured",chartHeight:d})}),o[3]=d,o[4]=s,o[5]=u,o[6]=c,o[7]=n):n=o[7],o[8]!==a||o[9]!==n?(l=(0,t.jsx)("div",{className:a,children:n}),o[8]=a,o[9]=n,o[10]=l):l=o[10],l}function B(e){let a,i=(0,r.c)(2),{tableSlot:n}=e;return i[0]!==n?(a=(0,t.jsx)(c.ErrorBoundary,{fallbackRender:I,children:(0,t.jsx)(h.CohortTableControllerProvider,{children:(0,t.jsx)(A,{tableSlot:n})})}),i[0]=n,i[1]=a):a=i[1],a}function I(e){let a,i=(0,r.c)(2),{resetErrorBoundary:n}=e;return i[0]!==n?(a=(0,t.jsx)(D,{fallbackOverlay:"error",resetErrorBoundary:n}),i[0]=n,i[1]=a):a=i[1],a}function A(e){let c,f,x,y,v,b=(0,r.c)(30),{tableSlot:_}=e,{uiSelectionForChart:S}=(0,h.useCohortTableControllerContext)();b[0]===Symbol.for("react.memo_cache_sentinel")?(c={history:"push"},b[0]=c):c=b[0];let{interval:j,dateRange:w,setParams:C,metric:k,ignoreIncompletePeriods:T}=(0,g.useOverviewSearchParams)(c);b[1]===Symbol.for("react.memo_cache_sentinel")?(f=s.parseAsInteger.withDefault(1),b[1]=f):f=b[1];let[,O]=(0,s.useQueryState)("cohortPage",f),{formattedStart:N,formattedEnd:P}=(0,d.parseDateRange)(w);b[2]!==O||b[3]!==C?(x=e=>{let t=e.metric&&({active:[],new:["first_active","first_active_churned"],retained:["retained","retained_churned"],reactivated:["reactivated","reactivated_churned"]})[e.metric]||[];C({...e,cohortStatuses:t}),O(1)},b[2]=O,b[3]=C,b[4]=x):x=b[4];let E=x,{instanceId:R}=(0,n.useTypedParams)(),{getToken:B}=(0,l.useAuth)(),{isConfigured:I,hasUsers:A}=(0,m.useDeploymentStatus)(),{data:$}=(0,o.useSuspenseQuery)((0,a.organizationGrowthQuery)(R,{getToken:B,start:N,end:P,interval:j,ignoreIncompleteIntervals:T})),z=$.data,U=$.meta,H=S.cohortStart??"";b[5]!==P||b[6]!==z||b[7]!==H?(y={growthData:z,cohortStart:H,fallbackDate:P},b[5]=P,b[6]=z,b[7]=H,b[8]=y):y=b[8];let{mostRecentInterval:Q}=(0,p.useMostRecentInterval)(y),K=S.cohortStart??Q;b[9]!==z||b[10]!==U||b[11]!==j||b[12]!==K?(v=F(z,U,j,K),b[9]=z,b[10]=U,b[11]=j,b[12]=K,b[13]=v):v=b[13];let q=v;if(0===z.length&&T){let e;return b[14]!==C?(e=(0,t.jsx)(D,{fallbackOverlay:"no-complete-periods",onDisableIncompletePeriods:()=>void C({ignoreIncompletePeriods:!1})}),b[14]=C,b[15]=e):e=b[15],e}if(!q){let e;return b[16]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(D,{fallbackOverlay:"error",resetErrorBoundary:M}),b[16]=e):e=b[16],e}if(I||A){let e,r,a,n,l=`org-${j}-${w}`;return b[17]!==E?(e=e=>{E({metric:e})},b[17]=E,b[18]=e):e=b[18],b[19]!==_?(r=_?(0,t.jsx)(u.AnimatedCohortTableSlot,{hintText:"Click any segment of the chart above to view the organization list for that cohort",children:_}):void 0,b[19]=_,b[20]=r):r=b[20],b[21]!==q?(a=Object.entries(q).map(L),b[21]=q,b[22]=a):a=b[22],b[23]!==k||b[24]!==a||b[25]!==l||b[26]!==e||b[27]!==r?(n=(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(i.AnalyticTabs,{selectedKey:k,onChange:e,belowChartSlot:r,metrics:a},l)}),b[23]=k,b[24]=a,b[25]=l,b[26]=e,b[27]=r,b[28]=n):n=b[28],n}if(!I&&!A){let e;return b[29]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(D,{fallbackOverlay:"not-configured"}),b[29]=e):e=b[29],e}}function L(e){let[t,r]=e;return{id:t,title:r.title,description:r.description,value:r.value,trendPeriod:r.trendPeriod,chartSlot:r.chartSlot}}function M(){return window.location.reload()}let F=(e,r,a,i)=>{let n,l={};if(i&&(n=e.find(e=>e.start===i)),!n&&e.length>0&&(n=e[e.length-1]),!n)return null;let o=r.reduce((e,t)=>(e[t.key]={name:t.name,description:f.ORG_METRIC_DESCRIPTIONS[t.key]},e),{}),s={active:(0,t.jsx)(_,{}),new:(0,t.jsx)(w,{}),retained:(0,t.jsx)(P,{}),reactivated:(0,t.jsx)(T,{})};return Object.entries({active:{valueKey:"active",changeKey:"active_change"},new:{valueKey:"first_active",changeKey:"first_active_change"},retained:{valueKey:"retained",changeKey:"retained_change"},reactivated:{valueKey:"reactivated",changeKey:"reactivated_change"}}).forEach(([e,t])=>{let r=e.charAt(0).toUpperCase()+e.slice(1),i=o["new"===e?"first_active":e]||{name:e};l[e]={id:e,title:r,description:i.description,value:n[t.valueKey]||0,trendPeriod:(0,d.getFormattedTrendPeriod)(a,n.start),chartSlot:s[e]}}),l};e.s(["Content",()=>B],468261)},165578,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(964481),i=e.i(784931),n=e.i(787802);function l(){let e,a,l,s,c,d,u=(0,r.c)(14),{interval:h}=(0,i.useOverviewSearchParams)(),m=n.intervalTextMap[h]??"week",p=n.RETENTION_CONFIG[h],g=p.label;u[0]!==p.subtitle?(e=p.subtitle.split(" "),u[0]=p.subtitle,u[1]=e):e=u[1];let f=parseInt(e[0]),x=`Organizations created per ${m}`;u[2]!==x?(a={title:x},u[2]=x,u[3]=a):a=u[3],u[4]===Symbol.for("react.memo_cache_sentinel")?(l={title:"Total organizations"},u[4]=l):l=u[4];let y=`${p.adjective} retention`,v=`${g}1`,b=`${g}${f}`;u[5]!==y||u[6]!==v||u[7]!==b?(s={title:y,isRetention:!0,startLabel:v,endLabel:b},u[5]=y,u[6]=v,u[7]=b,u[8]=s):s=u[8],u[9]!==a||u[10]!==s?(c=[a,l,s],u[9]=a,u[10]=s,u[11]=c):c=u[11];let _=c;return u[12]!==_?(d=(0,t.jsx)("div",{className:"mt-6 grid auto-rows-[minmax(412px,auto)] grid-cols-1 items-stretch gap-6 pb-32 md:grid-cols-2 lg:grid-cols-3",children:_.map(o)}),u[12]=_,u[13]=d):d=u[13],d}function o(e,r){return(0,t.jsx)(a.ChartCardFallback,{title:e.title,isRetention:e.isRetention,startLabel:e.startLabel,endLabel:e.endLabel},r)}e.s(["ReportsFallback",()=>l])},868921,144373,27968,751278,579611,847118,e=>{"use strict";let t;var r=e.i(73677),a=e.i(521322),i=e.i(184260),n=e.i(964481);function l(e){let t,l,o=(0,a.c)(6),{title:s,children:c,isRetention:d}=e;return o[0]!==d||o[1]!==s?(t=(0,r.jsx)(n.ChartCardFallback,{title:s,isRetention:d}),o[0]=d,o[1]=s,o[2]=t):t=o[2],o[3]!==c||o[4]!==t?(l=(0,r.jsx)(i.Suspense,{fallback:t,children:c}),o[3]=c,o[4]=t,o[5]=l):l=o[5],l}e.s(["ChartSuspense",()=>l],868921);var o=e.i(886527),s=e.i(839962),c=e.i(412939),d=e.i(70038),u=e.i(503666),h=e.i(357707);e.i(953300);var m=e.i(348261),p=e.i(819970),g=e.i(78388),f=e.i(758040),x=e.i(419551),y=e.i(731086),v=e.i(104477),b=e.i(927800),_=e.i(230902),S=e.i(825822),j=e.i(987077),w=e.i(915279),C=e.i(575855),k=e.i(124184),T=e.i(981408),O=e.i(982641),N=e.i(546822),P=e.i(450613),E=e.i(942327);function R(e,t){let r,n,l,o,s=(0,a.c)(14),c=e[e.length-1],{getDefaultValue:d,getDataPointKey:u}=t;s[0]!==d||s[1]!==c?(r=c?d(c):0,s[0]=d,s[1]=c,s[2]=r):r=s[2];let h=r,[m,p]=(0,i.useState)(null),[g,f]=(0,i.useState)(null),x=null!==m,y=x?m:h;s[3]!==u?(n=(e,t)=>{p(e),f(null===e?null:t?u(t):null)},s[3]=u,s[4]=n):n=s[4];let v=n;s[5]!==u||s[6]!==g||s[7]!==x||s[8]!==c?(l=!x||g===(c?u(c):null),s[5]=u,s[6]=g,s[7]=x,s[8]=c,s[9]=l):l=s[9];let b=l;return s[10]!==y||s[11]!==v||s[12]!==b?(o={currentValue:y,isCurrentPeriod:b,handleChange:v},s[10]=y,s[11]=v,s[12]=b,s[13]=o):o=s[13],o}e.s(["useChartPeriodState",()=>R],144373);var D=e.i(870716),B=e.i(784931),I=e.i(787802),A=e.i(336821),L=e.i(685262),M=e.i(937509),F=e.i(449720),$=e.i(199613);e.i(45564);var z=e.i(757324),U=e.i(683471);function H(e){let t,i,n,l,o,s,c,u,h,m,p,g,f,x,y,v,_,S,j=(0,a.c)(50),w=e.showSubtitle??!0,C=e.showPercentage??!1,k=(0,U.usePathname)();j[0]!==k||j[1]!==e.buttonHref?(t=e.buttonHref??(0,L.to)(k,{page:"users"}),j[0]=k,j[1]=e.buttonHref,j[2]=t):t=j[2];let T=t,O=e.buttonText??"View all users",N=(0,A.useServerTimestamp)();j[3]===Symbol.for("react.memo_cache_sentinel")?(i=(0,b.cx)("relative min-h-0 flex-1 rounded-xl bg-ceramic-main p-8","shadow-[0_0_0_1px_rgba(25,28,33,0.04),0_1px_2px_rgba(25,28,33,0.06),0px_0px_2px_theme(colors.ceramic.black/0.08)]","dark:shadow-[inset_0_0_1px_1px_theme(colors.ceramic.white/0.01),0_0_0_1px_theme(colors.ceramic.black/0.2),0_0_3px_theme(colors.ceramic.black/0.2),0px_1px_3px_theme(colors.ceramic.black/0.4)]"),j[3]=i):i=j[3],j[4]!==e.description?(n=e.description&&(0,r.jsx)(M.InfoTooltip,{children:e.description}),j[4]=e.description,j[5]=n):n=j[5],j[6]!==e.title||j[7]!==n?(l=(0,r.jsxs)("h2",{className:"flex items-center gap-1.5 text-ceramic-label-2 text-ceramic-primary",children:[e.title,n]}),j[6]=e.title,j[7]=n,j[8]=l):l=j[8],j[9]===Symbol.for("react.memo_cache_sentinel")?(o={size:"md",variant:"secondary",emphasis:"high"},j[9]=o):o=j[9],j[10]!==e.exportButtonSlot||j[11]!==e.settingsButtonSlot?(s=(0,r.jsx)("div",{className:"flex items-center gap-2 [&_[slot=settings]]:order-last [@media(pointer:fine)]:opacity-0 [@media(pointer:fine)]:transition-opacity [@media(pointer:fine)]:will-change-[opacity] [@media(pointer:fine)]:group-hover/chart-card:opacity-100",children:(0,r.jsxs)(d.ButtonPropsContext,{value:o,children:[e.exportButtonSlot,e.settingsButtonSlot]})}),j[10]=e.exportButtonSlot,j[11]=e.settingsButtonSlot,j[12]=s):s=j[12],j[13]!==l||j[14]!==s?(c=(0,r.jsxs)("div",{className:"flex min-h-6 items-center justify-between",children:[l,s]}),j[13]=l,j[14]=s,j[15]=c):c=j[15];let P=!e.error;j[16]!==e.error||j[17]!==P?(u=(0,b.cx)("min-h-[2.625rem] text-ceramic-heading-3",{"text-ceramic-primary":P,"text-ceramic-dimmed":e.error}),j[16]=e.error,j[17]=P,j[18]=u):u=j[18],j[19]!==e.defaultValue||j[20]!==e.error||j[21]!==C?(h=e.error?"--":(0,r.jsx)(z.default,{value:e.defaultValue,format:C?{style:"percent"}:{}}),j[19]=e.defaultValue,j[20]=e.error,j[21]=C,j[22]=h):h=j[22],j[23]!==u||j[24]!==h?(m=(0,r.jsx)("div",{className:u,children:h}),j[23]=u,j[24]=h,j[25]=m):m=j[25];let E=!w,R=!w;j[26]!==R?(p=(0,b.cx)("text-ceramic-body-3 text-ceramic-secondary transition-opacity",{"opacity-0":R}),j[26]=R,j[27]=p):p=j[27],j[28]!==e.subtitle||j[29]!==E||j[30]!==p?(g=(0,r.jsx)("div",{"aria-hidden":E,className:p,children:e.subtitle}),j[28]=e.subtitle,j[29]=E,j[30]=p,j[31]=g):g=j[31],j[32]!==e.chart?(f=(0,r.jsx)("div",{className:"mt-8 min-h-0",children:e.chart}),j[32]=e.chart,j[33]=f):f=j[33],j[34]!==m||j[35]!==g||j[36]!==f||j[37]!==c?(x=(0,r.jsxs)("div",{className:i,children:[c,m,g,f]}),j[34]=m,j[35]=g,j[36]=f,j[37]=c,j[38]=x):x=j[38];let D=e.date??N;return j[39]!==D?(y=(0,r.jsx)(F.UpdatedAgo,{date:D}),j[39]=D,j[40]=y):y=j[40],j[41]!==T||j[42]!==O?(v=(0,r.jsx)(d.Button,{size:"md",variant:"secondary",emphasis:"none",icon:$.ArrowRightIcon,href:T,children:O}),j[41]=T,j[42]=O,j[43]=v):v=j[43],j[44]!==y||j[45]!==v?(_=(0,r.jsxs)("div",{className:"flex w-full justify-between px-5 py-4",children:[y,v]}),j[44]=y,j[45]=v,j[46]=_):_=j[46],j[47]!==x||j[48]!==_?(S=(0,r.jsxs)("div",{className:"group/chart-card flex h-full max-h-[25.75rem] w-full flex-col rounded-3xl bg-ceramic-gray-50 p-1 dark:bg-ceramic-gray-1500 lg:max-w-[23rem]",children:[x,_]}),j[47]=x,j[48]=_,j[49]=S):S=j[49],S}e.s(["ChartCard",()=>H],27968);var Q=e.i(77012),K=e.i(959369),q=e.i(538305),V=e.i(347248),G=e.i(160272),Y=e.i(134026),W=e.i(62557),Z=e.i(452117);function X(e){let t=(0,Z.useConstant)(()=>(0,Y.motionValue)(e)),{isStatic:r}=(0,i.useContext)(W.MotionConfigContext);if(r){let[,r]=(0,i.useState)(e);(0,i.useEffect)(()=>t.on("change",r),[])}return t}function J(e,t){let r=X(t()),a=()=>r.set(t());return a(),(0,G.useIsomorphicLayoutEffect)(()=>{let t=()=>V.frame.preRender(a,!1,!0),r=e.map(e=>e.on("change",t));return()=>{r.forEach(e=>e()),(0,V.cancelFrame)(a)}}),r}function ee(e,...t){let r=e.length;return J(t.filter(q.isMotionValue),function(){let a="";for(let i=0;i<r;i++){a+=e[i];let r=t[i];r&&(a+=(0,q.isMotionValue)(r)?r.get():r)}return a})}var et=e.i(279126);function er(e,t){let r=(0,Z.useConstant)(()=>[]);return J(e,()=>{r.length=0;let a=e.length;for(let t=0;t<a;t++)r[t]=e[t].get();return t(r)})}let ea={backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",transformStyle:"flat",transform:"translateZ(0)"},ei={type:"spring",stiffness:120,damping:18,mass:1.3};function en({front:e,rear:t,isFlipped:a}){let i=X(180*!!a),n=function(e,t,r,a){if("function"==typeof e){let t;return Y.collectMotionValues.current=[],e(),t=J(Y.collectMotionValues.current,e),Y.collectMotionValues.current=void 0,t}let i="function"==typeof t?t:function(...e){let t=!Array.isArray(e[0]),r=t?0:-1,a=e[0+r],i=e[1+r],n=e[2+r],l=e[3+r],o=(0,et.interpolate)(i,n,l);return t?o(a):o}(t,r,void 0);return Array.isArray(e)?er(e,i):er([e],([e])=>i(e))}(i,[0,90,180],[0,1.5,0]),l=ee`blur(${n}px)`;return(0,r.jsx)("div",{className:"relative size-full",children:(0,r.jsx)("div",{className:"relative size-full",style:{perspective:"1000px",perspectiveOrigin:"center center"},children:(0,r.jsx)(K.motion.div,{className:"relative size-full",animate:{scale:a?.985:1},transition:{scale:{type:"spring",stiffness:380,damping:30,mass:.7}},children:(0,r.jsxs)(K.motion.div,{className:"relative size-full",style:{transformStyle:"preserve-3d",WebkitTransformStyle:"preserve-3d",willChange:"transform",rotateY:i},animate:{rotateY:180*!!a,rotateX:2*!!a},transition:{rotateY:ei},children:[(0,r.jsx)(K.motion.div,{className:"absolute inset-0 size-full",style:{...ea,filter:l},inert:a,children:e}),(0,r.jsx)(K.motion.div,{className:"absolute inset-0 size-full",style:{...ea,transform:"rotateY(180deg) translateZ(0)",filter:l},inert:!a,children:t})]})})})})}var el=e.i(928041);let eo={user:{singular:"user",plural:"users",descriptionTemplate:e=>`The percentage of users who returned to your application over their first ${e.subtitle}`,errorDescription:e=>`The percentage of users from each ${e.adjective.toLowerCase()} cohort who remain active over time`},organization:{singular:"organization",plural:"organizations",descriptionTemplate:e=>`The percentage of organizations that remained active over their first ${e.subtitle}`,errorDescription:e=>`The percentage of organizations from each ${e.adjective.toLowerCase()} cohort that remain active over time`}},es=e=>{let t=Math.min(e,5)+1;return`var(--cohort-color-${t})`},ec=e=>{let t,i,n=(0,a.c)(6),{x:l,y:o,value:s,index:c,totalPoints:d}=e;if(c!==d-1||null==l||null==o)return null;let u=l-4,h=o-12;n[0]!==s?(t=Math.round(s),n[0]=s,n[1]=t):t=n[1];let m=`${t}%`;return n[2]!==u||n[3]!==h||n[4]!==m?(i=(0,r.jsx)("text",{x:u,y:h,textAnchor:"end",className:"fill-ceramic-dimmed text-ceramic-label-4",children:m}),n[2]=u,n[3]=h,n[4]=m,n[5]=i):i=n[5],i};function ed(e){let t,n,l,g,_,S,w,A,L,M,F,$,z,U,Q,K,q,V,G,Y,W,Z,X,J,ee,et,er,ea,ei,ed,ef,ex=(0,a.c)(79),{entityType:ey}=e,{user:ev}=(0,x.useUser)();ex[0]!==ey?(t={entityType:ey},ex[0]=ey,ex[1]=t):t=ex[1];let{interval:eb,ignoreIncompletePeriods:e_,goal:eS,periods:ej,setParams:ew}=(0,B.useOverviewSearchParams)(t),eC=I.RETENTION_CONFIG[eb],[ek,eT]=(0,i.useState)(!1),{isConfigured:eO,hasUsers:eN}=(0,D.useDeploymentStatus)(),{data:eP,dataUpdatedAt:eE,isFetching:eR}=function(e){let t,r,i=(0,a.c)(8),{getToken:n}=(0,f.useAuth)(),{instanceId:l}=(0,c.useTypedParams)();i[0]!==e?(t={entityType:e},i[0]=e,i[1]=t):t=i[1];let{interval:s,periods:d}=(0,B.useOverviewSearchParams)(t);i[2]!==e||i[3]!==n||i[4]!==l||i[5]!==s||i[6]!==d?(r="user"===e?(0,o.userRetentionQuery)(l,{getToken:n,interval:s,periods:d}):(0,o.organizationRetentionQuery)(l,{getToken:n,interval:s,periods:d}),i[2]=e,i[3]=n,i[4]=l,i[5]=s,i[6]=d,i[7]=r):r=i[7];let u=r;return(0,v.useQuery)(u)}(ey),eD=eo[ey];ex[2]!==eC||ex[3]!==eD?(n=eD.descriptionTemplate(eC),ex[2]=eC,ex[3]=eD,ex[4]=n):n=ex[4];let eB=n;ex[5]!==eS?(l=()=>eS,ex[5]=eS,ex[6]=l):l=ex[6];let[eI,eA]=(0,i.useState)(l);ex[7]!==ej?(g=()=>ej,ex[7]=ej,ex[8]=g):g=ex[8];let[eL,eM]=(0,i.useState)(g),[eF,e$]=(0,i.useTransition)();ex[9]!==eS||ex[10]!==ej?(_=()=>{eA(eS),eM(ej),eT(!0)},ex[9]=eS,ex[10]=ej,ex[11]=_):_=ex[11];let ez=_;ex[12]!==ey||ex[13]!==ev?(S=async function(e){if(!ev)return;let t=ev.unsafeMetadata??{},r=t.overviewPreferences||{},a={dateRange:r.dateRange,presetRange:r.presetRange,interval:e.interval??r.interval,userRetention:r.userRetention,organizationRetention:r.organizationRetention};if(void 0!==e.goal||void 0!==e.periods){let t="user"===ey?"userRetention":"organizationRetention",i=r[t]||{};a[t]={...i,...void 0!==e.goal&&{goal:e.goal},...void 0!==e.periods&&{periods:e.periods}}}await ev.update({unsafeMetadata:{...t,overviewPreferences:a}})},ex[12]=ey,ex[13]=ev,ex[14]=S):S=ex[14];let eU=S,eH=(0,j.useReducedMotion)(),eQ=eP?Object.keys(eP.meta).filter(ep).sort(em):[],eK=eP?eQ.filter(e=>eP.meta[e]?.complete===!0):[],eq=ej??3,eV=(e_?eK:eQ).slice(0,eq),eG=eP?.data[eP.data.length-1]?.interval??1;ex[15]!==eS||ex[16]!==eG?(w=e=>null==eS?null:0===e?100:100*Math.pow(eS/100,Math.sqrt(e/eG)),ex[15]=eS,ex[16]=eG,ex[17]=w):w=ex[17];let eY=w,eW=eP?eP.data.map(e=>{let t={interval:e.interval,target:eY(e.interval)};for(let r of eQ)t[r]=e[r];return t}):[],eZ=eW.some(e=>eV.some(t=>"target"!==t&&null!==e[t]&&void 0!==e[t])),eX=eV[0],{currentValue:eJ,isCurrentPeriod:e0,handleChange:e1}=R(eW,{getDefaultValue:()=>{if(!eZ||!eX)return 0;for(let e=eW.length-1;e>=0;e--){let t=eW[e][eX];if("number"==typeof t)return t/100}return 0},getDataPointKey:eh});if(!eP)return null;let e2={};for(let e of eV)e2[e]=eW.reduce((t,r,a)=>null!=r[e]?a:t,-1);let e3=eV.filter(e=>e2[e]>=0&&e2[e]<eW.length-1),e4=(eO||eN)&&!eZ,e6=!(eO||eN),e5=`${eC.adjective} retention`;ex[18]!==ez||ex[19]!==e6?(A=(0,r.jsx)(d.Button,{icon:m.Cog6TeethIcon,variant:"secondary",size:"md",isDisabled:e6,onPress:ez}),ex[18]=ez,ex[19]=e6,ex[20]=A):A=ex[20];let e7=(eO||eN)&&eZ&&(0,r.jsxs)("div",{className:(0,b.cx)("[--line-chart-reference-line-color:var(--ceramic-gray-700)]","[--line-chart-cursor-color:var(--ceramic-gray-1100)]","[--target-color:var(--ceramic-gray-300)]","[--line-chart-active-dot-color:var(--ceramic-purple-700)]","dark:[--target-color:rgba(118,118,132,0.64)]","dark:[--line-chart-active-dot-color:var(--ceramic-purple-400)]",3===eq&&["[--cohort-color-1:var(--ceramic-purple-700)]","[--cohort-color-2:var(--ceramic-purple-300)]","[--cohort-color-3:var(--ceramic-purple-100)]","dark:[--cohort-color-1:var(--ceramic-purple-600)]","dark:[--cohort-color-2:theme(colors.ceramic.purple.600/0.64)]","dark:[--cohort-color-3:theme(colors.ceramic.purple.600/0.40)]"],6===eq&&["[--cohort-color-1:var(--ceramic-purple-700)]","[--cohort-color-2:var(--ceramic-purple-500)]","[--cohort-color-3:var(--ceramic-purple-400)]","[--cohort-color-4:var(--ceramic-purple-300)]","[--cohort-color-5:var(--ceramic-purple-200)]","[--cohort-color-6:var(--ceramic-purple-100)]","dark:[--cohort-color-1:var(--ceramic-purple-600)]","dark:[--cohort-color-2:theme(colors.ceramic.purple.600/0.56)]","dark:[--cohort-color-3:theme(colors.ceramic.purple.600/0.48)]","dark:[--cohort-color-4:theme(colors.ceramic.purple.600/0.40)]","dark:[--cohort-color-5:theme(colors.ceramic.purple.600/0.32)]","dark:[--cohort-color-6:theme(colors.ceramic.purple.600/0.24)]"]),children:[(0,r.jsxs)("div",{className:"relative -mx-0.5 h-[10.25rem] [&_svg]:overflow-visible",children:[(0,r.jsx)("div",{className:"pointer-events-none absolute inset-0 bottom-0.5 mx-[0.3125rem] opacity-40 [mask:linear-gradient(to_bottom,transparent,black)]",children:(0,r.jsx)(s.PixelatedBackground,{})}),(0,r.jsx)(N.ResponsiveContainer,{width:"100%",height:"100%",debounce:300,children:(0,r.jsxs)(k.LineChart,{data:eW,children:[(0,r.jsx)(P.XAxis,{dataKey:"interval",hide:!0}),(0,r.jsx)(E.YAxis,{domain:[0,100],hide:!0}),(0,r.jsx)(O.ReferenceLine,{y:0,stroke:"var(--line-chart-reference-line-color)",className:"translate-y-[0.1875rem]"}),(0,r.jsx)(T.Tooltip,{animationDuration:0,allowEscapeViewBox:{x:!0,y:!0},wrapperStyle:{zIndex:1e3},cursor:{stroke:"var(--line-chart-cursor-color)"},content:e=>{let{active:t,payload:a}=e;return(0,r.jsx)(eg,{active:t??!1,payload:a,meta:eP.meta,intervalLabel:eC.full,cohortKeys:eV,incompleteCohortKeys:e3,onHoverChange:e1})}}),(0,r.jsx)(C.Line,{dataKey:"target",type:"monotone",strokeLinecap:"round",stroke:"var(--target-color)",strokeDasharray:"2 2",dot:!1,activeDot:!1,strokeWidth:1,animationDuration:0,label:e=>(0,r.jsx)(ec,{x:e.x,y:e.y,value:e.value,index:e.index,totalPoints:eW.length})}),[...eV].reverse().map((e,t)=>{let a=eV.length-1-t,n=e2[e]??-1;return(0,r.jsx)(C.Line,{dataKey:e,strokeLinecap:"round",stroke:es(a),dot:t=>{let l=t.index===n&&n>=0,o=n<eW.length-1,s=0!==t.index;return l&&o&&s?(0,r.jsx)("circle",{cx:t.cx,cy:t.cy,r:3,fill:es(a),stroke:"var(--ceramic-white)",strokeWidth:1.5},`${e}-filled-dot-${t.index}`):(0,r.jsx)(i.Fragment,{},`${e}-empty-dot-${t.index}`)},activeDot:0===a&&{r:4,stroke:"var(--line-chart-active-dot-color)",fill:"var(--ceramic-white)",strokeWidth:2},strokeWidth:1.5,type:"monotone",connectNulls:!1,isAnimationActive:!eH},e)})]})})]}),(0,r.jsxs)("div",{className:"mt-1 flex justify-between text-ceramic-label-4 text-ceramic-secondary",children:[(0,r.jsxs)("span",{children:[eC.label,eW[0].interval]}),(0,r.jsxs)("span",{children:[eC.label,eW[eW.length-1].interval]})]})]});ex[21]!==e4?(L=e4&&(0,r.jsx)(el.ReportsLineChartFallback,{fallbackOverlay:"retention"}),ex[21]=e4,ex[22]=L):L=ex[22],ex[23]!==e6?(M=e6&&(0,r.jsx)(el.ReportsLineChartFallback,{fallbackOverlay:"not-configured"}),ex[23]=e6,ex[24]=M):M=ex[24],ex[25]!==e7||ex[26]!==L||ex[27]!==M?(F=(0,r.jsxs)(r.Fragment,{children:[e7,L,M]}),ex[25]=e7,ex[26]=L,ex[27]=M,ex[28]=F):F=ex[28],ex[29]!==H||ex[30]!==eC.subtitle||ex[31]!==eJ||ex[32]!==eE||ex[33]!==eB||ex[34]!==e0||ex[35]!==A||ex[36]!==F||ex[37]!==e5?($=(0,r.jsx)(H,{date:eE,title:e5,description:eB,subtitle:eC.subtitle,showSubtitle:e0,defaultValue:eJ,showPercentage:!0,settingsButtonSlot:A,chart:F}),ex[29]=H,ex[30]=eC.subtitle,ex[31]=eJ,ex[32]=eE,ex[33]=eB,ex[34]=e0,ex[35]=A,ex[36]=F,ex[37]=e5,ex[38]=$):$=ex[38],ex[39]===Symbol.for("react.memo_cache_sentinel")?(z=(0,r.jsx)("h2",{className:"flex items-center gap-1.5 text-ceramic-label-2 text-ceramic-primary",children:"Retention settings"}),ex[39]=z):z=ex[39],ex[40]===Symbol.for("react.memo_cache_sentinel")?(U=()=>eT(eu),ex[40]=U):U=ex[40],ex[41]!==e6?(Q=(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[z,(0,r.jsx)(d.Button,{icon:p.XIcon,variant:"secondary",size:"md",isDisabled:e6,onPress:U})]}),ex[41]=e6,ex[42]=Q):Q=ex[42],ex[43]!==eI?(K=eI?.toString(),ex[43]=eI,ex[44]=K):K=ex[44],ex[45]===Symbol.for("react.memo_cache_sentinel")?(q=e=>{eA(Number(e))},V=(0,r.jsx)(d.Button,{}),ex[45]=q,ex[46]=V):(q=ex[45],V=ex[46]),ex[47]===Symbol.for("react.memo_cache_sentinel")?(G=(0,r.jsx)(u.Popover,{children:(0,r.jsxs)(u.ListBox,{children:[(0,r.jsx)(u.ListBoxItem,{id:"10",children:"10%"}),(0,r.jsx)(u.ListBoxItem,{id:"20",children:"20%"}),(0,r.jsx)(u.ListBoxItem,{id:"30",children:"30%"}),(0,r.jsx)(u.ListBoxItem,{id:"40",children:"40%"}),(0,r.jsx)(u.ListBoxItem,{id:"50",children:"50%"}),(0,r.jsx)(u.ListBoxItem,{id:"60",children:"60%"}),(0,r.jsx)(u.ListBoxItem,{id:"70",children:"70%"}),(0,r.jsx)(u.ListBoxItem,{id:"80",children:"80%"}),(0,r.jsx)(u.ListBoxItem,{id:"90",children:"90%"}),(0,r.jsx)(u.ListBoxItem,{id:"100",children:"100%"})]})}),ex[47]=G):G=ex[47],ex[48]!==K?(Y=(0,r.jsxs)(h.SelectField,{label:"Goal shape",description:"Compare your retention date with a preset goal",placeholder:"Select a goal",selectedKey:K,onSelectionChange:q,children:[V,G]}),ex[48]=K,ex[49]=Y):Y=ex[49],ex[50]!==eL?(W=eL?.toString(),ex[50]=eL,ex[51]=W):W=ex[51],ex[52]===Symbol.for("react.memo_cache_sentinel")?(Z=e=>{eM(Number(e))},X=(0,r.jsx)(d.Button,{}),ex[52]=Z,ex[53]=X):(Z=ex[52],X=ex[53]),ex[54]===Symbol.for("react.memo_cache_sentinel")?(J=(0,r.jsx)(u.Popover,{children:(0,r.jsxs)(u.ListBox,{children:[(0,r.jsx)(u.ListBoxItem,{id:"3",children:"3"}),(0,r.jsx)(u.ListBoxItem,{id:"6",children:"6"})]})}),ex[54]=J):J=ex[54],ex[55]!==W?(ee=(0,r.jsxs)(h.SelectField,{label:"Historical periods",description:"Choose how many historical periods you want to display for comparison",placeholder:"Select a number of periods",selectedKey:W,onSelectionChange:Z,children:[X,J]}),ex[55]=W,ex[56]=ee):ee=ex[56],ex[57]!==Y||ex[58]!==ee?(et=(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[Y,ee]}),ex[57]=Y,ex[58]=ee,ex[59]=et):et=ex[59];let e8=eF||eR;return ex[60]!==ew||ex[61]!==eU||ex[62]!==eI||ex[63]!==eL?(er=()=>{e$(async()=>{try{await ew({goal:eI,periods:eL}),await eU({goal:eI,periods:eL})}catch(e){y.captureException(e,{tags:{section:"cohort-retention-chart-settings"}});return}eT(!1)})},ex[60]=ew,ex[61]=eU,ex[62]=eI,ex[63]=eL,ex[64]=er):er=ex[64],ex[65]!==e8||ex[66]!==er?(ea=(0,r.jsx)(d.Button,{className:"mt-8 w-full justify-center",variant:"primary",pendingAriaLabel:"Loading retention data...",isPending:e8,onPress:er,children:"Update"}),ex[65]=e8,ex[66]=er,ex[67]=ea):ea=ex[67],ex[68]!==et||ex[69]!==ea?(ei=(0,r.jsxs)("div",{className:"mt-6 flex h-full flex-col justify-between",children:[et,ea]}),ex[68]=et,ex[69]=ea,ex[70]=ei):ei=ex[70],ex[71]!==Q||ex[72]!==ei?(ed=(0,r.jsx)("div",{className:"flex h-full min-h-full w-full flex-col rounded-3xl bg-ceramic-gray-50 dark:bg-ceramic-gray-1300 lg:max-w-[23rem]",children:(0,r.jsxs)("div",{className:"flex flex-1 flex-col rounded-xl p-8",children:[Q,ei]})}),ex[71]=Q,ex[72]=ei,ex[73]=ed):ed=ex[73],ex[74]!==en||ex[75]!==ek||ex[76]!==$||ex[77]!==ed?(ef=(0,r.jsx)(en,{isFlipped:ek,front:$,rear:ed}),ex[74]=en,ex[75]=ek,ex[76]=$,ex[77]=ed,ex[78]=ef):ef=ex[78],ef}function eu(e){return!e}function eh(e){return e.interval}function em(e,t){return parseInt(e.replace("cohort_",""))-parseInt(t.replace("cohort_",""))}function ep(e){return e.startsWith("cohort")}function eg(e){let t,n,l,o,s,c,d=(0,a.c)(22),{active:u,payload:h,meta:m,intervalLabel:p,cohortKeys:f,incompleteCohortKeys:x,onHoverChange:y}=e;if(d[0]!==u||d[1]!==f||d[2]!==y||d[3]!==h?(t=()=>{let e;if(!u||!h?.length)return void y(null);let t=h[0]?.payload;for(let t of f){let r=h.find(e=>"string"==typeof e.dataKey&&e.dataKey===t);if("number"==typeof r?.value){e=r.value;break}}y("number"==typeof e?e/100:0,u?t:void 0)},n=[u,h,f,y],d[0]=u,d[1]=f,d[2]=y,d[3]=h,d[4]=t,d[5]=n):(t=d[4],n=d[5]),(0,i.useEffect)(t,n),!u||!h?.length)return null;if(d[6]!==f||d[7]!==m||d[8]!==h){let e;d[10]!==f||d[11]!==m?(e=e=>{var t;let r,a="string"==typeof e.dataKey?e.dataKey:"",i="number"==typeof e.value?e.value:0,n="target"===a,l=f.indexOf(a),o=`${Math.round(i)}%`;return{key:n?m.target?.name||"Target":(t=m[a]?.name||a,isNaN((r=(0,S.parseISO)(t)).getTime())?t:`${(0,_.format)(r,"MMM")} cohort`),color:n?"string"==typeof e.color?e.color:"var(--ceramic-gray-300)":l>=0?es(l):es(0),shape:n?"dashed-line":"line",value:o,sortIndex:n?-1:l>=0?l:-1}},d[10]=f,d[11]=m,d[12]=e):e=d[12],l=h.filter(ex).map(e).sort(ef),d[6]=f,d[7]=m,d[8]=h,d[9]=l}else l=d[9];let v=l,b=h[0],j=b&&"object"==typeof b.payload&&null!==b.payload&&"interval"in b.payload&&"number"==typeof b.payload.interval?b.payload.interval:0;d[13]!==x||d[14]!==h?(o=h?.some(e=>{let t="string"==typeof e.dataKey?e.dataKey:"";return x.includes(t)}),d[13]=x,d[14]=h,d[15]=o):o=d[15];let w=o,C=`${p} ${j}`;return d[16]!==w?(s=w?(0,r.jsxs)("div",{className:"flex max-w-[11.25rem] items-center gap-2 rounded-sm bg-ceramic-gray-50 p-2 ring-1 ring-inset ring-ceramic-gray-700/12 dark:bg-ceramic-gray-1200",children:[(0,r.jsx)(g.InformationCircleIcon,{className:"size-4 text-ceramic-secondary"}),(0,r.jsx)("p",{className:"max-w-[12.5rem] text-pretty text-ceramic-body-4 text-ceramic-secondary",children:"The latest cohort contains incomplete data"})]}):null,d[16]=w,d[17]=s):s=d[17],d[18]!==v||d[19]!==C||d[20]!==s?(c=(0,r.jsx)(Q.ChartTooltip,{label:C,items:v,banner:s}),d[18]=v,d[19]=C,d[20]=s,d[21]=c):c=d[21],c}function ef(e,t){return e.sortIndex-t.sortIndex}function ex(e){return"string"==typeof e.dataKey&&"number"==typeof e.value}function ey(e){let t,i,n,l=(0,a.c)(8),{entityType:o}=e,{interval:s}=(0,B.useOverviewSearchParams)(),c=I.RETENTION_CONFIG[s],d=eo[o];return l[0]!==c||l[1]!==d?(t=e=>{let{resetErrorBoundary:t}=e;return(0,r.jsx)(H,{title:`${c.adjective} retention`,description:d.errorDescription(c),subtitle:c.subtitle,error:!0,chart:(0,r.jsx)(el.ReportsLineChartFallback,{fallbackOverlay:"error",resetErrorBoundary:t})})},l[0]=c,l[1]=d,l[2]=t):t=l[2],l[3]!==o?(i=(0,r.jsx)(ed,{entityType:o}),l[3]=o,l[4]=i):i=l[4],l[5]!==t||l[6]!==i?(n=(0,r.jsx)(w.ErrorBoundary,{fallbackRender:t,children:i}),l[5]=t,l[6]=i,l[7]=n):n=l[7],n}e.s(["CohortRetentionReportChart",()=>ey],751278);var ev=e.i(843752),eb=e.i(861160),e_=e.i(247854),eS=e.i(744444),ej=e.i(109821),ew=e.i(188528),eC=e.i(492239),ek=e.i(933604),eT=e.i(888487),eO=e.i(266066),eN=e.i(829768);let eP=(t=0,()=>(t+=1,`u${`0000${(1679616*Math.random()|0).toString(36)}`.slice(-4)}${t}`));function eE(e){let t=[];for(let r=0,a=e.length;r<a;r++)t.push(e[r]);return t}let eR=null;function eD(e={}){return eR||(eR=e.includeStyleProperties?e.includeStyleProperties:eE(window.getComputedStyle(document.documentElement)))}function eB(e,t){let r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function eI(e,t={}){let r,a,i,n;return{width:t.width||(r=eB(e,"border-left-width"),a=eB(e,"border-right-width"),e.clientWidth+r+a),height:t.height||(i=eB(e,"border-top-width"),n=eB(e,"border-bottom-width"),e.clientHeight+i+n)}}function eA(e){return new Promise((t,r)=>{let a=new Image;a.onload=()=>{a.decode().then(()=>{requestAnimationFrame(()=>t(a))})},a.onerror=r,a.crossOrigin="anonymous",a.decoding="async",a.src=e})}async function eL(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function eM(e,t,r){let a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),n=document.createElementNS(a,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${r}`),i.setAttribute("viewBox",`0 0 ${t} ${r}`),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("externalResourcesRequired","true"),i.appendChild(n),n.appendChild(e),eL(i)}let eF=(e,t)=>{if(e instanceof t)return!0;let r=Object.getPrototypeOf(e);return null!==r&&(r.constructor.name===t.name||eF(r,t))};function e$(e,t,r,a){let i,n,l,o=window.getComputedStyle(e,r),s=o.getPropertyValue("content");if(""===s||"none"===s)return;let c=eP();try{t.className=`${t.className} ${c}`}catch(e){return}let d=document.createElement("style");d.appendChild((i=`.${c}:${r}`,l=o.cssText?(n=o.getPropertyValue("content"),`${o.cssText} content: '${n.replace(/'|"/g,"")}';`):eD(a).map(e=>{let t=o.getPropertyValue(e),r=o.getPropertyPriority(e);return`${e}: ${t}${r?" !important":""};`}).join(" "),document.createTextNode(`${i}{${l}}`))),t.appendChild(d)}let ez="application/font-woff",eU="image/jpeg",eH={woff:ez,woff2:ez,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:eU,jpeg:eU,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function eQ(e){let t;return eH[((t=/\.([^./]*?)$/g.exec(e))?t[1]:"").toLowerCase()]||""}function eK(e){return -1!==e.search(/^(data:)/)}function eq(e,t){return`data:${t};base64,${e}`}async function eV(e,t,r){let a=await fetch(e,t);if(404===a.status)throw Error(`Resource "${a.url}" not found`);let i=await a.blob();return new Promise((e,t)=>{let n=new FileReader;n.onerror=t,n.onloadend=()=>{try{e(r({res:a,result:n.result}))}catch(e){t(e)}},n.readAsDataURL(i)})}let eG={};async function eY(e,t,r){var a,i,n;let l,o,s=(a=e,i=t,n=r.includeQueryParams,o=a.replace(/\?.*/,""),n&&(o=a),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),i?`[${i}]${o}`:o);if(null!=eG[s])return eG[s];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());try{let a=await eV(e,r.fetchRequestInit,({res:e,result:r})=>(t||(t=e.headers.get("Content-Type")||""),r.split(/,/)[1]));l=eq(a,t)}catch(a){l=r.imagePlaceholder||"";let t=`Failed to fetch resource: ${e}`;a&&(t="string"==typeof a?a:a.message),t&&console.warn(t)}return eG[s]=l,l}async function eW(e){let t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):eA(t)}async function eZ(e,t){if(e.currentSrc){let t=document.createElement("canvas"),r=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==r||r.drawImage(e,0,0,t.width,t.height),eA(t.toDataURL())}let r=e.poster,a=eQ(r);return eA(await eY(r,a,t))}async function eX(e,t){var r;try{if(null==(r=null==e?void 0:e.contentDocument)?void 0:r.body)return await e3(e.contentDocument.body,t,!0)}catch(e){}return e.cloneNode(!1)}async function eJ(e,t){return eF(e,HTMLCanvasElement)?eW(e):eF(e,HTMLVideoElement)?eZ(e,t):eF(e,HTMLIFrameElement)?eX(e,t):e.cloneNode(e0(e))}let e0=e=>null!=e.tagName&&"SVG"===e.tagName.toUpperCase();async function e1(e,t,r){var a,i;if(e0(t))return t;let n=[];return 0===(n=null!=e.tagName&&"SLOT"===e.tagName.toUpperCase()&&e.assignedNodes?eE(e.assignedNodes()):eF(e,HTMLIFrameElement)&&(null==(a=e.contentDocument)?void 0:a.body)?eE(e.contentDocument.body.childNodes):eE((null!=(i=e.shadowRoot)?i:e).childNodes)).length||eF(e,HTMLVideoElement)||await n.reduce((e,a)=>e.then(()=>e3(a,r)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()),t}async function e2(e,t){let r=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===r.length)return e;let a={};for(let i=0;i<r.length;i++){let n=r[i].getAttribute("xlink:href");if(n){let r=e.querySelector(n),i=document.querySelector(n);r||!i||a[n]||(a[n]=await e3(i,t,!0))}}let i=Object.values(a);if(i.length){let t="http://www.w3.org/1999/xhtml",r=document.createElementNS(t,"svg");r.setAttribute("xmlns",t),r.style.position="absolute",r.style.width="0",r.style.height="0",r.style.overflow="hidden",r.style.display="none";let a=document.createElementNS(t,"defs");r.appendChild(a);for(let e=0;e<i.length;e++)a.appendChild(i[e]);e.appendChild(r)}return e}async function e3(e,t,r){return r||!t.filter||t.filter(e)?Promise.resolve(e).then(e=>eJ(e,t)).then(r=>e1(e,r,t)).then(r=>(function(e,t,r){if(eF(t,Element)&&(!function(e,t,r){let a=t.style;if(!a)return;let i=window.getComputedStyle(e);i.cssText?(a.cssText=i.cssText,a.transformOrigin=i.transformOrigin):eD(r).forEach(r=>{let n=i.getPropertyValue(r);if("font-size"===r&&n.endsWith("px")){let e=Math.floor(parseFloat(n.substring(0,n.length-2)))-.1;n=`${e}px`}eF(e,HTMLIFrameElement)&&"display"===r&&"inline"===n&&(n="block"),"d"===r&&t.getAttribute("d")&&(n=`path(${t.getAttribute("d")})`),a.setProperty(r,n,i.getPropertyPriority(r))})}(e,t,r),e$(e,t,":before",r),e$(e,t,":after",r),eF(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),eF(e,HTMLInputElement)&&t.setAttribute("value",e.value),eF(e,HTMLSelectElement))){let r=Array.from(t.children).find(t=>e.value===t.getAttribute("value"));r&&r.setAttribute("selected","")}return t})(e,r,t)).then(e=>e2(e,t)):null}let e4=/url\((['"]?)([^'"]+?)\1\)/g,e6=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,e5=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function e7(e,t,r,a,i){try{let n,l,o=r?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;let r=document.implementation.createHTMLDocument(),a=r.createElement("base"),i=r.createElement("a");return r.head.appendChild(a),r.body.appendChild(i),t&&(a.href=t),i.href=e,i.href}(t,r):t,s=eQ(t);if(i){let e=await i(o);n=eq(e,s)}else n=await eY(o,s,a);return e.replace((l=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1"),RegExp(`(url\\(['"]?)(${l})(['"]?\\))`,"g")),`$1${n}$3`)}catch(e){}return e}function e8(e){return -1!==e.search(e4)}async function e9(e,t,r){let a;if(!e8(e))return e;let i=function(e,{preferredFontFormat:t}){return t?e.replace(e5,e=>{for(;;){let[r,,a]=e6.exec(e)||[];if(!a)return"";if(a===t)return`src: ${r};`}}):e}(e,r);return(a=[],i.replace(e4,(e,t,r)=>(a.push(r),e)),a.filter(e=>!eK(e))).reduce((e,a)=>e.then(e=>e7(e,a,t,r)),Promise.resolve(i))}async function te(e,t,r){var a;let i=null==(a=t.style)?void 0:a.getPropertyValue(e);if(i){let a=await e9(i,null,r);return t.style.setProperty(e,a,t.style.getPropertyPriority(e)),!0}return!1}async function tt(e,t){await te("background",e,t)||await te("background-image",e,t),await te("mask",e,t)||await te("-webkit-mask",e,t)||await te("mask-image",e,t)||await te("-webkit-mask-image",e,t)}async function tr(e,t){let r=eF(e,HTMLImageElement);if(!(r&&!eK(e.src))&&!(eF(e,SVGImageElement)&&!eK(e.href.baseVal)))return;let a=r?e.src:e.href.baseVal,i=await eY(a,eQ(a),t);await new Promise((a,n)=>{e.onload=a,e.onerror=t.onImageErrorHandler?(...e)=>{try{a(t.onImageErrorHandler(...e))}catch(e){n(e)}}:n,e.decode&&(e.decode=a),"lazy"===e.loading&&(e.loading="eager"),r?(e.srcset="",e.src=i):e.href.baseVal=i})}async function ta(e,t){let r=eE(e.childNodes).map(e=>ti(e,t));await Promise.all(r).then(()=>e)}async function ti(e,t){eF(e,Element)&&(await tt(e,t),await tr(e,t),await ta(e,t))}let tn={};async function tl(e){let t=tn[e];if(null!=t)return t;let r=await fetch(e);return t={url:e,cssText:await r.text()},tn[e]=t,t}async function to(e,t){let r=e.cssText,a=/url\(["']?([^"')]+)["']?\)/g;return Promise.all((r.match(/url\([^)]+\)/g)||[]).map(async i=>{let n=i.replace(a,"$1");return n.startsWith("https://")||(n=new URL(n,e.url).href),eV(n,t.fetchRequestInit,({result:e})=>(r=r.replace(i,`url(${e})`),[i,e]))})).then(()=>r)}function ts(e){if(null==e)return[];let t=[],r=e.replace(/(\/\*[\s\S]*?\*\/)/gi,""),a=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){let e=a.exec(r);if(null===e)break;t.push(e[0])}r=r.replace(a,"");let i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,n=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=i.exec(r);if(null===e){if(null===(e=n.exec(r)))break;i.lastIndex=n.lastIndex}else n.lastIndex=i.lastIndex;t.push(e[0])}return t}async function tc(e,t){let r=[],a=[];return e.forEach(r=>{if("cssRules"in r)try{eE(r.cssRules||[]).forEach((e,i)=>{if(e.type===CSSRule.IMPORT_RULE){let n=i+1,l=e.href,o=tl(l).then(e=>to(e,t)).then(e=>ts(e).forEach(e=>{try{r.insertRule(e,e.startsWith("@import")?n+=1:r.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule:e,error:t})}})).catch(e=>{console.error("Error loading remote css",e.toString())});a.push(o)}})}catch(n){let i=e.find(e=>null==e.href)||document.styleSheets[0];null!=r.href&&a.push(tl(r.href).then(e=>to(e,t)).then(e=>ts(e).forEach(e=>{i.insertRule(e,i.cssRules.length)})).catch(e=>{console.error("Error loading remote stylesheet",e)})),console.error("Error inlining remote css file",n)}}),Promise.all(a).then(()=>(e.forEach(e=>{if("cssRules"in e)try{eE(e.cssRules||[]).forEach(e=>{r.push(e)})}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}}),r))}async function td(e,t){if(null==e.ownerDocument)throw Error("Provided element is not within a Document");let r=eE(e.ownerDocument.styleSheets);return(await tc(r,t)).filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>e8(e.style.getPropertyValue("src")))}function tu(e){return e.trim().replace(/["']/g,"")}async function th(e,t){let r,a=await td(e,t),i=(r=new Set,!function e(t){(t.style.fontFamily||getComputedStyle(t).fontFamily).split(",").forEach(e=>{r.add(tu(e))}),Array.from(t.children).forEach(t=>{t instanceof HTMLElement&&e(t)})}(e),r);return(await Promise.all(a.filter(e=>i.has(tu(e.style.fontFamily))).map(e=>{let r=e.parentStyleSheet?e.parentStyleSheet.href:null;return e9(e.cssText,r,t)}))).join("\n")}async function tm(e,t){let r=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await th(e,t);if(r){let t=document.createElement("style"),a=document.createTextNode(r);t.appendChild(a),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function tp(e,t={}){let{width:r,height:a}=eI(e,t),i=await e3(e,t,!0);return await tm(i,t),await ti(i,t),!function(e,t){let{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);let a=t.style;null!=a&&Object.keys(a).forEach(e=>{r[e]=a[e]})}(i,t),await eM(i,r,a)}async function tg(e,t={}){let{width:r,height:a}=eI(e,t),i=await tp(e,t),n=await eA(i),l=document.createElement("canvas"),o=l.getContext("2d"),s=t.pixelRatio||function(){let e,t;try{t=eN.default}catch(e){}let r=t&&t.env?t.env.devicePixelRatio:null;return r&&Number.isNaN(e=parseInt(r,10))&&(e=1),e||window.devicePixelRatio||1}(),c=t.canvasWidth||r,d=t.canvasHeight||a;return l.width=c*s,l.height=d*s,!t.skipAutoScale&&(l.width>16384||l.height>16384)&&(l.width>16384&&l.height>16384?l.width>l.height?(l.height*=16384/l.width,l.width=16384):(l.width*=16384/l.height,l.height=16384):l.width>16384?(l.height*=16384/l.width,l.width=16384):(l.width*=16384/l.height,l.height=16384)),l.style.width=`${c}`,l.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,l.width,l.height)),o.drawImage(n,0,0,l.width,l.height),l}var tf=e.i(91381);function tx(e){let t,i,n,l,o,s=(0,a.c)(6);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("ellipse",{cx:"7.889",cy:"7",rx:"2.187",ry:"2.188",fill:"currentColor"}),i=(0,r.jsx)("path",{d:"M11.83 12.18a.415.415 0 0 1-.05.64A6.967 6.967 0 0 1 7.888 14a6.967 6.967 0 0 1-3.891-1.18.415.415 0 0 1-.051-.64l1.598-1.6a.473.473 0 0 1 .55-.074 3.92 3.92 0 0 0 1.794.431 3.92 3.92 0 0 0 1.792-.43.473.473 0 0 1 .551.074l1.599 1.598Z",fill:"currentColor"}),n=(0,r.jsx)("path",{opacity:"0.5",d:"M11.78 1.18a.415.415 0 0 1 .05.64l-1.598 1.6a.473.473 0 0 1-.55.073 3.937 3.937 0 0 0-5.3 5.3.473.473 0 0 1-.074.55L2.71 10.942a.415.415 0 0 1-.641-.051 7 7 0 0 1 9.71-9.71Z",fill:"currentColor"}),l=(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.748 1.422c0-.06.05-.11.11-.11h1.64c.06 0 .11.05.11.11v11.156a.11.11 0 0 1-.11.11h-1.64a.11.11 0 0 1-.11-.11V1.422Zm-2.315 8.9a.112.112 0 0 0-.15.004 2.88 2.88 0 0 1-.884.569c-.36.148-.747.222-1.137.219-.33.01-.658-.047-.965-.166a2.422 2.422 0 0 1-.817-.527c-.424-.432-.668-1.05-.668-1.785 0-1.473.98-2.48 2.45-2.48.394-.005.785.074 1.144.234.325.144.617.35.86.607.04.044.11.049.155.01l1.108-.959a.107.107 0 0 0 .01-.152c-.832-.93-2.138-1.412-3.379-1.412-2.499 0-4.27 1.686-4.27 4.166 0 1.227.44 2.26 1.182 2.99.743.728 1.801 1.157 3.022 1.157 1.53 0 2.763-.587 3.485-1.34a.107.107 0 0 0-.009-.155l-1.137-.98Zm13.212-1.14a.108.108 0 0 1-.107.096H28.79a.106.106 0 0 0-.104.132c.286 1.06 1.138 1.701 2.302 1.701a2.59 2.59 0 0 0 1.136-.236 2.55 2.55 0 0 0 .862-.645.08.08 0 0 1 .112-.01l1.155 1.006c.044.039.05.105.013.15-.698.823-1.828 1.42-3.38 1.42-2.386 0-4.185-1.651-4.185-4.162 0-1.232.424-2.264 1.13-2.994.373-.375.82-.67 1.314-.87a3.968 3.968 0 0 1 1.557-.285c2.419 0 3.983 1.701 3.983 4.05a6.737 6.737 0 0 1-.04.647Zm-5.924-1.524a.104.104 0 0 0 .103.133h3.821c.07 0 .123-.066.103-.134-.26-.901-.921-1.503-1.947-1.503a2.13 2.13 0 0 0-.88.16 2.1 2.1 0 0 0-.733.507 2.242 2.242 0 0 0-.467.837Zm11.651-3.172c.061-.001.11.048.11.109v1.837a.11.11 0 0 1-.117.109 7.17 7.17 0 0 0-.455-.024c-1.43 0-2.27 1.007-2.27 2.329v3.732a.11.11 0 0 1-.11.11h-1.64a.11.11 0 0 1-.11-.11v-7.87c0-.06.049-.109.11-.109h1.64c.06 0 .11.05.11.11v1.104a.011.011 0 0 0 .02.007c.64-.857 1.587-1.333 2.587-1.333l.125-.001Zm4.444 4.81a.035.035 0 0 1 .056.006l2.075 3.334a.11.11 0 0 0 .093.052h1.865a.11.11 0 0 0 .093-.168L46.152 7.93a.11.11 0 0 1 .012-.131l2.742-3.026a.11.11 0 0 0-.081-.183h-1.946a.11.11 0 0 0-.08.036l-3.173 3.458a.11.11 0 0 1-.19-.074V1.422a.11.11 0 0 0-.11-.11h-1.64a.11.11 0 0 0-.11.11v11.156c0 .06.05.11.11.11h1.64a.11.11 0 0 0 .11-.11v-1.755a.11.11 0 0 1 .03-.075l1.35-1.452Z",fill:"currentColor"}),s[0]=t,s[1]=i,s[2]=n,s[3]=l):(t=s[0],i=s[1],n=s[2],l=s[3]),s[4]!==e?(o=(0,r.jsxs)("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 14",...e,children:[t,i,n,l]}),s[4]=e,s[5]=o):o=s[5],o}function ty(e){let t,i,n,l,o,s,c,d=(0,a.c)(11);return d[0]!==e?({style:i,...t}=e,d[0]=e,d[1]=t,d[2]=i):(t=d[1],i=d[2]),d[3]!==i?(n={display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:"#6B6F76",...i},d[3]=i,d[4]=n):n=d[4],d[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,r.jsx)("span",{children:"Secured by"}),d[5]=l):l=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(o={display:"flex",alignItems:"center",color:"inherit",textDecoration:"none"},d[6]=o):o=d[6],d[7]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.jsx)("a",{href:"https://www.clerk.com?utm_source=clerk&utm_medium=chart_export",target:"_blank",rel:"noopener noreferrer",style:o,children:(0,r.jsx)(tx,{style:{height:"14px",width:"auto"}})}),d[7]=s):s=d[7],d[8]!==t||d[9]!==n?(c=(0,r.jsxs)("div",{...t,style:n,children:[l,s]}),d[8]=t,d[9]=n,d[10]=c):c=d[10],c}function tv(){let e,t,i=(0,a.c)(2);return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)("radialGradient",{id:"export-gradient",cx:"50%",cy:"50%",r:"100%",children:[(0,r.jsx)("stop",{offset:"6.16%",stopColor:"#C084FC"}),(0,r.jsx)("stop",{offset:"29.62%",stopColor:"#A78BFA"}),(0,r.jsx)("stop",{offset:"53.08%",stopColor:"#9061F9"}),(0,r.jsx)("stop",{offset:"76.54%",stopColor:"#7C3AED"}),(0,r.jsx)("stop",{offset:"100%",stopColor:"#6B21A8"})]}),i[0]=e):e=i[0],i[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)("div",{className:"relative size-full",children:(0,r.jsxs)("svg",{width:"100%",height:"100%",className:"absolute inset-0",preserveAspectRatio:"xMidYMid slice",children:[(0,r.jsxs)("defs",{children:[e,(0,r.jsxs)("pattern",{id:"export-pattern",patternUnits:"userSpaceOnUse",width:"18",height:"18",children:[(0,r.jsx)("rect",{width:"1",height:"1",x:"0",y:"0",fill:"url(#export-gradient)",fillOpacity:"0.3"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"3",y:"0",fill:"url(#export-gradient)",fillOpacity:"0.7"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"6",y:"0",fill:"url(#export-gradient)",fillOpacity:"0.2"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"9",y:"0",fill:"url(#export-gradient)",fillOpacity:"0.5"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"12",y:"0",fill:"url(#export-gradient)",fillOpacity:"0.8"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"15",y:"0",fill:"url(#export-gradient)",fillOpacity:"0.4"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"0",y:"3",fill:"url(#export-gradient)",fillOpacity:"0.6"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"3",y:"3",fill:"url(#export-gradient)",fillOpacity:"0.2"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"6",y:"3",fill:"url(#export-gradient)",fillOpacity:"0.9"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"9",y:"3",fill:"url(#export-gradient)",fillOpacity:"0.3"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"12",y:"3",fill:"url(#export-gradient)",fillOpacity:"0.5"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"15",y:"3",fill:"url(#export-gradient)",fillOpacity:"0.7"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"0",y:"6",fill:"url(#export-gradient)",fillOpacity:"0.4"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"3",y:"6",fill:"url(#export-gradient)",fillOpacity:"0.8"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"6",y:"6",fill:"url(#export-gradient)",fillOpacity:"0.3"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"9",y:"6",fill:"url(#export-gradient)",fillOpacity:"0.6"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"12",y:"6",fill:"url(#export-gradient)",fillOpacity:"0.2"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"15",y:"6",fill:"url(#export-gradient)",fillOpacity:"0.5"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"0",y:"9",fill:"url(#export-gradient)",fillOpacity:"0.7"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"3",y:"9",fill:"url(#export-gradient)",fillOpacity:"0.3"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"6",y:"9",fill:"url(#export-gradient)",fillOpacity:"0.5"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"9",y:"9",fill:"url(#export-gradient)",fillOpacity:"0.8"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"12",y:"9",fill:"url(#export-gradient)",fillOpacity:"0.4"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"15",y:"9",fill:"url(#export-gradient)",fillOpacity:"0.2"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"0",y:"12",fill:"url(#export-gradient)",fillOpacity:"0.2"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"3",y:"12",fill:"url(#export-gradient)",fillOpacity:"0.6"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"6",y:"12",fill:"url(#export-gradient)",fillOpacity:"0.4"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"9",y:"12",fill:"url(#export-gradient)",fillOpacity:"0.7"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"12",y:"12",fill:"url(#export-gradient)",fillOpacity:"0.3"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"15",y:"12",fill:"url(#export-gradient)",fillOpacity:"0.8"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"0",y:"15",fill:"url(#export-gradient)",fillOpacity:"0.5"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"3",y:"15",fill:"url(#export-gradient)",fillOpacity:"0.4"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"6",y:"15",fill:"url(#export-gradient)",fillOpacity:"0.7"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"9",y:"15",fill:"url(#export-gradient)",fillOpacity:"0.2"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"12",y:"15",fill:"url(#export-gradient)",fillOpacity:"0.6"}),(0,r.jsx)("rect",{width:"1",height:"1",x:"15",y:"15",fill:"url(#export-gradient)",fillOpacity:"0.3"})]})]}),(0,r.jsx)("rect",{width:"100%",height:"100%",fill:"url(#export-pattern)"})]})}),i[1]=t):t=i[1],t}var tb=e.i(536977);e.i(946202);var t_=e.i(215314),tS=e.i(516467);function tj(e,t){return(0,tS.toDate)(e,t?.in).getFullYear()}var tw=e.i(625248);function tC(e){let t,i,n,l,o,c,d,u,h,m,p,g,f,x,y,v,_,S,w,P,R=(0,a.c)(53),{chartData:D,gradientId:A,onChange:L,showYAxis:M,height:F,width:$,disableTooltip:z,isExport:U}=e,H=void 0===F?164:F,Q=void 0===$?"100%":$,K=void 0!==z&&z,q=void 0!==U&&U,V=(0,j.useReducedMotion)();R[0]!==D?(t=Math.max(...D.map(tk)),R[0]=D,R[1]=t):t=R[1];let G=(e=>{if(0===e)return 0;let t=1.1*e;return t<=5?10:t<=1e3?5*Math.ceil(t/5):t<=1e4?100*Math.ceil(t/100):t<=1e5?1e3*Math.ceil(t/1e3):t<=1e6?1e4*Math.ceil(t/1e4):1e5*Math.ceil(t/1e5)})(t),Y=G>0;q&&(H=245,Q=716,K=!0);let{interval:W}=(0,B.useOverviewSearchParams)();R[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,b.cx)("-mx-0.5","[--chart-line-color:var(--ceramic-purple-700)] dark:[--chart-line-color:var(--ceramic-purple-600)]","[--line-chart-cursor-color:var(--ceramic-gray-400)]","[--line-chart-reference-line-color:var(--ceramic-gray-700)]"),R[2]=i):i=R[2],R[3]!==q?(n=(0,r.jsx)("div",{className:"pointer-events-none absolute inset-0 bottom-0.5 mx-1 opacity-40 [mask:linear-gradient(to_bottom,transparent,black)]",children:q?(0,r.jsx)(tv,{}):(0,r.jsx)(s.PixelatedBackground,{})}),R[3]=q,R[4]=n):n=R[4];let Z=Y&&M&&(0,r.jsx)("div",{className:"absolute -top-[0.4375rem] isolate z-1 w-fit bg-ceramic-main p-1 text-ceramic-label-5 text-ceramic-dimmed",children:I.tickFormatter.format(G)});R[5]===Symbol.for("react.memo_cache_sentinel")?(l={top:4,bottom:4,left:4,right:4},R[5]=l):l=R[5],R[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)("stop",{offset:"0%",stopColor:"var(--chart-line-color)",stopOpacity:0}),c=(0,r.jsx)("stop",{offset:"5%",stopColor:"var(--chart-line-color)",stopOpacity:1}),d=(0,r.jsx)("stop",{offset:"100%",stopColor:"var(--chart-line-color)",stopOpacity:1}),R[6]=o,R[7]=c,R[8]=d):(o=R[6],c=R[7],d=R[8]),R[9]!==A?(u=(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:A,x1:"0",y1:"0",x2:"1",y2:"0",children:[o,c,d]})}),R[9]=A,R[10]=u):u=R[10],R[11]!==K||R[12]!==L||R[13]!==M?(h=M||!K&&(0,r.jsx)(T.Tooltip,{offset:10,cursor:{stroke:"var(--line-chart-cursor-color)",strokeWidth:.5},animationDuration:0,content:e=>{let{active:t,payload:a}=e;return(0,r.jsx)(tT,{active:t,payload:a,onChange:L})}}),R[11]=K,R[12]=L,R[13]=M,R[14]=h):h=R[14],R[15]!==G||R[16]!==Y||R[17]!==M?(m=M&&(0,r.jsx)(E.YAxis,{domain:[0,Y?G:10],interval:"preserveEnd",hide:!0}),R[15]=G,R[16]=Y,R[17]=M,R[18]=m):m=R[18],R[19]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)(O.ReferenceLine,{y:0,strokeWidth:1,stroke:"var(--line-chart-reference-line-color)",className:"translate-y-[0.1875rem]"}),R[19]=p):p=R[19],R[20]!==G||R[21]!==Y||R[22]!==M?(g=Y&&M&&(0,r.jsx)(O.ReferenceLine,{y:G,strokeWidth:1,strokeDasharray:"1 2",stroke:"var(--line-chart-reference-line-color)"}),R[20]=G,R[21]=Y,R[22]=M,R[23]=g):g=R[23],R[24]!==D.length?(f=!(D.length>1)&&{r:3.5,stroke:"none",fill:"var(--chart-line-color)",strokeWidth:0},R[24]=D.length,R[25]=f):f=R[25];let X=`url(#${A})`;R[26]===Symbol.for("react.memo_cache_sentinel")?(x={r:3.5,stroke:"none",fill:"var(--chart-line-color)",strokeWidth:0},R[26]=x):x=R[26];let J=!V;return R[27]!==f||R[28]!==X||R[29]!==J?(y=(0,r.jsx)(C.Line,{type:"monotone",dot:f,dataKey:"users",strokeWidth:1.5,stroke:X,activeDot:x,isAnimationActive:J}),R[27]=f,R[28]=X,R[29]=J,R[30]=y):y=R[30],R[31]!==D||R[32]!==u||R[33]!==h||R[34]!==m||R[35]!==g||R[36]!==y?(v=(0,r.jsxs)(k.LineChart,{data:D,margin:l,accessibilityLayer:!0,children:[u,h,m,p,g,y]}),R[31]=D,R[32]=u,R[33]=h,R[34]=m,R[35]=g,R[36]=y,R[37]=v):v=R[37],R[38]!==H||R[39]!==v||R[40]!==Q?(_=(0,r.jsx)(N.ResponsiveContainer,{debounce:300,width:Q,height:H,children:v}),R[38]=H,R[39]=v,R[40]=Q,R[41]=_):_=R[41],R[42]!==_||R[43]!==n||R[44]!==Z?(S=(0,r.jsxs)("div",{className:"relative",children:[n,Z,_]}),R[42]=_,R[43]=n,R[44]=Z,R[45]=S):S=R[45],R[46]!==D||R[47]!==W?(w=D.length>1&&(0,r.jsxs)("div",{className:"mt-1 flex w-full items-center justify-between px-1 text-ceramic-label-4 text-ceramic-secondary",children:[(0,r.jsx)("span",{children:(0,tw.formatXAxis)(D[0].start_date,W,new t_.UTCDate(D[0].start_date).getFullYear()<new t_.UTCDate().getFullYear())}),(0,r.jsx)("span",{children:(0,tw.formatXAxis)(D[D.length-1].start_date,W)})]}),R[46]=D,R[47]=W,R[48]=w):w=R[48],R[49]!==S||R[50]!==w||R[51]!==i?(P=(0,r.jsxs)("div",{className:i,children:[S,w]}),R[49]=S,R[50]=w,R[51]=i,R[52]=P):P=R[52],P}function tk(e){return e.users}function tT(e){let t,n,l,o=(0,a.c)(12),{active:s,payload:c,onChange:d}=e,{interval:u}=(0,B.useOverviewSearchParams)();if(o[0]!==s||o[1]!==d||o[2]!==c?.[0]?.payload?(t=()=>{let e=c?.[0]?.payload,t=e?.users??null;d&&d(s?t:null,s?e:void 0)},o[0]=s,o[1]=d,o[2]=c?.[0]?.payload,o[3]=t):t=o[3],o[4]!==s||o[5]!==d||o[6]!==c?(n=[s,c,d],o[4]=s,o[5]=d,o[6]=c,o[7]=n):n=o[7],(0,i.useEffect)(t,n),o[8]!==s||o[9]!==u||o[10]!==c){let e=new t_.UTCDate(c?.[0]?.payload.start_date),t=new t_.UTCDate(c?.[0]?.payload.end_date),a=tj(e),i=tj(t);l=s&&c&&c.length?(0,r.jsx)(Q.ChartTooltip,{label:c[0].payload.start_date&&c[0].payload.end_date?"day"===u?(0,tb.formatDate)(e,{month:"long",day:"ordinal"}):`${(0,tb.formatDate)(e,{day:"ordinal",year:a!==i})} - ${(0,tb.formatDate)(t,{day:"ordinal",year:!0})}`:"No date information",items:void 0}):null,o[8]=s,o[9]=u,o[10]=c,o[11]=l}else l=o[11];return l}function tO(e){let t,i,n=(0,a.c)(6),{chartTitle:l,chartData:o,gradientId:s,ignoreIncompletePeriods:c}=e,u=void 0!==c&&c,{isStaffMode:h}=(0,eb.useStaffContext)();return h?(n[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(d.Button,{icon:eO.ExportIcon}),n[0]=t):t=n[0],n[1]!==o||n[2]!==l||n[3]!==s||n[4]!==u?(i=(0,r.jsxs)(ej.DialogTrigger,{children:[t,(0,r.jsx)(tP,{chartTitle:l,chartData:o,gradientId:s,ignoreIncompletePeriods:u})]}),n[1]=o,n[2]=l,n[3]=s,n[4]=u,n[5]=i):i=n[5],i):null}function tN(e){if(e.length<2)return null;let t=e[0],r=e[e.length-1];return 0===t.users?null:Math.ceil((r.users-t.users)/t.users*100)}function tP({chartTitle:e,chartData:t,gradientId:a,ignoreIncompletePeriods:n=!1}){let[l,o]=(0,i.useState)(!0),[s,c]=(0,i.useState)(!0),[u,h]=(0,i.useState)(!1),[m,p]=(0,i.useState)(!1),f=(0,i.useRef)(null),x=async e=>{try{if(!navigator.clipboard?.write)return!1;let t=await fetch(e),r=await t.blob(),a="image/png"===r.type?r:await y(r),i=new ClipboardItem({[a.type]:new Promise(e=>e(a))});return await navigator.clipboard.write([i]),!0}catch(e){return!1}},y=async e=>new Promise(t=>{let r=document.createElement("img"),a=document.createElement("canvas"),i=a.getContext("2d");r.onload=()=>{a.width=r.width,a.height=r.height,i?.drawImage(r,0,0),a.toBlob(r=>{t(r||e)},"image/png"),URL.revokeObjectURL(r.src)},r.onerror=()=>{t(e)},r.src=URL.createObjectURL(e)}),v=async e=>{let t,r,a,i,n=(t=e.cloneNode(!0),r=e.querySelectorAll("*"),a=t.querySelectorAll("*"),Array.from(i=window.getComputedStyle(e)).forEach(e=>{t.style.setProperty(e,i.getPropertyValue(e),i.getPropertyPriority(e))}),r.forEach((e,t)=>{let r=a[t],i=window.getComputedStyle(e);Array.from(i).forEach(e=>{r.style.setProperty(e,i.getPropertyValue(e),i.getPropertyPriority(e))}),e instanceof SVGElement&&(r.setAttribute("fill",i.fill),r.setAttribute("stroke",i.stroke))}),t),l=e.getBoundingClientRect();n.style.width=`${l.width}px`,n.style.height=`${l.height}px`;let o=e.parentElement;if(!o)throw Error("Element has no parent");o.replaceChild(n,e);try{return(await tg(n,{pixelRatio:2.1333,cacheBust:!0})).toDataURL("image/png")}finally{o.replaceChild(e,n)}},_=async()=>{if(f.current){h(!0),p(!1);try{let e=await v(f.current);await x(e)?(p(!0),setTimeout(()=>p(!1),2e3)):(console.warn("Copy failed - clipboard API might not be available"),alert("Unable to copy to clipboard. Please use the Download button instead."))}catch(e){console.error("Error during copy:",e)}finally{h(!1)}}},S=async()=>{if(!f.current)return;let t=await v(f.current),r=`${e.toLowerCase().replace(/\s+/g,"-")}.png`,a=document.createElement("a");a.download=r,a.href=t,a.click()};return(0,r.jsxs)(ej.Dialog,{size:"lg",children:[(0,r.jsxs)(ej.DialogContent,{children:[(0,r.jsx)(ej.DialogHeader,{title:`Export ${e.toLowerCase()}`,description:"Create a shareable image for this report"}),(0,r.jsxs)(ej.DialogSection,{className:"divide-ceramic-bg-seperator grid grid-cols-[18.3125rem_1fr] divide-x p-0",children:[(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsx)("h3",{className:"mb-3 text-ceramic-label-2 text-ceramic-primary",children:"Options"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(eS.CheckboxField,{value:"show-y-axis",isSelected:l,onChange:o,label:"Y-axis"}),(0,r.jsx)(eS.CheckboxField,{value:"show-growth-rate",isSelected:s,onChange:c,label:"Growth rate"})]})]}),(0,r.jsxs)("div",{className:"bg-ceramic-white px-9 py-8 dark:bg-ceramic-gray-1400",children:[(0,r.jsx)(tE,{chartTitle:e,growthRate:tN(t)||0,hideGrowthRate:!s}),(0,r.jsx)("div",{className:(0,b.cx)("mt-4 flex-1 rounded-md bg-ceramic-white p-8 pb-[2.375rem] dark:bg-ceramic-gray-1400","[filter:drop-shadow(0_5px_15px_theme(colors.ceramic.black/0.08))_drop-shadow(0_0_1px_rgba(25,28,33,0.04))_drop-shadow(0_1px_2px_rgba(25,28,33,0.06))_drop-shadow(0_1px_2px_rgba(25,28,33,0.06))_drop-shadow(0_0_2px_theme(colors.ceramic.black/0.08))]"),children:(0,r.jsx)(tC,{chartData:t,gradientId:a,showYAxis:l,height:243,disableTooltip:!0})}),(0,r.jsx)("div",{className:"mt-4 grid place-items-center",children:(0,r.jsx)(ty,{})})]}),(0,r.jsx)("div",{className:"absolute left-full",children:(0,r.jsxs)("div",{className:"bg-ceramic-white px-9 py-8 dark:bg-ceramic-gray-1400",ref:f,children:[(0,r.jsx)(tE,{chartTitle:e,growthRate:tN(t)||0,hideGrowthRate:!s}),(0,r.jsx)("div",{className:(0,b.cx)("mt-4 flex-1 rounded-md bg-ceramic-white p-8 pb-[2.375rem] dark:bg-ceramic-gray-1400","[filter:drop-shadow(0_5px_15px_theme(colors.ceramic.black/0.08))_drop-shadow(0_0_1px_rgba(25,28,33,0.04))_drop-shadow(0_1px_2px_rgba(25,28,33,0.06))_drop-shadow(0_1px_2px_rgba(25,28,33,0.06))_drop-shadow(0_0_2px_theme(colors.ceramic.black/0.08))]"),children:(0,r.jsx)(tC,{chartData:t,gradientId:a,showYAxis:l,height:245,width:716,disableTooltip:!0,isExport:!0})}),(0,r.jsx)("div",{className:"mt-4 grid place-items-center",children:(0,r.jsx)(ty,{})})]})})]}),n&&(0,r.jsx)(ej.DialogNotice,{variant:"info",icon:g.InformationCircleIcon,children:"The export will not include incomplete periods"})]}),(0,r.jsx)(ej.DialogFooter,{button:(0,r.jsx)(d.Button,{icon:eT.DownloadIcon,iconPosition:"start",onPress:S,children:"Download PNG"}),secondaryButton:(0,r.jsx)(d.Button,{onPress:_,isDisabled:u,icon:ek.ClipboardIcon,iconPosition:"start",children:m?"Copied!":u?"Copying...":"Copy PNG"}),tertiaryButton:(0,r.jsx)(d.Button,{slot:"close",children:"Cancel"})})]})}function tE(e){let t,i,n,l,o=(0,a.c)(15),{chartTitle:s,growthRate:c,hideGrowthRate:d}=e,{logo_image_url:u}=(0,ev.useCurrentApplication)();if(c>0){let e,a=`${c}%`;o[0]!==a?(e=(0,r.jsx)(e_.Badge,{variant:"positive",emphasis:"low",icon:eC.ArrowRightTopIcon,iconPosition:"end",children:a}),o[0]=a,o[1]=e):e=o[1],t=e}else if(c<0){let e,a;o[2]!==c?(e=Math.abs(c),o[2]=c,o[3]=e):e=o[3];let i=`${e}%`;o[4]!==i?(a=(0,r.jsx)(e_.Badge,{variant:"negative",emphasis:"low",icon:ew.ArrowRightBottomIcon,iconPosition:"end",children:i}),o[4]=i,o[5]=a):a=o[5],t=a}else{let e;o[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)(e_.Badge,{variant:"secondary",emphasis:"low",children:"0%"}),o[6]=e):e=o[6],t=e}o[7]!==u?(i=u&&(0,r.jsx)(tf.default,{src:u,alt:"Application Icon",width:24,height:24,className:"size-6 rounded-lg object-contain"}),o[7]=u,o[8]=i):i=o[8],o[9]!==s?(n=(0,r.jsx)("h4",{className:"flex-1 text-ceramic-heading-5 text-ceramic-primary",children:s}),o[9]=s,o[10]=n):n=o[10];let h=!d&&t;return o[11]!==i||o[12]!==n||o[13]!==h?(l=(0,r.jsxs)("div",{className:"flex items-center gap-3 px-1",children:[i,n,h]}),o[11]=i,o[12]=n,o[13]=h,o[14]=l):l=o[14],l}e.s(["LineChartReport",()=>tC],579611),e.s(["ExportChartDialogTrigger",()=>tO],847118)},636491,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(868921),i=e.i(751278),n=e.i(784931),l=e.i(787802),o=e.i(886527),s=e.i(412939),c=e.i(685262),d=e.i(758040),u=e.i(364890),h=e.i(683471),m=e.i(915279),p=e.i(27968),g=e.i(847118),f=e.i(579611),x=e.i(928041),y=e.i(144373),v=e.i(870716);function b(e){let a,i,l,m,b,w,C,k=(0,r.c)(28),{interval:T,title:O,description:N,subtitle:P}=e,{getToken:E}=(0,d.useAuth)(),{instanceId:R}=(0,s.useTypedParams)(),D=(0,h.usePathname)(),{ignoreIncompletePeriods:B}=(0,n.useOverviewSearchParams)();k[0]!==E||k[1]!==R||k[2]!==T?(a=(0,o.cumulativeOrganizationSignUpsQuery)(R,{getToken:E,interval:T}),k[0]=E,k[1]=R,k[2]=T,k[3]=a):a=k[3];let{data:I,dataUpdatedAt:A}=(0,u.useSuspenseQuery)(a);k[4]!==I?(i=I.map(j),k[4]=I,k[5]=i):i=k[5];let L=i;k[6]===Symbol.for("react.memo_cache_sentinel")?(l={getDefaultValue:S,getDataPointKey:_},k[6]=l):l=k[6];let{currentValue:M,isCurrentPeriod:F,handleChange:$}=(0,y.useChartPeriodState)(L,l),{isConfigured:z,hasUsers:U}=(0,v.useDeploymentStatus)();k[7]!==L||k[8]!==$||k[9]!==U||k[10]!==z?(m=(0,t.jsx)(t.Fragment,{children:z||U?(0,t.jsx)(f.LineChartReport,{chartData:L,onChange:$,gradientId:"cumulativeOrgSignUpReportChartLine"}):(0,t.jsx)(x.ReportsLineChartFallback,{fallbackOverlay:"not-configured"})}),k[7]=L,k[8]=$,k[9]=U,k[10]=z,k[11]=m):m=k[11];let H=m;return k[12]!==D?(b=(0,c.to)(D,{page:"organizations",clearSearch:!0}),k[12]=D,k[13]=b):b=k[13],k[14]!==L||k[15]!==B||k[16]!==O?(w=(0,t.jsx)(g.ExportChartDialogTrigger,{chartTitle:O,chartData:L,gradientId:"cumulativeOrgSignUpReportChartLine",ignoreIncompletePeriods:B}),k[14]=L,k[15]=B,k[16]=O,k[17]=w):w=k[17],k[18]!==H||k[19]!==M||k[20]!==A||k[21]!==N||k[22]!==F||k[23]!==P||k[24]!==b||k[25]!==w||k[26]!==O?(C=(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(p.ChartCard,{title:O,description:N,subtitle:P,showSubtitle:F,defaultValue:M,date:A,chart:H,buttonHref:b,buttonText:"View all organizations",exportButtonSlot:w})}),k[18]=H,k[19]=M,k[20]=A,k[21]=N,k[22]=F,k[23]=P,k[24]=b,k[25]=w,k[26]=O,k[27]=C):C=k[27],C}function _(e){return e.end_date}function S(e){return e.users}function j(e){return{users:e.count,start_date:e.start_date,end_date:e.end_date}}function w(){let e,a=(0,r.c)(2),{interval:i}=(0,n.useOverviewSearchParams)();return a[0]!==i?(e=(0,t.jsx)(m.ErrorBoundary,{fallbackRender:C,children:(0,t.jsx)(b,{interval:i,title:"Total organizations",description:"The all time total of organizations created",subtitle:"All time"})}),a[0]=i,a[1]=e):e=a[1],e}function C(e){let{resetErrorBoundary:r}=e;return(0,t.jsx)(p.ChartCard,{error:!0,title:"Total organizations",description:"The all time total of organizations created",subtitle:"All time",chart:(0,t.jsx)(x.ReportsLineChartFallback,{fallbackOverlay:"error",resetErrorBoundary:r})})}var k=e.i(625248);let T={day:"The number of organizations created today",week:"The number of organizations created this week",month:"The number of organizations created this month"};function O(){let e,a,i,o,s,c,d,u,h=(0,r.c)(22),{interval:g,dateRange:f,ignoreIncompletePeriods:y}=(0,n.useOverviewSearchParams)();if(h[0]!==f||h[1]!==g){({formattedStart:i,formattedEnd:a}=(0,k.parseDateRange)(f));let t=l.intervalTextMap[g]??"week";s=`Organizations created per ${t}`,e=T[g]??"The number of organizations created this week",o=(0,k.getFormattedTrendPeriod)(g,a),h[0]=f,h[1]=g,h[2]=e,h[3]=a,h[4]=i,h[5]=o,h[6]=s}else e=h[2],a=h[3],i=h[4],o=h[5],s=h[6];let v=o;return h[7]!==e||h[8]!==v||h[9]!==s?(c=r=>{let{resetErrorBoundary:a}=r;return(0,t.jsx)(p.ChartCard,{error:!0,title:s,description:e,subtitle:v,chart:(0,t.jsx)(x.ReportsLineChartFallback,{fallbackOverlay:"error",resetErrorBoundary:a})})},h[7]=e,h[8]=v,h[9]=s,h[10]=c):c=h[10],h[11]!==e||h[12]!==a||h[13]!==i||h[14]!==y||h[15]!==g||h[16]!==v||h[17]!==s?(d=(0,t.jsx)(N,{formattedStart:i,formattedEnd:a,interval:g,ignoreIncompletePeriods:y,title:s,description:e,subtitle:v}),h[11]=e,h[12]=a,h[13]=i,h[14]=y,h[15]=g,h[16]=v,h[17]=s,h[18]=d):d=h[18],h[19]!==c||h[20]!==d?(u=(0,t.jsx)(m.ErrorBoundary,{fallbackRender:c,children:d}),h[19]=c,h[20]=d,h[21]=u):u=h[21],u}function N(e){let a,i,n,l,m,b,_,S=(0,r.c)(31),{formattedStart:j,formattedEnd:w,interval:C,ignoreIncompletePeriods:k,title:T,description:O,subtitle:N}=e,{getToken:D}=(0,d.useAuth)(),{instanceId:B}=(0,s.useTypedParams)(),I=(0,h.usePathname)();S[0]!==w||S[1]!==j||S[2]!==D||S[3]!==k||S[4]!==B||S[5]!==C?(a=(0,o.organizationActivityQuery)(B,{getToken:D,kind:"signups",interval:C,since:j,until:w,ignoreIncompleteIntervals:k}),S[0]=w,S[1]=j,S[2]=D,S[3]=k,S[4]=B,S[5]=C,S[6]=a):a=S[6];let{data:A,dataUpdatedAt:L}=(0,u.useSuspenseQuery)(a);S[7]!==A?(i=A.map(R),S[7]=A,S[8]=i):i=S[8];let M=i;S[9]===Symbol.for("react.memo_cache_sentinel")?(n={getDefaultValue:E,getDataPointKey:P},S[9]=n):n=S[9];let{currentValue:F,isCurrentPeriod:$,handleChange:z}=(0,y.useChartPeriodState)(M,n),{isConfigured:U,hasUsers:H}=(0,v.useDeploymentStatus)();S[10]!==z||S[11]!==H||S[12]!==U||S[13]!==M?(l=(0,t.jsx)(t.Fragment,{children:U||H?(0,t.jsx)(f.LineChartReport,{chartData:M,onChange:z,gradientId:"orgSignupReportChartLine"}):(0,t.jsx)(x.ReportsLineChartFallback,{fallbackOverlay:"not-configured"})}),S[10]=z,S[11]=H,S[12]=U,S[13]=M,S[14]=l):l=S[14];let Q=l;return S[15]!==I?(m=(0,c.to)(I,{page:"organizations",clearSearch:!0}),S[15]=I,S[16]=m):m=S[16],S[17]!==k||S[18]!==M||S[19]!==T?(b=(0,t.jsx)(g.ExportChartDialogTrigger,{chartTitle:T,chartData:M,gradientId:"orgSignupReportChartLine",ignoreIncompletePeriods:k}),S[17]=k,S[18]=M,S[19]=T,S[20]=b):b=S[20],S[21]!==Q||S[22]!==F||S[23]!==L||S[24]!==O||S[25]!==$||S[26]!==N||S[27]!==m||S[28]!==b||S[29]!==T?(_=(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(p.ChartCard,{title:T,description:O,subtitle:N,showSubtitle:$,defaultValue:F,date:L,chart:Q,buttonHref:m,buttonText:"View all organizations",exportButtonSlot:b})}),S[21]=Q,S[22]=F,S[23]=L,S[24]=O,S[25]=$,S[26]=N,S[27]=m,S[28]=b,S[29]=T,S[30]=_):_=S[30],_}function P(e){return e.end_date}function E(e){return e.users}function R(e){return{users:e.count,start_date:e.start_date,end_date:e.end_date}}function D(){let e,o,s,c,d,u,h=(0,r.c)(10),{interval:m}=(0,n.useOverviewSearchParams)(),p=l.intervalTextMap[m]??"week",g=l.RETENTION_CONFIG[m],f=`Organizations created per ${p}`;h[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(O,{}),h[0]=e):e=h[0],h[1]!==f?(o=(0,t.jsx)(a.ChartSuspense,{title:f,children:e}),h[1]=f,h[2]=o):o=h[2],h[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)(a.ChartSuspense,{title:"Total organizations",children:(0,t.jsx)(w,{})}),h[3]=s):s=h[3];let x=`${g.adjective} retention`;return h[4]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsx)(i.CohortRetentionReportChart,{entityType:"organization"}),h[4]=c):c=h[4],h[5]!==x?(d=(0,t.jsx)(a.ChartSuspense,{title:x,isRetention:!0,children:c}),h[5]=x,h[6]=d):d=h[6],h[7]!==o||h[8]!==d?(u=(0,t.jsxs)("div",{className:"mt-6 grid auto-rows-[minmax(412px,auto)] grid-cols-1 items-stretch gap-6 pb-32 md:grid-cols-2 lg:grid-cols-3",children:[o,s,d]}),h[7]=o,h[8]=d,h[9]=u):u=h[9],u}e.s(["Content",()=>D],636491)},449943,e=>{"use strict";var t=e.i(683471);function r(e){let{userView:r,orgView:a}=e;return"orgs"===(0,t.useSearchParams)().get("view")?a:r}e.s(["OverviewSwitcher",()=>r])},271673,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(868921),i=e.i(751278),n=e.i(784931),l=e.i(787802),o=e.i(886527),s=e.i(412939),c=e.i(758040),d=e.i(364890),u=e.i(915279),h=e.i(27968),m=e.i(847118),p=e.i(579611),g=e.i(928041),f=e.i(144373),x=e.i(870716);function y(e){let a,i,l,u,y,S,j=(0,r.c)(25),{interval:w,title:C,description:k,subtitle:T}=e,{getToken:O}=(0,c.useAuth)(),{instanceId:N}=(0,s.useTypedParams)(),{ignoreIncompletePeriods:P}=(0,n.useOverviewSearchParams)();j[0]!==O||j[1]!==N||j[2]!==w?(a=(0,o.cumulativeSignUpsQuery)(N,{getToken:O,interval:w}),j[0]=O,j[1]=N,j[2]=w,j[3]=a):a=j[3];let{data:E,dataUpdatedAt:R}=(0,d.useSuspenseQuery)(a);j[4]!==E?(i=E.map(_),j[4]=E,j[5]=i):i=j[5];let D=i;j[6]===Symbol.for("react.memo_cache_sentinel")?(l={getDefaultValue:b,getDataPointKey:v},j[6]=l):l=j[6];let{currentValue:B,isCurrentPeriod:I,handleChange:A}=(0,f.useChartPeriodState)(D,l),{isConfigured:L,hasUsers:M}=(0,x.useDeploymentStatus)();j[7]!==D||j[8]!==A||j[9]!==M||j[10]!==L?(u=(0,t.jsx)(t.Fragment,{children:L||M?(0,t.jsx)(p.LineChartReport,{chartData:D,onChange:A,gradientId:"signinReportChartLine"}):(0,t.jsx)(g.ReportsLineChartFallback,{fallbackOverlay:"not-configured"})}),j[7]=D,j[8]=A,j[9]=M,j[10]=L,j[11]=u):u=j[11];let F=u;return j[12]!==D||j[13]!==P||j[14]!==C?(y=(0,t.jsx)(m.ExportChartDialogTrigger,{chartTitle:C,chartData:D,gradientId:"cumulativeSignUpChartLine",ignoreIncompletePeriods:P}),j[12]=D,j[13]=P,j[14]=C,j[15]=y):y=j[15],j[16]!==F||j[17]!==B||j[18]!==R||j[19]!==k||j[20]!==I||j[21]!==T||j[22]!==y||j[23]!==C?(S=(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(h.ChartCard,{title:C,description:k,subtitle:T,showSubtitle:I,defaultValue:B,date:R,chart:F,exportButtonSlot:y})}),j[16]=F,j[17]=B,j[18]=R,j[19]=k,j[20]=I,j[21]=T,j[22]=y,j[23]=C,j[24]=S):S=j[24],S}function v(e){return e.end_date}function b(e){return e.users}function _(e){return{users:e.count,start_date:e.start_date,end_date:e.end_date}}function S(){let e,a=(0,r.c)(2),{interval:i}=(0,n.useOverviewSearchParams)();return a[0]!==i?(e=(0,t.jsx)(u.ErrorBoundary,{fallbackRender:j,children:(0,t.jsx)(y,{interval:i,title:"Total sign-ups",description:"The all time total of users who have signed up",subtitle:"All time"})}),a[0]=i,a[1]=e):e=a[1],e}function j(e){let{resetErrorBoundary:r}=e;return(0,t.jsx)(h.ChartCard,{error:!0,title:"Total sign-ups",description:"The all time total of users who have signed up",subtitle:"All time",chart:(0,t.jsx)(g.ReportsLineChartFallback,{fallbackOverlay:"error",resetErrorBoundary:r})})}var w=e.i(625248);let C={day:"The number of users who have signed in today",week:"The number of users who have signed in this week",month:"The number of users who have signed in this month"};function k(){let e,a,i,o,s,c,d,m,p=(0,r.c)(22),{interval:f,dateRange:x,ignoreIncompletePeriods:y}=(0,n.useOverviewSearchParams)();if(p[0]!==x||p[1]!==f){({formattedStart:i,formattedEnd:a}=(0,w.parseDateRange)(x));let t=l.intervalTextMap[f]??"week";s=`Sign-ins per ${t}`,e=C[f]??"The number of users who have signed in this week",o=(0,w.getFormattedTrendPeriod)(f,a),p[0]=x,p[1]=f,p[2]=e,p[3]=a,p[4]=i,p[5]=o,p[6]=s}else e=p[2],a=p[3],i=p[4],o=p[5],s=p[6];let v=o;return p[7]!==e||p[8]!==v||p[9]!==s?(c=r=>{let{resetErrorBoundary:a}=r;return(0,t.jsx)(h.ChartCard,{error:!0,title:s,description:e,subtitle:v,chart:(0,t.jsx)(g.ReportsLineChartFallback,{fallbackOverlay:"error",resetErrorBoundary:a})})},p[7]=e,p[8]=v,p[9]=s,p[10]=c):c=p[10],p[11]!==e||p[12]!==a||p[13]!==i||p[14]!==y||p[15]!==f||p[16]!==v||p[17]!==s?(d=(0,t.jsx)(T,{formattedStart:i,formattedEnd:a,interval:f,ignoreIncompletePeriods:y,title:s,description:e,subtitle:v}),p[11]=e,p[12]=a,p[13]=i,p[14]=y,p[15]=f,p[16]=v,p[17]=s,p[18]=d):d=p[18],p[19]!==c||p[20]!==d?(m=(0,t.jsx)(u.ErrorBoundary,{fallbackRender:c,children:d}),p[19]=c,p[20]=d,p[21]=m):m=p[21],m}function T(e){let a,i,n,l,u,y,v=(0,r.c)(28),{formattedStart:b,formattedEnd:_,interval:S,ignoreIncompletePeriods:j,title:w,description:C,subtitle:k}=e,{getToken:T}=(0,c.useAuth)(),{instanceId:E}=(0,s.useTypedParams)();v[0]!==_||v[1]!==b||v[2]!==T||v[3]!==j||v[4]!==E||v[5]!==S?(a=(0,o.userActivityQuery)(E,{getToken:T,kind:"signins",interval:S,since:b,until:_,ignoreIncompleteIntervals:j}),v[0]=_,v[1]=b,v[2]=T,v[3]=j,v[4]=E,v[5]=S,v[6]=a):a=v[6];let{data:R,dataUpdatedAt:D}=(0,d.useSuspenseQuery)(a);v[7]!==R?(i=R.map(P),v[7]=R,v[8]=i):i=v[8];let B=i;v[9]===Symbol.for("react.memo_cache_sentinel")?(n={getDefaultValue:N,getDataPointKey:O},v[9]=n):n=v[9];let{currentValue:I,isCurrentPeriod:A,handleChange:L}=(0,f.useChartPeriodState)(B,n),{isConfigured:M,hasUsers:F}=(0,x.useDeploymentStatus)();v[10]!==L||v[11]!==F||v[12]!==M||v[13]!==B?(l=(0,t.jsx)(t.Fragment,{children:M||F?(0,t.jsx)(p.LineChartReport,{chartData:B,onChange:L,gradientId:"signinReportChartLine"}):(0,t.jsx)(g.ReportsLineChartFallback,{fallbackOverlay:"not-configured"})}),v[10]=L,v[11]=F,v[12]=M,v[13]=B,v[14]=l):l=v[14];let $=l;return v[15]!==j||v[16]!==B||v[17]!==w?(u=(0,t.jsx)(m.ExportChartDialogTrigger,{chartTitle:w,chartData:B,gradientId:"signinReportChartLine",ignoreIncompletePeriods:j}),v[15]=j,v[16]=B,v[17]=w,v[18]=u):u=v[18],v[19]!==$||v[20]!==I||v[21]!==D||v[22]!==C||v[23]!==A||v[24]!==k||v[25]!==u||v[26]!==w?(y=(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(h.ChartCard,{title:w,description:C,subtitle:k,showSubtitle:A,defaultValue:I,date:D,chart:$,exportButtonSlot:u})}),v[19]=$,v[20]=I,v[21]=D,v[22]=C,v[23]=A,v[24]=k,v[25]=u,v[26]=w,v[27]=y):y=v[27],y}function O(e){return e.end_date}function N(e){return e.users}function P(e){return{users:e.count,start_date:e.start_date,end_date:e.end_date}}let E={day:"The number of users who have signed up today",week:"The number of users who have signed up this week",month:"The number of users who have signed up this month"};function R(){let e,a,i,o,s,c,d,m,p=(0,r.c)(22),{interval:f,dateRange:x,ignoreIncompletePeriods:y}=(0,n.useOverviewSearchParams)();if(p[0]!==x||p[1]!==f){({formattedStart:i,formattedEnd:a}=(0,w.parseDateRange)(x));let t=l.intervalTextMap[f]??"week";s=`Sign-ups per ${t}`,e=E[f]??"The number of users who have signed up this week",o=(0,w.getFormattedTrendPeriod)(f,a),p[0]=x,p[1]=f,p[2]=e,p[3]=a,p[4]=i,p[5]=o,p[6]=s}else e=p[2],a=p[3],i=p[4],o=p[5],s=p[6];let v=o;return p[7]!==e||p[8]!==v||p[9]!==s?(c=r=>{let{resetErrorBoundary:a}=r;return(0,t.jsx)(h.ChartCard,{error:!0,title:s,description:e,subtitle:v,chart:(0,t.jsx)(g.ReportsLineChartFallback,{fallbackOverlay:"error",resetErrorBoundary:a})})},p[7]=e,p[8]=v,p[9]=s,p[10]=c):c=p[10],p[11]!==e||p[12]!==a||p[13]!==i||p[14]!==y||p[15]!==f||p[16]!==v||p[17]!==s?(d=(0,t.jsx)(D,{formattedStart:i,formattedEnd:a,interval:f,ignoreIncompletePeriods:y,title:s,description:e,subtitle:v}),p[11]=e,p[12]=a,p[13]=i,p[14]=y,p[15]=f,p[16]=v,p[17]=s,p[18]=d):d=p[18],p[19]!==c||p[20]!==d?(m=(0,t.jsx)(u.ErrorBoundary,{fallbackRender:c,children:d}),p[19]=c,p[20]=d,p[21]=m):m=p[21],m}function D(e){let a,i,n,l,u,y,v=(0,r.c)(28),{formattedStart:b,formattedEnd:_,interval:S,ignoreIncompletePeriods:j,title:w,description:C,subtitle:k}=e,{getToken:T}=(0,c.useAuth)(),{instanceId:O}=(0,s.useTypedParams)();v[0]!==_||v[1]!==b||v[2]!==T||v[3]!==j||v[4]!==O||v[5]!==S?(a=(0,o.userActivityQuery)(O,{getToken:T,kind:"signups",interval:S,since:b,until:_,ignoreIncompleteIntervals:j}),v[0]=_,v[1]=b,v[2]=T,v[3]=j,v[4]=O,v[5]=S,v[6]=a):a=v[6];let{data:N,dataUpdatedAt:P}=(0,d.useSuspenseQuery)(a);v[7]!==N?(i=N.map(A),v[7]=N,v[8]=i):i=v[8];let E=i;v[9]===Symbol.for("react.memo_cache_sentinel")?(n={getDefaultValue:I,getDataPointKey:B},v[9]=n):n=v[9];let{currentValue:R,isCurrentPeriod:D,handleChange:L}=(0,f.useChartPeriodState)(E,n),{isConfigured:M,hasUsers:F}=(0,x.useDeploymentStatus)();v[10]!==L||v[11]!==F||v[12]!==M||v[13]!==E?(l=(0,t.jsx)(t.Fragment,{children:M||F?(0,t.jsx)(p.LineChartReport,{chartData:E,onChange:L,gradientId:"signupReportChartLine"}):(0,t.jsx)(g.ReportsLineChartFallback,{fallbackOverlay:"not-configured"})}),v[10]=L,v[11]=F,v[12]=M,v[13]=E,v[14]=l):l=v[14];let $=l;return v[15]!==j||v[16]!==E||v[17]!==w?(u=(0,t.jsx)(m.ExportChartDialogTrigger,{chartTitle:w,chartData:E,gradientId:"signupReportChartLine",ignoreIncompletePeriods:j}),v[15]=j,v[16]=E,v[17]=w,v[18]=u):u=v[18],v[19]!==$||v[20]!==R||v[21]!==P||v[22]!==C||v[23]!==D||v[24]!==k||v[25]!==u||v[26]!==w?(y=(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(h.ChartCard,{title:w,description:C,subtitle:k,showSubtitle:D,defaultValue:R,date:P,chart:$,exportButtonSlot:u})}),v[19]=$,v[20]=R,v[21]=P,v[22]=C,v[23]=D,v[24]=k,v[25]=u,v[26]=w,v[27]=y):y=v[27],y}function B(e){return e.end_date}function I(e){return e.users}function A(e){return{users:e.count,start_date:e.start_date,end_date:e.end_date}}function L(){let e,o,s,c,d,u,h,m,p=(0,r.c)(14),{interval:g}=(0,n.useOverviewSearchParams)(),f=l.intervalTextMap[g]??"week",x=l.RETENTION_CONFIG[g],y=`Sign-ups per ${f}`;p[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(R,{}),p[0]=e):e=p[0],p[1]!==y?(o=(0,t.jsx)(a.ChartSuspense,{title:y,children:e}),p[1]=y,p[2]=o):o=p[2];let v=`Sign-ins per ${f}`;p[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,t.jsx)(k,{}),p[3]=s):s=p[3],p[4]!==v?(c=(0,t.jsx)(a.ChartSuspense,{title:v,children:s}),p[4]=v,p[5]=c):c=p[5],p[6]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)(a.ChartSuspense,{title:"Total sign-ups",children:(0,t.jsx)(S,{})}),p[6]=d):d=p[6];let b=`${x.adjective} retention`;return p[7]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)(i.CohortRetentionReportChart,{entityType:"user"}),p[7]=u):u=p[7],p[8]!==b?(h=(0,t.jsx)(a.ChartSuspense,{title:b,isRetention:!0,children:u}),p[8]=b,p[9]=h):h=p[9],p[10]!==o||p[11]!==c||p[12]!==h?(m=(0,t.jsxs)("div",{className:"mt-6 grid auto-rows-[minmax(412px,auto)] grid-cols-1 items-stretch gap-6 pb-32 md:grid-cols-2 lg:grid-cols-3",children:[o,c,d,h]}),p[10]=o,p[11]=c,p[12]=h,p[13]=m):m=p[13],m}e.s(["Content",()=>L],271673)},429898,e=>{"use strict";e.s(["ACTIVE_COHORT_STATUSES",0,["first_active","retained","reactivated"],"CHURNED_COHORT_STATUSES",0,["first_active_churned","retained_churned","reactivated_churned"],"USER_COHORTS_LIMIT_OPTIONS",0,[5,10,15,20,100],"USER_COHORTS_PAGE_SIZE",0,5])},513668,526190,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(912847),i=e.i(247854),n=e.i(988456),l=e.i(822380),o=e.i(536977),s=e.i(494766),c=e.i(432975);let d=[{id:"user_cohort",label:"User cohort",isRowHeader:!0,allowsSorting:!1,className:"w-[40%]"},{id:"metric",label:"Status",allowsSorting:!0},{id:"last_sign_in_at",label:"Last signed in",allowsSorting:!1},{id:"created_at",label:"Created",allowsSorting:!1}];e.s(["USER_COHORT_TABLE_COLUMNS",0,d],526190);var u=e.i(429898);function h(e){let i,n,o=(0,r.c)(3),{headers:s}=e,u=void 0===s?d:s;return o[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(a.TablePaginatedFooterSkeleton,{}),o[0]=i):i=o[0],o[1]!==u?(n=(0,t.jsx)(l.TableCardSkeleton,{className:c.EMBEDDED_COHORT_TABLE_STYLES.cardClassName,footer:i,children:(0,t.jsxs)(l.Table,{hasActions:!0,children:[(0,t.jsx)(l.TableHeader,{columns:u}),(0,t.jsx)(m,{headers:u,items:null})]})}),o[1]=u,o[2]=n):n=o[2],n}function m(e){let a,d,h,m,p,g,f=(0,r.c)(17),{headers:x,items:y}=e;f[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.parseAsInteger.withDefault(u.USER_COHORTS_PAGE_SIZE),f[0]=a):a=f[0];let[v]=(0,s.useQueryState)("cohortLimit",a),b=Math.max(1,Math.min(v,100));f[1]!==y?(d=y??[],f[1]=y,f[2]=d):d=f[2];let _=d;if(f[3]!==b||f[4]!==_){let e;f[6]!==_?(e=(e,t)=>{let r=_[t]??null;return{id:r?.user_id?r.user_id:`user-cohort-skeleton-${t}`,value:r}},f[6]=_,f[7]=e):e=f[7],h=Array.from({length:b},e),f[3]=b,f[4]=_,f[5]=h}else h=f[5];let S=h;return f[8]!==x||f[9]!==b?(m=[x,b],f[8]=x,f[9]=b,f[10]=m):m=f[10],f[11]!==x?(p=e=>{let r=e.value,a=null===r||!0===r.deleted;return(0,t.jsx)(l.TableRow,{className:c.EMBEDDED_COHORT_TABLE_STYLES.rowClassName,columns:x,actionsCell:(0,t.jsx)(l.TableActionCellSkeleton,{}),children:e=>{switch(e.id){case"user_cohort":return(0,t.jsx)(l.TableCell,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Skeleton,{className:"size-10 shrink-0 rounded-full"}),(0,t.jsxs)("div",{className:"flex w-full min-w-0 max-w-64 flex-col gap-1 lg:max-w-72 xl:max-w-96",children:[(0,t.jsx)(n.Skeleton,{className:"w-fit max-w-full text-ceramic-label-2",children:a||!r?.name?"User Name":r.name||r.primary_email_address||"User"}),(0,t.jsx)(n.Skeleton,{className:"w-fit max-w-full text-ceramic-body-2",children:a||!r?.primary_email_address?"user@example.com":r.primary_email_address})]})]})});case"metric":return(0,t.jsx)(l.TableCell,{children:(0,t.jsx)(i.BadgeSkeleton,{children:a||!r?.metric?"Retained":r.metric})});case"last_sign_in_at":return(0,t.jsx)(l.TableCell,{children:(0,t.jsx)(n.Skeleton,{className:"text-ceramic-body-2",children:a||!r?.last_sign_in_at?"January 1, 2024":(0,o.formatDate)(r.last_sign_in_at)})});case"created_at":return(0,t.jsx)(l.TableCell,{children:(0,t.jsx)(n.Skeleton,{className:"text-ceramic-body-2",children:a||!r?.created_at?"January 1, 2024":(0,o.formatDate)(r.created_at)})});default:return(0,t.jsx)(l.TableCell,{children:(0,t.jsx)(n.Skeleton,{className:"text-ceramic-body-2",children:"—"})})}}})},f[11]=x,f[12]=p):p=f[12],f[13]!==S||f[14]!==m||f[15]!==p?(g=(0,t.jsx)(l.TableBody,{className:c.EMBEDDED_COHORT_TABLE_STYLES.bodyClassName,items:S,dependencies:m,children:p}),f[13]=S,f[14]=m,f[15]=p,f[16]=g):g=f[16],g}e.s(["UserCohortTableSkeleton",()=>h,"UserCohortTableSkeletonBody",()=>m],513668)},951127,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(886527),i=e.i(912847),n=e.i(385991),l=e.i(114183),o=e.i(229903),s=e.i(412939),c=e.i(758040),d=e.i(431129),u=e.i(104477),h=e.i(237206),m=e.i(184260),p=e.i(625248),g=e.i(14066),f=e.i(784931),x=e.i(429898),y=e.i(898428);let v={page:y.parseAsInteger.withDefault(1),limit:y.parseAsInteger.withDefault(x.USER_COHORTS_PAGE_SIZE),order_by:y.parseAsString.withDefault("")};(0,y.createSearchParamsCache)(v,{urlKeys:{page:"cohortPage",limit:"cohortLimit",order_by:"cohortOrderBy"}});var b=e.i(609799),_=e.i(685262),S=e.i(662714),j=e.i(247854),w=e.i(70038),C=e.i(228069),k=e.i(363143),T=e.i(822380),O=e.i(431560),N=e.i(106268),P=e.i(596464),E=e.i(603203),R=e.i(134490),D=e.i(683471),B=e.i(432975),I=e.i(526190),A=e.i(513668);let L={first_active:(0,t.jsx)(j.Badge,{variant:"positive",children:"New User"}),first_active_churned:(0,t.jsx)(j.Badge,{variant:"secondary",children:"New User Churned"}),retained:(0,t.jsx)(j.Badge,{variant:"positive",children:"Retained"}),retained_churned:(0,t.jsx)(j.Badge,{variant:"secondary",children:"Retained Churned"}),reactivated:(0,t.jsx)(j.Badge,{variant:"positive",children:"Reactivated"}),reactivated_churned:(0,t.jsx)(j.Badge,{variant:"secondary",children:"Reactivated Churned"})};function M(e){let a,i,n,l,o,s=(0,r.c)(17),{showFallback:c,sortDescriptor:d,onSortChange:u,...h}=e,m=(0,D.usePathname)(),{UserActionsMenu:p,userActionsDialogs:g}=(0,b.useUserActionsMenu)(),f="children"in h&&!("error"in h),x="children"in h?h.children:void 0,y="data"in h?h.data.map(z):[],v=f&&x;return s[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)(T.TableHeader,{columns:I.USER_COHORT_TABLE_COLUMNS}),s[0]=a):a=s[0],s[1]!==p||s[2]!==y||s[3]!==m||s[4]!==h||s[5]!==c?(i="error"in h?(0,t.jsx)(T.TableBody,{className:"!rounded-none",items:[],dependencies:[I.USER_COHORT_TABLE_COLUMNS],renderEmptyState:()=>(0,t.jsx)(H,{resetErrorBoundary:h.resetErrorBoundary})}):c?(0,t.jsx)(A.UserCohortTableSkeletonBody,{headers:I.USER_COHORT_TABLE_COLUMNS,items:"data"in h?h.data:null}):(0,t.jsx)(T.TableBody,{className:B.EMBEDDED_COHORT_TABLE_STYLES.bodyClassName,items:y,dependencies:[I.USER_COHORT_TABLE_COLUMNS],renderEmptyState:$,children:e=>{let r=e.value,a=null===r||!0===r.deleted,i=r?.metric;return(0,t.jsx)(T.TableRow,{className:B.EMBEDDED_COHORT_TABLE_STYLES.rowClassName,columns:I.USER_COHORT_TABLE_COLUMNS,href:a?void 0:(0,_.to)(m,{page:`/users/${r.user_id}`,back_page:"overview"}),actionsCell:a?void 0:(0,t.jsx)(T.ActionsCell,{children:(0,t.jsx)(p,{userId:r.user_id,isBanned:r.banned,isLocked:r.locked})}),children:e=>{switch(e.id){case"user_cohort":return(0,t.jsx)(T.TableCell,{children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Avatar,{fallback:"user",alt:"",width:40,height:40,className:"size-10"}),(0,t.jsx)("div",{className:"flex w-full min-w-0 max-w-64 flex-col gap-1 lg:max-w-72 xl:max-w-96",children:(0,t.jsx)("span",{className:"truncate text-ceramic-label-2 text-ceramic-dimmed",children:"Deleted user"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Avatar,{unoptimized:!0,fallback:"user",alt:`Profile picture of ${r.name||r.primary_email_address||"user"}`,src:r.image_url,width:40,height:40,className:"size-10"}),(0,t.jsxs)("div",{className:"flex w-full min-w-0 max-w-64 flex-col gap-1 lg:max-w-72 xl:max-w-96",children:[(0,t.jsx)("span",{className:"truncate text-ceramic-label-2",children:r.name||r.primary_email_address||"Unknown user"}),(0,t.jsx)("span",{className:"truncate text-ceramic-body-2 text-ceramic-secondary",children:r.primary_email_address})]}),(0,t.jsx)("span",{className:"flex min-w-0 items-center gap-1",children:[r.banned&&{icon:N.BlockIcon,label:"Banned"},r.locked&&{icon:R.LockIcon,label:"Locked"}].filter(function(e){return!!e}).map(F)})]})})});case"metric":return(0,t.jsx)(T.TableCell,{children:i?L[i]??(0,t.jsx)(j.Badge,{variant:"secondary",children:i}):(0,t.jsx)("span",{className:a?"text-ceramic-dimmed":"text-ceramic-secondary",children:"—"})});case"last_sign_in_at":return(0,t.jsx)(T.TableCell,{className:a||!r.last_sign_in_at?"text-ceramic-dimmed":"text-ceramic-secondary",children:a||!r.last_sign_in_at?"—":(0,t.jsx)(C.Date,{date:r.last_sign_in_at,format:{month:"long"}})});case"created_at":return(0,t.jsx)(T.TableCell,{className:a?"text-ceramic-dimmed":"text-ceramic-secondary",children:a?"—":(0,t.jsx)(C.Date,{date:r.created_at,format:{month:"long"}})});default:return(0,t.jsx)(T.TableCell,{className:"text-ceramic-body-2",children:a?"":"—"})}}})}}),s[1]=p,s[2]=y,s[3]=m,s[4]=h,s[5]=c,s[6]=i):i=s[6],s[7]!==u||s[8]!==d||s[9]!==i?(n=(0,t.jsxs)(T.Table,{hasActions:!0,sortDescriptor:d,onSortChange:u,children:[a,i]}),s[7]=u,s[8]=d,s[9]=i,s[10]=n):n=s[10],s[11]!==v||s[12]!==n?(l=(0,t.jsx)(T.TableCard,{className:B.EMBEDDED_COHORT_TABLE_STYLES.cardClassName,footer:v,children:n}),s[11]=v,s[12]=n,s[13]=l):l=s[13],s[14]!==l||s[15]!==g?(o=(0,t.jsxs)(t.Fragment,{children:[l,g]}),s[14]=l,s[15]=g,s[16]=o):o=s[16],o}function F(e){let{icon:r,label:a}=e;return(0,t.jsxs)(O.TooltipTrigger,{children:[(0,t.jsx)(O.Tooltip,{children:a}),(0,t.jsx)(w.Button,{icon:r,"aria-label":a,emphasis:"none",variant:"negative"})]},a)}function $(){return(0,t.jsx)(U,{})}function z(e,t){return{id:e?.user_id??`deleted-${t}`,value:e}}function U(){let e,a=(0,r.c)(1);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(k.Empty,{icon:P.UserDottedCircleIcon,title:"No users found in this cohort",description:"Try selecting a different cohort"}),a[0]=e):e=a[0],e}function H(e){let a,i=(0,r.c)(2),{resetErrorBoundary:n}=e;return i[0]!==n?(a=(0,t.jsx)(k.Empty,{icon:E.ExclamationTriangleIcon,title:"Something went wrong",description:"Could not fetch users cohort",button:(0,t.jsx)(w.Button,{onPress:()=>{n?n():window.location.reload()},children:"Try again"})}),i[0]=n,i[1]=a):a=i[1],a}var Q=e.i(536977);e.i(946202);var K=e.i(215314);function q(){let e,l,y,b,_,S,j,w=(0,r.c)(27),{setIsCohortDataFetching:C}=(0,g.useCohortTableControllerContext)(),{getToken:k}=(0,c.useAuth)(),{instanceId:T}=(0,s.useTypedParams)(),{dateRange:O,cohortStart:N,interval:P,cohortStatuses:E}=(0,f.useOverviewSearchParams)();w[0]===Symbol.for("react.memo_cache_sentinel")?(e={searchParamsParsers:v,urlKeys:{page:"cohortPage",limit:"cohortLimit",order_by:"cohortOrderBy"}},w[0]=e):e=w[0];let{params:R,deferredParams:D,setParams:B}=(0,o.useTableSearchParams)(e),{formattedStart:I,formattedEnd:A}=(0,p.parseDateRange)(O),{data:L}=(0,u.useQuery)((0,a.growthQuery)(T,{getToken:k,start:I,end:A,interval:P})),{start:F,effectiveCohortStatuses:$}=function({growthData:e,cohortStart:t,cohortStatuses:r,formattedEnd:a}){let i=e?.at?.(-1)?.start??null,n=t||i,l=n?(0,Q.formatISODate)(new K.UTCDate(n)):a||(0,Q.formatISODate)(new K.UTCDate),o=t?(0,Q.formatISODate)(new K.UTCDate(t)):null,s=i?(0,Q.formatISODate)(new K.UTCDate(i)):null,c=!o||o===s;return{start:l,effectiveCohortStatuses:!c||r.length>0?r:[...x.ACTIVE_COHORT_STATUSES],isViewingMostRecentInterval:c}}({growthData:L?.data,cohortStart:N,cohortStatuses:E,formattedEnd:A}),z=(0,h.useQueryClient)(),U=(0,a.userCohortQuery)(T,F,P,{page:D.page,limit:D.limit,cohortStatuses:$,orderBy:D.order_by,getToken:k}),H=`${F}|${P}|${$.join(",")}`,q=(0,m.useRef)(null),Z=(0,d.useIsFetching)({queryKey:U.queryKey})>0;if(w[1]!==N||w[2]!==Z||w[3]!==H||w[4]!==C?(l=()=>{if(!N)return;let e=q.current;Z&&H!==e?C(!0):Z||(C(!1),q.current=H)},y=[N,Z,H,C],w[1]=N,w[2]=Z,w[3]=H,w[4]=C,w[5]=l,w[6]=y):(l=w[5],y=w[6]),(0,m.useEffect)(l,y),!N)return null;let X=n.ErrorBoundary,J=U.queryKey.join(",");return w[7]!==U.queryKey||w[8]!==z?(b=()=>{z.removeQueries({queryKey:U.queryKey})},w[7]=U.queryKey,w[8]=z,w[9]=b):b=w[9],w[10]!==R.limit||w[11]!==R.page?(_=e=>{let{error:r,resetErrorBoundary:a}=e;return(0,t.jsx)(M,{showFallback:!1,sortDescriptor:{column:"metric",direction:"descending"},onSortChange:Y,error:r,resetErrorBoundary:a,children:(0,t.jsx)(i.TablePaginatedFooter,{count:0,limit:R.limit,page:R.page,onLimitChange:G,onPageChange:V,limitOptions:x.USER_COHORTS_LIMIT_OPTIONS})})},w[10]=R.limit,w[11]=R.page,w[12]=_):_=w[12],w[13]!==$||w[14]!==k||w[15]!==T||w[16]!==P||w[17]!==B||w[18]!==F||w[19]!==R?(S=(0,t.jsx)(W,{instanceId:T,getToken:k,start:F,interval:P,cohortStatuses:$,params:R,setParams:B}),w[13]=$,w[14]=k,w[15]=T,w[16]=P,w[17]=B,w[18]=F,w[19]=R,w[20]=S):S=w[20],w[21]!==X||w[22]!==J||w[23]!==b||w[24]!==_||w[25]!==S?(j=(0,t.jsx)(X,{resetOnChangeQuery:J,onError:b,fallbackRender:_,children:S}),w[21]=X,w[22]=J,w[23]=b,w[24]=_,w[25]=S,w[26]=j):j=w[26],j}function V(){}function G(){}function Y(){}function W(e){let n,o,s,c,d,u,h,m=(0,r.c)(32),{instanceId:p,getToken:f,start:y,interval:v,cohortStatuses:b,params:_,setParams:S}=e,{stage:j}=(0,g.useCohortTableControllerContext)();m[0]!==b||m[1]!==f||m[2]!==p||m[3]!==v||m[4]!==y?(n=e=>(0,a.userCohortQuery)(p,y,v,{page:e.page,limit:e.limit,cohortStatuses:b,orderBy:e.order_by,getToken:f}),m[0]=b,m[1]=f,m[2]=p,m[3]=v,m[4]=y,m[5]=n):n=m[5];let w=n;m[6]!==_||m[7]!==w||m[8]!==S?(o={rowsQueryFn:w,selectRows:ee,params:_,filters:void 0,setParams:S},m[6]=_,m[7]=w,m[8]=S,m[9]=o):o=m[9];let{data:C,totalCount:k,showFallback:T,setPage:O,setLimit:N,sortDescriptor:P,handleSortChange:E}=(0,l.useTableQuery)(o),R=T||"updating"===j;return m[10]!==E||m[11]!==j?(s="updating"===j?J:E,m[10]=E,m[11]=j,m[12]=s):s=m[12],m[13]!==N||m[14]!==j?(c="updating"===j?X:N,m[13]=N,m[14]=j,m[15]=c):c=m[15],m[16]!==O||m[17]!==j?(d="updating"===j?Z:O,m[16]=O,m[17]=j,m[18]=d):d=m[18],m[19]!==_.limit||m[20]!==_.page||m[21]!==c||m[22]!==d||m[23]!==k?(u=(0,t.jsx)(i.TablePaginatedFooter,{count:k,limit:_.limit,page:_.page,onLimitChange:c,onPageChange:d,limitOptions:x.USER_COHORTS_LIMIT_OPTIONS}),m[19]=_.limit,m[20]=_.page,m[21]=c,m[22]=d,m[23]=k,m[24]=u):u=m[24],m[25]!==P||m[26]!==R||m[27]!==s||m[28]!==u||m[29]!==k||m[30]!==C?(h=(0,t.jsx)(M,{showFallback:R,sortDescriptor:P,onSortChange:s,data:C,count:k,children:u}),m[25]=P,m[26]=R,m[27]=s,m[28]=u,m[29]=k,m[30]=C,m[31]=h):h=m[31],h}function Z(){}function X(){}function J(){}function ee(e){return e.data}e.s(["Content",()=>q],951127)},892688,e=>{"use strict";var t=e.i(73677),r=e.i(521322),a=e.i(886527),i=e.i(61210),n=e.i(412939),l=e.i(758040),o=e.i(364890),s=e.i(494766),c=e.i(915279),d=e.i(625248),u=e.i(457392),h=e.i(14066),m=e.i(870716),p=e.i(179475),g=e.i(784931),f=e.i(787802),x=e.i(456951),y=e.i(964973),v=e.i(29258),b=e.i(429898);function _(){let e,i,s,c,u,h,m,_,S,j=(0,r.c)(35);j[0]===Symbol.for("react.memo_cache_sentinel")?(e={positiveStatuses:b.ACTIVE_COHORT_STATUSES,negativeStatuses:b.CHURNED_COHORT_STATUSES},j[0]=e):e=j[0];let{uiSelectionForChart:w,activePositiveBars:C,activeNegativeBars:k,onPositiveClick:T,onNegativeClick:O}=(0,v.useCohortBarSelection)(e),{instanceId:N}=(0,n.useTypedParams)(),{getToken:P}=(0,l.useAuth)(),{interval:E,dateRange:R,ignoreIncompletePeriods:D}=(0,g.useOverviewSearchParams)(),{formattedStart:B,formattedEnd:I}=(0,d.parseDateRange)(R),{colors:A,stackOrder:L}=(0,y.useBarChartStackedConfig)("active"),{data:M}=(0,o.useSuspenseQuery)((0,a.growthQuery)(N,{getToken:P,start:B,end:I,interval:E,ignoreIncompleteIntervals:D})),F=M.data,$=M.meta,z=w.cohortStart??"";j[1]!==F||j[2]!==I||j[3]!==z?(i={growthData:F,cohortStart:z,fallbackDate:I},j[1]=F,j[2]=I,j[3]=z,j[4]=i):i=j[4];let{isActiveBar:U}=(0,p.useMostRecentInterval)(i);j[5]!==A?(s=Object.keys(A),j[5]=A,j[6]=s):s=j[6];let H=s;if(j[7]!==F||j[8]!==E){let e;j[10]!==E?(e=e=>{let t=(0,d.isPeriodComplete)(e,E),r={start:e.start,first_active:e.first_active,reactivated:e.reactivated,retained:e.retained,active:e.active,active_change:e.active_change};return t?{...r,first_active_churned:e.first_active_churned,reactivated_churned:e.reactivated_churned,retained_churned:e.retained_churned}:r},j[10]=E,j[11]=e):e=j[11],c=F.map(e),j[7]=F,j[8]=E,j[9]=c}else c=j[9];if(j[12]!==$||j[13]!==H){let e;j[15]!==H?(e=e=>H.includes(e.key),j[15]=H,j[16]=e):e=j[16],u=$.filter(e),j[12]=$,j[13]=H,j[14]=u}else u=j[14];j[17]!==c||j[18]!==u?(h={data:c,metadata:u},j[17]=c,j[18]=u,j[19]=h):h=j[19];let Q=h;return j[20]!==E?(m=e=>{let{payload:t}=e;if(!t?.[0]?.payload)return;let r=t[0].payload,a=(0,d.isPeriodComplete)(r,E);return{value:{key:"Active users",value:r.active??0},deviation:a?{key:`From ${f.tooltipIntervalTextMap[E]}`,value:r.active_change??0}:void 0}},j[20]=E,j[21]=m):m=j[21],j[22]!==U?(_=e=>U(e.start),j[22]=U,j[23]=_):_=j[23],j[24]!==k||j[25]!==C||j[26]!==Q.data||j[27]!==Q.metadata||j[28]!==A||j[29]!==O||j[30]!==T||j[31]!==L||j[32]!==m||j[33]!==_?(S=(0,t.jsx)("div",{children:(0,t.jsx)(x.BarChartStacked,{metadata:Q.metadata,data:Q.data,colors:A,stackOrder:L,tooltipMetrics:m,onPositiveClick:T,onNegativeClick:O,activePositiveBars:C,activeNegativeBars:k,activeBar:_})}),j[24]=k,j[25]=C,j[26]=Q.data,j[27]=Q.metadata,j[28]=A,j[29]=O,j[30]=T,j[31]=L,j[32]=m,j[33]=_,j[34]=S):S=j[34],S}let S=["first_active"],j=["first_active_churned"];function w(){let e,i,s,c,u,h,m,b,_,w=(0,r.c)(34);w[0]===Symbol.for("react.memo_cache_sentinel")?(e={positiveStatuses:S,negativeStatuses:j},w[0]=e):e=w[0];let{uiSelectionForChart:C,activePositiveBars:k,activeNegativeBars:T,onPositiveClick:O,onNegativeClick:N}=(0,v.useCohortBarSelection)(e),{instanceId:P}=(0,n.useTypedParams)(),{getToken:E}=(0,l.useAuth)(),{interval:R,dateRange:D,ignoreIncompletePeriods:B}=(0,g.useOverviewSearchParams)(),{formattedStart:I,formattedEnd:A}=(0,d.parseDateRange)(D),{colors:L}=(0,y.useBarChartStackedConfig)("new"),{data:M}=(0,o.useSuspenseQuery)((0,a.growthQuery)(P,{getToken:E,start:I,end:A,interval:R,ignoreIncompleteIntervals:B})),F=M.data,$=M.meta,z=C.cohortStart??"";w[1]!==A||w[2]!==F||w[3]!==z?(i={growthData:F,cohortStart:z,fallbackDate:A},w[1]=A,w[2]=F,w[3]=z,w[4]=i):i=w[4];let{isActiveBar:U}=(0,p.useMostRecentInterval)(i);w[5]!==L?(s=Object.keys(L),w[5]=L,w[6]=s):s=w[6];let H=s;if(w[7]!==R||w[8]!==F){let e;w[10]!==R?(e=e=>{let t=(0,d.isPeriodComplete)(e,R),r={start:e.start,first_active:e.first_active,first_active_change:e.first_active_change};return t?{...r,first_active_churned:e.first_active_churned}:r},w[10]=R,w[11]=e):e=w[11],c=F.map(e),w[7]=R,w[8]=F,w[9]=c}else c=w[9];if(w[12]!==H||w[13]!==$){let e;w[15]!==H?(e=e=>H.includes(e.key),w[15]=H,w[16]=e):e=w[16],u=$.filter(e),w[12]=H,w[13]=$,w[14]=u}else u=w[14];w[17]!==c||w[18]!==u?(h={data:c,metadata:u},w[17]=c,w[18]=u,w[19]=h):h=w[19];let Q=h;return w[20]!==R?(m=e=>{let{payload:t}=e;if(!t?.[0]?.payload)return;let r=t[0].payload,a=(0,d.isPeriodComplete)(r,R);return{value:{key:"New users",value:r.first_active??0},deviation:a?{key:`From ${f.tooltipIntervalTextMap[R]}`,value:r.first_active_change??0}:void 0}},w[20]=R,w[21]=m):m=w[21],w[22]!==U?(b=e=>U(e.start),w[22]=U,w[23]=b):b=w[23],w[24]!==T||w[25]!==k||w[26]!==Q.data||w[27]!==Q.metadata||w[28]!==L||w[29]!==N||w[30]!==O||w[31]!==m||w[32]!==b?(_=(0,t.jsx)("div",{children:(0,t.jsx)(x.BarChartStacked,{metadata:Q.metadata,colors:L,data:Q.data,tooltipMetrics:m,onPositiveClick:O,onNegativeClick:N,activePositiveBars:k,activeNegativeBars:T,activeBar:b})}),w[24]=T,w[25]=k,w[26]=Q.data,w[27]=Q.metadata,w[28]=L,w[29]=N,w[30]=O,w[31]=m,w[32]=b,w[33]=_):_=w[33],_}let C=["reactivated"],k=["reactivated_churned"];function T(){let e,i,s,c,u,h,m,b,_,S=(0,r.c)(34);S[0]===Symbol.for("react.memo_cache_sentinel")?(e={positiveStatuses:C,negativeStatuses:k},S[0]=e):e=S[0];let{uiSelectionForChart:j,activePositiveBars:w,activeNegativeBars:T,onPositiveClick:O,onNegativeClick:N}=(0,v.useCohortBarSelection)(e),{instanceId:P}=(0,n.useTypedParams)(),{getToken:E}=(0,l.useAuth)(),{interval:R,dateRange:D,ignoreIncompletePeriods:B}=(0,g.useOverviewSearchParams)(),{formattedStart:I,formattedEnd:A}=(0,d.parseDateRange)(D),{colors:L}=(0,y.useBarChartStackedConfig)("reactivated"),{data:M}=(0,o.useSuspenseQuery)((0,a.growthQuery)(P,{getToken:E,start:I,end:A,interval:R,ignoreIncompleteIntervals:B})),F=M.data,$=M.meta,z=j.cohortStart??"";S[1]!==A||S[2]!==F||S[3]!==z?(i={growthData:F,cohortStart:z,fallbackDate:A},S[1]=A,S[2]=F,S[3]=z,S[4]=i):i=S[4];let{isActiveBar:U}=(0,p.useMostRecentInterval)(i);S[5]!==L?(s=Object.keys(L),S[5]=L,S[6]=s):s=S[6];let H=s;if(S[7]!==R||S[8]!==F){let e;S[10]!==R?(e=e=>{let t=(0,d.isPeriodComplete)(e,R),r={start:e.start,reactivated:e.reactivated,reactivated_change:e.reactivated_change};return t?{...r,reactivated_churned:e.reactivated_churned}:r},S[10]=R,S[11]=e):e=S[11],c=F.map(e),S[7]=R,S[8]=F,S[9]=c}else c=S[9];if(S[12]!==H||S[13]!==$){let e;S[15]!==H?(e=e=>H.includes(e.key),S[15]=H,S[16]=e):e=S[16],u=$.filter(e),S[12]=H,S[13]=$,S[14]=u}else u=S[14];S[17]!==c||S[18]!==u?(h={data:c,metadata:u},S[17]=c,S[18]=u,S[19]=h):h=S[19];let Q=h;return S[20]!==R?(m=e=>{let{payload:t}=e;if(!t?.[0]?.payload)return;let r=t[0].payload,a=(0,d.isPeriodComplete)(r,R);return{value:{key:"Reactivated users",value:r.reactivated??0},deviation:a?{key:`From ${f.tooltipIntervalTextMap[R]}`,value:r.reactivated_change??0}:void 0}},S[20]=R,S[21]=m):m=S[21],S[22]!==U?(b=e=>U(e.start),S[22]=U,S[23]=b):b=S[23],S[24]!==T||S[25]!==w||S[26]!==Q.data||S[27]!==Q.metadata||S[28]!==L||S[29]!==N||S[30]!==O||S[31]!==m||S[32]!==b?(_=(0,t.jsx)("div",{children:(0,t.jsx)(x.BarChartStacked,{metadata:Q.metadata,colors:L,data:Q.data,tooltipMetrics:m,onPositiveClick:O,onNegativeClick:N,activePositiveBars:w,activeNegativeBars:T,activeBar:b})}),S[24]=T,S[25]=w,S[26]=Q.data,S[27]=Q.metadata,S[28]=L,S[29]=N,S[30]=O,S[31]=m,S[32]=b,S[33]=_):_=S[33],_}let O=["retained"],N=["retained_churned"];function P(){let e,i,s,c,u,h,m,b,_,S=(0,r.c)(34);S[0]===Symbol.for("react.memo_cache_sentinel")?(e={positiveStatuses:O,negativeStatuses:N},S[0]=e):e=S[0];let{uiSelectionForChart:j,activePositiveBars:w,activeNegativeBars:C,onPositiveClick:k,onNegativeClick:T}=(0,v.useCohortBarSelection)(e),{instanceId:P}=(0,n.useTypedParams)(),{getToken:E}=(0,l.useAuth)(),{interval:R,dateRange:D,ignoreIncompletePeriods:B}=(0,g.useOverviewSearchParams)(),{formattedStart:I,formattedEnd:A}=(0,d.parseDateRange)(D),{colors:L}=(0,y.useBarChartStackedConfig)("retained"),{data:M}=(0,o.useSuspenseQuery)((0,a.growthQuery)(P,{getToken:E,start:I,end:A,interval:R,ignoreIncompleteIntervals:B})),F=M.data,$=M.meta,z=j.cohortStart??"";S[1]!==A||S[2]!==F||S[3]!==z?(i={growthData:F,cohortStart:z,fallbackDate:A},S[1]=A,S[2]=F,S[3]=z,S[4]=i):i=S[4];let{isActiveBar:U}=(0,p.useMostRecentInterval)(i);S[5]!==L?(s=Object.keys(L),S[5]=L,S[6]=s):s=S[6];let H=s;if(S[7]!==R||S[8]!==F){let e;S[10]!==R?(e=e=>{let t=(0,d.isPeriodComplete)(e,R),r={start:e.start,retained:e.retained,retained_change:e.retained_change};return t?{...r,retained_churned:e.retained_churned}:r},S[10]=R,S[11]=e):e=S[11],c=F.map(e),S[7]=R,S[8]=F,S[9]=c}else c=S[9];if(S[12]!==H||S[13]!==$){let e;S[15]!==H?(e=e=>H.includes(e.key),S[15]=H,S[16]=e):e=S[16],u=$.filter(e),S[12]=H,S[13]=$,S[14]=u}else u=S[14];S[17]!==c||S[18]!==u?(h={data:c,metadata:u},S[17]=c,S[18]=u,S[19]=h):h=S[19];let Q=h;return S[20]!==R?(m=e=>{let{payload:t}=e;if(!t?.[0]?.payload)return;let r=t[0].payload,a=(0,d.isPeriodComplete)(r,R);return{value:{key:"Retained users",value:r.retained??0},deviation:a?{key:`From ${f.tooltipIntervalTextMap[R]}`,value:r.retained_change??0}:void 0}},S[20]=R,S[21]=m):m=S[21],S[22]!==U?(b=e=>U(e.start),S[22]=U,S[23]=b):b=S[23],S[24]!==C||S[25]!==w||S[26]!==Q.data||S[27]!==Q.metadata||S[28]!==L||S[29]!==T||S[30]!==k||S[31]!==m||S[32]!==b?(_=(0,t.jsx)("div",{children:(0,t.jsx)(x.BarChartStacked,{metadata:Q.metadata,colors:L,data:Q.data,tooltipMetrics:m,onPositiveClick:k,onNegativeClick:T,activePositiveBars:w,activeNegativeBars:C,activeBar:b})}),S[24]=C,S[25]=w,S[26]=Q.data,S[27]=Q.metadata,S[28]=L,S[29]=T,S[30]=k,S[31]=m,S[32]=b,S[33]=_):_=S[33],_}e.i(988456);var E=e.i(927800),R=e.i(291474);function D(e){let a,i,n,l,o=(0,r.c)(11),{fallbackOverlay:s,resetErrorBoundary:c,chartHeight:d,onDisableIncompletePeriods:u}=e,h="no-complete-periods"!==s&&"pointer-events-none select-none";return o[0]!==h?(a=(0,E.cx)("mt-6 rounded-3xl bg-ceramic-gray-50 p-1 dark:bg-ceramic-gray-1500",h),o[0]=h,o[1]=a):a=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,E.cx)("rounded-2xl bg-ceramic-main","shadow-[0_0_0_1px_rgba(25,28,33,0.04),0_1px_2px_rgba(25,28,33,0.06),0px_0px_2px_theme(colors.ceramic.black/0.08)]","dark:shadow-[inset_0_0_1px_1px_theme(colors.ceramic.white/0.01),0_0_0_1px_theme(colors.ceramic.black/0.2),0_0_3px_theme(colors.ceramic.black/0.2),0px_1px_3px_theme(colors.ceramic.black/0.4)]"),o[2]=i):i=o[2],o[3]!==d||o[4]!==s||o[5]!==u||o[6]!==c?(n=(0,t.jsx)("div",{className:i,children:"error"===s?(0,t.jsx)(R.StackedBarChartFallback,{fallbackOverlay:"error",resetErrorBoundary:c,chartHeight:d}):"no-complete-periods"===s?(0,t.jsx)(R.StackedBarChartFallback,{fallbackOverlay:"no-complete-periods",chartHeight:d,onDisableIncompletePeriods:u}):(0,t.jsx)(R.StackedBarChartFallback,{fallbackOverlay:"not-configured",chartHeight:d})}),o[3]=d,o[4]=s,o[5]=u,o[6]=c,o[7]=n):n=o[7],o[8]!==a||o[9]!==n?(l=(0,t.jsx)("div",{className:a,children:n}),o[8]=a,o[9]=n,o[10]=l):l=o[10],l}let B={active:[],new:["first_active","first_active_churned"],retained:["retained","retained_churned"],reactivated:["reactivated","reactivated_churned"]};function I(e){let a,i=(0,r.c)(2),{tableSlot:n}=e;return i[0]!==n?(a=(0,t.jsx)(c.ErrorBoundary,{fallbackRender:A,children:(0,t.jsx)(h.CohortTableControllerProvider,{children:(0,t.jsx)(L,{tableSlot:n})})}),i[0]=n,i[1]=a):a=i[1],a}function A(e){let a,i=(0,r.c)(2),{resetErrorBoundary:n}=e;return i[0]!==n?(a=(0,t.jsx)(D,{fallbackOverlay:"error",resetErrorBoundary:n}),i[0]=n,i[1]=a):a=i[1],a}function L(e){let c,f,x,y,v,b=(0,r.c)(30),{tableSlot:_}=e,{uiSelectionForChart:S}=(0,h.useCohortTableControllerContext)();b[0]===Symbol.for("react.memo_cache_sentinel")?(c={history:"push"},b[0]=c):c=b[0];let{interval:j,dateRange:w,setParams:C,metric:k,ignoreIncompletePeriods:T}=(0,g.useOverviewSearchParams)(c);b[1]===Symbol.for("react.memo_cache_sentinel")?(f=s.parseAsInteger.withDefault(1),b[1]=f):f=b[1];let[,O]=(0,s.useQueryState)("cohortPage",f),{formattedStart:N,formattedEnd:P}=(0,d.parseDateRange)(w);b[2]!==O||b[3]!==C?(x=e=>{let t=e.metric?B[e.metric]??[]:[];C({...e,cohortStatuses:t}),O(1)},b[2]=O,b[3]=C,b[4]=x):x=b[4];let E=x,{instanceId:R}=(0,n.useTypedParams)(),{getToken:I}=(0,l.useAuth)(),{isConfigured:A,hasUsers:L}=(0,m.useDeploymentStatus)(),{data:z}=(0,o.useSuspenseQuery)((0,a.growthQuery)(R,{getToken:I,start:N,end:P,interval:j,ignoreIncompleteIntervals:T})),U=z.data,H=z.meta,Q=S.cohortStart??"";b[5]!==P||b[6]!==U||b[7]!==Q?(y={growthData:U,cohortStart:Q,fallbackDate:P},b[5]=P,b[6]=U,b[7]=Q,b[8]=y):y=b[8];let{mostRecentInterval:K}=(0,p.useMostRecentInterval)(y),q=S.cohortStart??K;b[9]!==U||b[10]!==H||b[11]!==j||b[12]!==q?(v=$(U,H,j,q),b[9]=U,b[10]=H,b[11]=j,b[12]=q,b[13]=v):v=b[13];let V=v;if(0===U.length&&T){let e;return b[14]!==C?(e=(0,t.jsx)(D,{fallbackOverlay:"no-complete-periods",onDisableIncompletePeriods:()=>void C({ignoreIncompletePeriods:!1})}),b[14]=C,b[15]=e):e=b[15],e}if(!V){let e;return b[16]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(D,{fallbackOverlay:"error",resetErrorBoundary:F}),b[16]=e):e=b[16],e}if(A||L){let e,r,a,n,l=`user-${j}-${w}`;return b[17]!==E?(e=e=>{E({metric:e})},b[17]=E,b[18]=e):e=b[18],b[19]!==_?(r=_?(0,t.jsx)(u.AnimatedCohortTableSlot,{hintText:"Click any segment of the chart above to view the user list for that cohort",children:_}):void 0,b[19]=_,b[20]=r):r=b[20],b[21]!==V?(a=Object.entries(V).map(M),b[21]=V,b[22]=a):a=b[22],b[23]!==k||b[24]!==a||b[25]!==l||b[26]!==e||b[27]!==r?(n=(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)(i.AnalyticTabs,{selectedKey:k,onChange:e,belowChartSlot:r,metrics:a},l)}),b[23]=k,b[24]=a,b[25]=l,b[26]=e,b[27]=r,b[28]=n):n=b[28],n}if(!A&&!L){let e;return b[29]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(D,{fallbackOverlay:"not-configured"}),b[29]=e):e=b[29],e}}function M(e){let[t,r]=e;return{id:t,title:r.title,description:r.description,value:r.value,trendPeriod:r.trendPeriod,chartSlot:r.chartSlot}}function F(){return window.location.reload()}let $=(e,r,a,i)=>{let n,l={};if(i&&(n=e.find(e=>e.start===i)),!n&&e.length>0&&(n=e[e.length-1]),!n)return null;let o=r.reduce((e,t)=>(e[t.key]={description:f.USER_METRIC_DESCRIPTIONS[t.key]},e),{}),s={active:(0,t.jsx)(_,{}),new:(0,t.jsx)(w,{}),retained:(0,t.jsx)(P,{}),reactivated:(0,t.jsx)(T,{})};return Object.entries({active:{valueKey:"active"},new:{valueKey:"first_active"},retained:{valueKey:"retained"},reactivated:{valueKey:"reactivated"}}).forEach(([e,t])=>{let r=e.charAt(0).toUpperCase()+e.slice(1),i=o["new"===e?"first_active":e];l[e]={title:`${r}`,description:i?.description,value:n[t.valueKey]||0,trendPeriod:(0,d.getFormattedTrendPeriod)(a,n.start),chartSlot:s[e]}}),l};e.s(["Content",()=>I],892688)}]);